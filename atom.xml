<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>W | ä¸ªäººåšå®¢ | webå‰ç«¯</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-11-25T08:08:23.863Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>wangxiaobai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€</title>
    <link href="http://yoursite.com/2019/11/25/%E9%9D%A2%E8%AF%95%E9%A2%98-%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B3%BB%E5%88%97%E4%B9%8BJS%E5%9F%BA%E7%A1%80/"/>
    <id>http://yoursite.com/2019/11/25/é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€/</id>
    <published>2019-11-25T01:46:52.000Z</published>
    <updated>2019-11-25T08:08:23.863Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><p>æœ¬ç³»åˆ—æ—¨åœ¨æ•´ç† JS å¸¸è§é¢è¯•é¢˜ï¼Œå¸®åŠ©æ¢³ç† JS åŸºç¡€çŸ¥è¯†ç‚¹ã€‚</p><h3 id="ğŸŒ°-â€˜1â€™-â€˜2â€™-â€˜3â€™-map-parseInt-è¾“å‡ºç»“æœ"><a href="#ğŸŒ°-â€˜1â€™-â€˜2â€™-â€˜3â€™-map-parseInt-è¾“å‡ºç»“æœ" class="headerlink" title="ğŸŒ° [â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡ºç»“æœ"></a>ğŸŒ° [â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡ºç»“æœ</h3><h4 id="parseInt"><a href="#parseInt" class="headerlink" title="parseInt"></a>parseInt</h4><p>è§£æä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šåŸºæ•°çš„æ•´æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> intValue = <span class="built_in">parseInt</span>(string[, radix]);</div></pre></td></tr></table></figure><p>string è¦è¢«è§£æçš„å€¼ã€‚å¦‚æœå‚æ•°ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½ç¬¦ä¼šè¢«å¿½ç•¥ã€‚</p><p>radix ä¸€ä¸ªä»‹äº 2~36ä¹‹é—´çš„æ•´æ•°ï¼Œè¡¨ç¤ºä¸Šè¿°å­—ç¬¦ä¸²çš„åŸºæ•°ï¼Œé»˜è®¤å€¼ä¸º 10ã€‚</p><p>parseInt è¿”å›ä¸€ä¸ªæ•´æ•°æˆ– NaNã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">parseInt</span>(<span class="number">100</span>); <span class="comment">// 100</span></div><div class="line"><span class="built_in">parseInt</span>(<span class="number">100</span>, <span class="number">10</span>); <span class="comment">// 1*10*10 + 0*10*1 + 0*10*0 = 100</span></div><div class="line"><span class="built_in">parseInt</span>(<span class="number">100</span>, <span class="number">2</span>); <span class="comment">// 1*2*2 + 0*2*1 + 0*2*0 = 4</span></div></pre></td></tr></table></figure><p>åœ¨ radix ä¸º undefined ï¼Œæˆ– radix ä¸º 0 æˆ–æ²¡æœ‰æŒ‡å®šçš„æƒ…å†µä¸‹ï¼ŒJS ä½œå¦‚ä¸‹å¤„ç†ï¼š</p><ul><li><p>string ä»¥ â€˜0xâ€™ æˆ– â€˜0Xâ€™ å¼€å¤´ï¼Œåˆ™ radix ä¸º 16ã€‚</p></li><li><p>string ä»¥ â€˜0â€™ å¼€å¤´ï¼Œradix ä¸º 8 æˆ–è€… 10ï¼Œå…·ä½“å“ªä¸ªåŸºæ•°ç”±å®ç°ç¯å¢ƒå†³å®šã€‚</p></li><li><p>string ä»¥å…¶å®ƒä»»ä½•å€¼å¼€å¤´ï¼Œåˆ™ radix ä¸º 10ã€‚</p></li></ul><h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> new_array = arr.map(<span class="function"><span class="keyword">function</span> <span class="title">callback</span>(<span class="params">currentValue[,index[, array]]</span>) </span>&#123;</div><div class="line"> <span class="comment">// Return element for new_array</span></div><div class="line"> &#125;[, thisArg])</div></pre></td></tr></table></figure><p>callback å›è°ƒå‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º currentValue(æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„å€¼)ã€index(æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•)ã€array(map æ–¹æ³•ä¸­è¢«è°ƒç”¨çš„æ•°ç»„)ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</div><div class="line">arr.map(<span class="function"><span class="params">num</span> =&gt;</span> num * <span class="number">2</span>) <span class="comment">// [2, 4, 6]</span></div></pre></td></tr></table></figure><h4 id="â€˜1â€™-â€˜2â€™-â€˜3â€™-map-parseInt-è¾“å‡º"><a href="#â€˜1â€™-â€˜2â€™-â€˜3â€™-map-parseInt-è¾“å‡º" class="headerlink" title="[â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡º"></a>[â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡º</h4><p>å¯¹äºæ¯ä¸ªè¿­ä»£ mapï¼ŒparseInt() ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²å’ŒåŸºæ•°ã€‚æ‰€ä»¥å®é™…æ‰§è¡Œçš„ä»£ç ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>].map(<span class="built_in">parseInt</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> <span class="built_in">parseInt</span>(item, index))</div></pre></td></tr></table></figure><p>æ‰§è¡Œæ­¥éª¤ä¸ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">parseInt</span>(<span class="string">'1'</span>, <span class="number">0</span>); <span class="comment">// 1 (10 è¿›åˆ¶)</span></div><div class="line"><span class="built_in">parseInt</span>(<span class="string">'2'</span>, <span class="number">1</span>); <span class="comment">// NaN radix(2-36)</span></div><div class="line"><span class="built_in">parseInt</span>(<span class="string">'3'</span>, <span class="number">2</span>); <span class="comment">// NaN ä¸ç¬¦åˆ2è¿›åˆ¶ä½æ•°å–å€¼(0-1)</span></div></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>].map(<span class="built_in">parseInt</span>) <span class="comment">// [1, NaN, NaN]</span></div></pre></td></tr></table></figure><h3 id="ğŸŒ°-ä»€ä¹ˆæ˜¯èŠ‚æµå’Œé˜²æŠ–ï¼ŸåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ"><a href="#ğŸŒ°-ä»€ä¹ˆæ˜¯èŠ‚æµå’Œé˜²æŠ–ï¼ŸåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ" class="headerlink" title="ğŸŒ° ä»€ä¹ˆæ˜¯èŠ‚æµå’Œé˜²æŠ–ï¼ŸåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ"></a>ğŸŒ° ä»€ä¹ˆæ˜¯èŠ‚æµå’Œé˜²æŠ–ï¼ŸåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ</h3><h4 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h4><p>åŠ¨ä½œç»‘å®šäº‹ä»¶ï¼ŒåŠ¨ä½œå‘ç”Ÿåä¸€å®šæ—¶é—´å†…è§¦å‘æ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¦‚æœè¯¥åŠ¨ä½œåˆå‘ç”Ÿï¼Œåˆ™é‡æ–°ç­‰å¾…ä¸€å®šæ—¶é—´å†è§¦å‘äº‹ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * é˜²æŠ– debounce å®šæ—¶å™¨</span></div><div class="line"><span class="comment"> * @param fn &#123;function&#125; å›è°ƒå‡½æ•°</span></div><div class="line"><span class="comment"> * @param wait &#123;number&#125; æ—¶é—´é—´éš”</span></div><div class="line"><span class="comment"> * @author wangxiaobai</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">debounce</span> (<span class="params">fn, wait</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="comment">// æ¸…é™¤ä¸Šæ¬¡æ‰§è¡Œå¾—å®šæ—¶å™¨</span></div><div class="line">    <span class="keyword">if</span> (timer) &#123;</div><div class="line">      clearTimeout(timer)</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// è®¾ç«‹æ–°å®šæ—¶å™¨</span></div><div class="line">    timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">    &#125;, wait)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h4><p>åŠ¨ä½œç»‘å®šäº‹ä»¶ï¼ŒåŠ¨ä½œå‘ç”Ÿåä¸€å®šæ—¶é—´å†…è§¦å‘äº‹ä»¶ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¦‚æœè¯¥åŠ¨ä½œåˆå‘ç”Ÿï¼Œåˆ™æ— è§†è¯¥åŠ¨ä½œï¼Œç›´åˆ°äº‹ä»¶æ‰§è¡Œå®Œåï¼Œæ‰èƒ½é‡æ–°è§¦å‘ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * èŠ‚æµ throttle å®šæ—¶å™¨</span></div><div class="line"><span class="comment"> * @param fn &#123;function&#125; å›è°ƒå‡½æ•°</span></div><div class="line"><span class="comment"> * @param wait &#123;number&#125; æ—¶é—´é—´éš”</span></div><div class="line"><span class="comment"> * @author wangxiaobai</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">throttle</span> (<span class="params">fn, wait</span>) </span>&#123;</div><div class="line">  <span class="comment">// ä¸Šä¸€æ¬¡å‡½æ•°çš„æ‰§è¡Œæ—¶é—´  </span></div><div class="line">  <span class="keyword">let</span> activeTime = <span class="number">0</span></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</div><div class="line">      <span class="keyword">let</span> currentTime = +<span class="keyword">new</span> <span class="built_in">Date</span>()</div><div class="line">      <span class="keyword">if</span> (currentTime - activeTime &gt; wait) &#123;</div><div class="line">          fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">          activeTime = currentTime</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;p&gt;æœ¬ç³»åˆ—æ—¨åœ¨æ•´ç† JS å¸¸è§é¢è¯•é¢˜ï¼Œå¸®åŠ©æ¢³ç† JS åŸºç¡€çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ğŸŒ°-â€˜1â€™-â€˜2â€™-â€˜3â€™-map-parseIn
      
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="é¢è¯•é¢˜" scheme="http://yoursite.com/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC</title>
    <link href="http://yoursite.com/2019/08/26/CSS-%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98%E7%B3%BB%E5%88%97%E4%B9%8BBFC/"/>
    <id>http://yoursite.com/2019/08/26/CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC/</id>
    <published>2019-08-26T08:24:52.000Z</published>
    <updated>2019-08-29T08:28:46.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>BFC (Block Formatting Context) å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œé¡µé¢çš„å¯è§†åŒ– CSS æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œå—å†…çš„å­å…ƒç´ å¸ƒå±€ä¸å—å¤–çš„å…ƒç´ äº’ä¸å¹²æ‰°ã€‚</p></blockquote><h3 id="BFC-è§£å†³çš„é—®é¢˜"><a href="#BFC-è§£å†³çš„é—®é¢˜" class="headerlink" title="BFC è§£å†³çš„é—®é¢˜"></a>BFC è§£å†³çš„é—®é¢˜</h3><ul><li>æµ®åŠ¨å®šä½</li><li>æ¶ˆé™¤å¤–è¾¹è·æŠ˜å </li><li>æ¸…é™¤æµ®åŠ¨</li><li>è‡ªé€‚åº”å¤šæ å¸ƒå±€<br>â€¦</li></ul><hr><h3 id="BFC-çš„åˆ›å»º"><a href="#BFC-çš„åˆ›å»º" class="headerlink" title="BFC çš„åˆ›å»º"></a>BFC çš„åˆ›å»º</h3><ul><li>bodyæ ¹å…ƒç´ </li><li>æµ®åŠ¨: float é™¤ none ä»¥å¤–çš„å€¼</li><li>ç»å¯¹å®šä½: position (absolute, fixed)</li><li>overflow å€¼ä¸ä¸º visible</li><li>å¼¹æ€§å¸ƒå±€æˆ–ç½‘æ ¼å¸ƒå±€</li></ul><hr><h3 id="BFC-çš„çº¦æŸè§„åˆ™"><a href="#BFC-çš„çº¦æŸè§„åˆ™" class="headerlink" title="BFC çš„çº¦æŸè§„åˆ™"></a>BFC çš„çº¦æŸè§„åˆ™</h3><ul><li>å±äºåŒä¸€ä¸ª BFC ä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„ Box çš„ margin ä¼šå‘ç”ŸæŠ˜å ã€‚</li><li>æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹è·ä¸åŒ…å«å—çš„å·¦è¾¹ç•Œç›¸æ¥è§¦ï¼Œå³ä½¿æµ®åŠ¨å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</li><li>BFC çš„åŒºåŸŸä¸ä¼šä¸ float çš„å…ƒç´ åŒºåŸŸé‡å </li><li>è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li></ul><hr><h3 id="BFC-çš„åº”ç”¨"><a href="#BFC-çš„åº”ç”¨" class="headerlink" title="BFC çš„åº”ç”¨"></a>BFC çš„åº”ç”¨</h3><h4 id="é˜²æ­¢-margin-é‡å "><a href="#é˜²æ­¢-margin-é‡å " class="headerlink" title="é˜²æ­¢ margin é‡å "></a>é˜²æ­¢ margin é‡å </h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>top<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>bottom<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">  p &#123;</span></div><div class="line"><span class="undefined">    width: 100px;</span></div><div class="line"><span class="undefined">    height: 100px;</span></div><div class="line"><span class="undefined">    background: yellow;</span></div><div class="line"><span class="undefined">    line-height: 100px;</span></div><div class="line"><span class="undefined">    margin: 10px;</span></div><div class="line"><span class="undefined">    text-align: center</span></div><div class="line"><span class="undefined">  &#125;</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>å±•ç¤ºæ•ˆæœï¼š</p><p><img src="&#39;http://pwvl8v6t5.bkt.clouddn.com/css-bfc.png&#39;" alt=""></p><p>ä¸¤ä¸ª box ä¸­é—´çš„é—´è·ä¸º 10pxï¼Œè€Œä¸æ˜¯ 20pxï¼Œå› ä¸ºå®ƒä»¬å¤„äºåŒä¸€ä¸ª BFC ä¸­(body)ã€‚</p><p>è§£å†³æ–¹æ¡ˆä¸ºç»™ç¬¬äºŒä¸ª box åŒ…ä¸€å±‚ divï¼Œè®¾ç½®å…¶ overflow å±æ€§ï¼Œä½¿å®ƒä»¬å¤„äºä¸åŒçš„ BFCã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>top<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">div</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>bottom<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">  p &#123;</span></div><div class="line"><span class="undefined">    width: 100px;</span></div><div class="line"><span class="undefined">    height: 100px;</span></div><div class="line"><span class="undefined">    background: yellow;</span></div><div class="line"><span class="undefined">    line-height: 100px;</span></div><div class="line"><span class="undefined">    margin: 10px;</span></div><div class="line"><span class="undefined">    text-align: center</span></div><div class="line"><span class="undefined">  &#125;</span></div><div class="line"><span class="undefined">  div &#123;</span></div><div class="line"><span class="undefined">    overflow: hidden;</span></div><div class="line"><span class="undefined">  &#125;</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>å±•ç¤ºæ•ˆæœï¼š</p><p><img src="&#39;http://pwvl8v6t5.bkt.clouddn.com/css-bfc-margin.png&#39;" alt=""></p><h4 id="è®©æµ®åŠ¨å†…å®¹ä¸å‘¨å›´å†…å®¹ç­‰é«˜"><a href="#è®©æµ®åŠ¨å†…å®¹ä¸å‘¨å›´å†…å®¹ç­‰é«˜" class="headerlink" title="è®©æµ®åŠ¨å†…å®¹ä¸å‘¨å›´å†…å®¹ç­‰é«˜"></a>è®©æµ®åŠ¨å†…å®¹ä¸å‘¨å›´å†…å®¹ç­‰é«˜</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"float"</span>&gt;</span>æµ®åŠ¨å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æœªæµ®åŠ¨å…ƒç´ <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">.box &#123;</span></div><div class="line"><span class="undefined">    background-color: rgb(224, 206, 247);</span></div><div class="line"><span class="undefined">    border: 5px solid rebeccapurple;</span></div><div class="line"><span class="undefined">&#125;</span></div><div class="line"><span class="undefined">.float &#123;</span></div><div class="line"><span class="undefined">    float: left;</span></div><div class="line"><span class="undefined">    width: 200px;</span></div><div class="line"><span class="undefined">    height: 150px;</span></div><div class="line"><span class="undefined">    background-color: white;</span></div><div class="line"><span class="undefined">    border:1px solid black;</span></div><div class="line"><span class="undefined">    padding: 10px;</span></div><div class="line"><span class="undefined">&#125;      </span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>å±•ç¤ºæ•ˆæœï¼š</p><p><img src="&#39;http://pwvl8v6t5.bkt.clouddn.com/float-bfc-margin.png&#39;" alt=""></p><p>ç”±äºæµ®åŠ¨ï¼Œä½¿å¾—æµ®åŠ¨å…ƒç´ çš„é«˜åº¦é«˜äºæ—è¾¹çš„å…ƒç´ ï¼Œè§£å†³æ–¹å¼ä¸ºä½¿çˆ¶ box ç”Ÿæˆä¸€ä¸ª BFCï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"float"</span>&gt;</span>æµ®åŠ¨å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æœªæµ®åŠ¨å…ƒç´ <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">.box &#123;</span></div><div class="line"><span class="undefined">    background-color: rgb(224, 206, 247);</span></div><div class="line"><span class="undefined">    border: 5px solid rebeccapurple;</span></div><div class="line"><span class="undefined">    overflow: auto;</span></div><div class="line"><span class="undefined">&#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">.float &#123;</span></div><div class="line"><span class="undefined">    float: left;</span></div><div class="line"><span class="undefined">    width: 200px;</span></div><div class="line"><span class="undefined">    height: 150px;</span></div><div class="line"><span class="undefined">    background-color: white;</span></div><div class="line"><span class="undefined">    border:1px solid black;</span></div><div class="line"><span class="undefined">    padding: 10px;</span></div><div class="line"><span class="undefined">&#125;      </span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>å±•ç¤ºæ•ˆæœï¼š</p><p><img src="&#39;http://pwvl8v6t5.bkt.clouddn.com/float-bfc.png&#39;" alt=""></p><h4 id="é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–"><a href="#é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–" class="headerlink" title="é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–"></a>é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"float"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">.float &#123;</span></div><div class="line"><span class="undefined">  width: 100px;</span></div><div class="line"><span class="undefined">  height: 100px;</span></div><div class="line"><span class="undefined">  background: #eee;</span></div><div class="line"><span class="undefined">  float: left;</span></div><div class="line"><span class="undefined">&#125;</span></div><div class="line"><span class="undefined"></span></div><div class="line"><span class="undefined">.box &#123;</span></div><div class="line"><span class="undefined">  width: 200px;</span></div><div class="line"><span class="undefined">  height: 200px;</span></div><div class="line"><span class="undefined">  background: yellow;</span></div><div class="line"><span class="undefined">&#125;</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>å±•ç¤ºæ•ˆæœï¼š</p><p><img src="&#39;http://pwvl8v6t5.bkt.clouddn.com/column-css.png&#39;" alt=""></p><p>ç¬¬äºŒä¸ªå…ƒç´ æœ‰éƒ¨åˆ†è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–ï¼Œæ­¤æ—¶å¯è§¦å‘ç¬¬äºŒä¸ªå…ƒç´ çš„ BFC ç‰¹æ€§ï¼Œåœ¨ç¬¬äºŒä¸ªå…ƒç´ ä¸­åŠ å…¥ overflow: hiddenã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"float"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line"><span class="undefined">    .float &#123;</span></div><div class="line"><span class="undefined">      width: 100px;</span></div><div class="line"><span class="undefined">      height: 100px;</span></div><div class="line"><span class="undefined">      background: #eee;</span></div><div class="line"><span class="undefined">      float: left;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined">    </span></div><div class="line"><span class="undefined">    .box &#123;</span></div><div class="line"><span class="undefined">      overflow: hidden;</span></div><div class="line"><span class="undefined">      width: 200px;</span></div><div class="line"><span class="undefined">      height: 200px;</span></div><div class="line"><span class="undefined">      background: yellow;</span></div><div class="line"><span class="undefined">    &#125;</span></div><div class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>å±•ç¤ºæ•ˆæœï¼š</p><p><img src="&#39;http://pwvl8v6t5.bkt.clouddn.com/columb-css-bfc.png&#39;" alt=""></p><p>æ­¤æ–¹æ³•å¯ç”¨æ¥å®ç°ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><ul><li><a href="https://github.com/louzhedong/blog/issues/145" target="_blank" rel="external">BFCåŸç†è§£æ</a></li><li><a href="https://zhuanlan.zhihu.com/p/25321647" target="_blank" rel="external">10 åˆ†é’Ÿç†è§£ BFC åŸç†</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;BFC (Block Formatting Context) å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œé¡µé¢çš„å¯è§†åŒ– CSS æ¸²æŸ“çš„ä¸€éƒ¨åˆ†
      
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="CSS" scheme="http://yoursite.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹</title>
    <link href="http://yoursite.com/2019/08/18/Vue-%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97%E9%9A%8F%E8%AF%BB%E7%AC%94%E8%AE%B0%E4%B9%8BArray%E5%8F%98%E5%8C%96%E4%BE%A6%E6%B5%8B/"/>
    <id>http://yoursite.com/2019/08/18/Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹/</id>
    <published>2019-08-18T10:34:52.000Z</published>
    <updated>2019-08-17T17:13:30.468Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£</p></blockquote><a id="more"></a><h3 id="ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹"><a href="#ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹"></a>ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹</h3><p>ä»çŠ¶æ€ç”ŸæˆDOMï¼Œå†è¾“å‡ºåˆ°ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ä¸€æ•´å¥—æµç¨‹å«åšæ¸²æŸ“ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ä¼šä¸æ–­åœ°é‡æ–°æ¸²æŸ“ã€‚å“åº”å¼ç³»ç»Ÿèµ‹äºˆæ¡†æ¶é‡æ–°æ¸²æŸ“çš„èƒ½åŠ›ï¼Œå…¶é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å˜åŒ–ä¾¦æµ‹ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå˜åŒ–ä¾¦æµ‹çš„ä½œç”¨å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥è§†å›¾è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚</p><p>Vue.js 2.0 å¼•å…¥äº†è™šæ‹Ÿ DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ– (ç»„ä»¶å®ä¾‹) ï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ã€‚</p><hr><h3 id="å¦‚ä½•è¿½è¸ªå˜åŒ–"><a href="#å¦‚ä½•è¿½è¸ªå˜åŒ–" class="headerlink" title="å¦‚ä½•è¿½è¸ªå˜åŒ–"></a>å¦‚ä½•è¿½è¸ªå˜åŒ–</h3><p>é¦–å…ˆï¼Œåœ¨ JS ä¸­ï¼Œé€šè¿‡ Object.defineProperty ä¾¦æµ‹å¯¹è±¡å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å“åº”å¼æœ€æ ¹æœ¬çš„ä¾èµ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">  <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">     enumerable: <span class="literal">true</span>,</div><div class="line">     configurable: <span class="literal">true</span>,</div><div class="line">     get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> val</div><div class="line">     &#125;,</div><div class="line">     set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (val === newVal) &#123;</div><div class="line">           <span class="keyword">return</span> </div><div class="line">        &#125;</div><div class="line">        val = newVal</div><div class="line">     &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ­¤å¤„ç”¨ defineReactive å¯¹ Object.defineProperty è¿›è¡Œå°è£…ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å¯¹è±¡è¿›è¡Œå˜åŒ–è¿½è¸ªã€‚å°è£…å¥½ä¹‹åï¼Œæ¯å½“ä» data çš„ key ä¸­è¯»å–æ•°æ®æ—¶ï¼Œgetter å‡½æ•°è¢«è§¦å‘ï¼›æ¯å½“åœ¨ data çš„ key ä¸­è®¾ç½®æ–°æ•°æ®æ—¶ï¼Œ setter å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚</p><p>ç”±æ­¤å¯è§ï¼ŒObject.defineProperty æ˜¯å¯¹å·²æœ‰å±æ€§è¿›è¡Œçš„åŠ«æŒæ“ä½œï¼Œæ‰€ä»¥ Vue æ‰è¦æ±‚äº‹å…ˆå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨ data ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•å“åº”å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚è¢«åŠ«æŒçš„å±æ€§ä¼šæœ‰ç›¸åº”çš„ getã€set æ–¹æ³•ã€‚</p><hr><h3 id="å¦‚ä½•æ”¶é›†ä¾èµ–"><a href="#å¦‚ä½•æ”¶é›†ä¾èµ–" class="headerlink" title="å¦‚ä½•æ”¶é›†ä¾èµ–"></a>å¦‚ä½•æ”¶é›†ä¾èµ–</h3><p>æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> globalObj = &#123;</div><div class="line">  text1: <span class="string">'text1'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> o1 = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  template:</div><div class="line">    <span class="string">`&lt;div&gt;</span></div><div class="line"><span class="string">       &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; </span></div><div class="line"><span class="string">    &lt;div&gt;`</span>,</div><div class="line">  data: globalObj</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">let</span> o2 = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  template:</div><div class="line">     <span class="string">`&lt;div&gt;</span></div><div class="line"><span class="string">        &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; </span></div><div class="line"><span class="string">     &lt;div&gt;`</span>,</div><div class="line">  data: globalObj</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>è¯¥æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªvmå®ä¾‹ä½¿ç”¨äº†text1ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å‘ä½¿ç”¨äº†å®ƒçš„åœ°æ–¹å‘é€é€šçŸ¥æ¥æ›´æ–°è§†å›¾ï¼Ÿ</p><p>å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼Œå³æŠŠç”¨åˆ°äº†æ•°æ® text1 çš„åœ°æ–¹æ”¶é›†èµ·æ¥ï¼Œç„¶åå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠä¹‹å‰æ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘æ›´æ–°ä¸€éã€‚</p><p>å³ï¼šåœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–ã€‚</p><hr><h3 id="ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰"><a href="#ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰" class="headerlink" title="ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰"></a>ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰</h3><p> æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ã€‚æˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œç”¨å®ƒæ¥ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€é€šçŸ¥ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="keyword">constructor</span> () &#123;</div><div class="line">    <span class="keyword">this</span>.subs = [] <span class="comment">// è§‚å¯Ÿè€…é›†åˆ</span></div><div class="line">  &#125;</div><div class="line"> <span class="comment">// æ·»åŠ è§‚å¯Ÿè€…</span></div><div class="line">  addSub (sub) &#123;</div><div class="line">    <span class="keyword">this</span>.subs.push(sub)</div><div class="line">  &#125;</div><div class="line"> <span class="comment">// ç§»é™¤è§‚å¯Ÿè€…</span></div><div class="line">  removeSub (sub) &#123;</div><div class="line">    remove(<span class="keyword">this</span>.subs, sub)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  depend () &#123; <span class="comment">// å¦‚æœå­˜åœ¨ Dep.targetï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†æ“ä½œ</span></div><div class="line">    <span class="keyword">if</span> (Dep.target) &#123;</div><div class="line">      <span class="keyword">this</span>.addSub(Dep.target)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  notify () &#123;</div><div class="line">    <span class="keyword">const</span> subs = <span class="keyword">this</span>.subs.slice() <span class="comment">// é¿å…æ±¡æŸ“åŸæ¥çš„é›†åˆ</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = subs.length; i &lt; l; i++) &#123;</div><div class="line">      subs[i].update() <span class="comment">// æ›´æ–°</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">arr, item</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (arr.length) &#123;</div><div class="line">    <span class="keyword">const</span> index = arr.indexOf(item)</div><div class="line">    <span class="keyword">if</span> (index &gt; <span class="number">-1</span>) &#123;</div><div class="line">      <span class="keyword">return</span> arr.splice(index, <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ”¹é€  defineReactive</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> dep = <span class="keyword">new</span> Dep()</div><div class="line">  <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">     enumerable: <span class="literal">true</span>,</div><div class="line">     configurable: <span class="literal">true</span>,</div><div class="line">     get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        dep.depend()</div><div class="line">           <span class="keyword">return</span> val</div><div class="line">     &#125;,</div><div class="line">     set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (val === newVal) &#123;</div><div class="line">           <span class="keyword">return</span> </div><div class="line">        &#125;</div><div class="line">        val = newVal</div><div class="line">        dep.notify()</div><div class="line">     &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="ä»€ä¹ˆæ˜¯ä¾èµ–"><a href="#ä»€ä¹ˆæ˜¯ä¾èµ–" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¾èµ–"></a>ä»€ä¹ˆæ˜¯ä¾èµ–</h3><p>å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬è¦é€šçŸ¥ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç”¨åˆ°æ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ã€ä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·å†™çš„å‡½æ•°ç­‰ç­‰ï¼Œè¿™æ—¶éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›æƒ…å†µçš„ç±»ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥å•Šï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åï¼Œå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚</p><p>æ”¶é›†è°ï¼ŸWatcher!</p><hr><h3 id="ä»€ä¹ˆæ˜¯-Watcher"><a href="#ä»€ä¹ˆæ˜¯-Watcher" class="headerlink" title="ä»€ä¹ˆæ˜¯ Watcher"></a>ä»€ä¹ˆæ˜¯ Watcher</h3><p>Watcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®ƒï¼Œå®ƒå†é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vm.$watch(<span class="string">'a.b.c'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">newVal, oldVal</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å‡½æ•°ã€‚</p><p>æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c å±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ã€‚ç„¶åï¼Œå½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥ watcherã€‚æ¥ç€ï¼Œwatcher åœ¨æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Watcher</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">constructor</span> (</div><div class="line">    vm: Component, // ç»„ä»¶å®ä¾‹</div><div class="line">    expOrFn: string | Function, // è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œæˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦èƒ½è§¦å‘å–å€¼æ“ä½œ</div><div class="line">    cb: Function // è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ</div><div class="line">  ) &#123;</div><div class="line">    <span class="keyword">this</span>.vm = vm <span class="comment">// Watcheræœ‰ä¸€ä¸ª vm å±æ€§ï¼Œè¡¨æ˜å®ƒæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„</span></div><div class="line">    <span class="keyword">this</span>.cb = cb <span class="comment">// å›è°ƒ</span></div><div class="line">    <span class="keyword">this</span>.getter = parsePath(expOrFn)</div><div class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.get()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get () &#123; <span class="comment">// è§¦å‘å–å€¼æ“ä½œï¼Œè¿›è€Œè§¦å‘å±æ€§çš„getter</span></div><div class="line">    Dep.target = <span class="keyword">this</span></div><div class="line">    <span class="keyword">let</span> value = <span class="keyword">this</span>.getter.call(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.vm)</div><div class="line">    Dep.target = <span class="literal">null</span></div><div class="line">    <span class="keyword">return</span> value</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  update () &#123; <span class="comment">// æ›´æ–°</span></div><div class="line">    <span class="keyword">const</span> oldValue = <span class="keyword">this</span>.value</div><div class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.get()</div><div class="line">    <span class="keyword">this</span>.cb.call(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.value, oldValue)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å¯ä»¥å°†è‡ªå·±ä¸»åŠ¨æ·»åŠ åˆ° data.a.b.c çš„ Dep ä¸­ã€‚</p><p>åœ¨ get æ–¹æ³•ä¸­å…ˆæŠŠ Dep.target è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰ watcher å®ä¾‹ï¼Œç„¶åå†è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ï¼Œè¿™å°±ä¼šè§¦å‘ getterï¼Œè§¦å‘äº† getterï¼Œå°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„é€»è¾‘ã€‚</p><p>åªè¦ç°åœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åå†è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨æ·»åŠ åˆ° keypath çš„ Dep ä¸­ã€‚</p><p>ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­åï¼Œæ¯å½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè®©ä¾èµ–åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ã€‚</p><p>ä¸ç®¡ç”¨æˆ·æ‰§è¡Œçš„æ˜¯ vm.$watch(â€˜a.b.câ€™, (value, oldValue) =&gt; {})ï¼Œè¿˜æ˜¯æ¨¡æ¿ä¸­çš„ dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å˜åŒ–ã€‚</p><p>parsePathå‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> bailRE = <span class="regexp">/[^\w.$]/</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">parsePath</span>(<span class="params">path</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (bailRE.test(path)) &#123;</div><div class="line">      <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">const</span> segments = path.split(<span class="string">'.'</span>)</div><div class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; segments.length; i++) &#123;</div><div class="line">      <span class="keyword">if</span> (!obj) <span class="keyword">return</span></div><div class="line">      obj = obj[segments[i]]</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> obj</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="é€’å½’ä¾¦æµ‹æ‰€æœ‰Key"><a href="#é€’å½’ä¾¦æµ‹æ‰€æœ‰Key" class="headerlink" title="é€’å½’ä¾¦æµ‹æ‰€æœ‰Key"></a>é€’å½’ä¾¦æµ‹æ‰€æœ‰Key</h3><p>å‰é¢çš„å®ä¾‹ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ•°æ®ä¸­çš„æ‰€æœ‰å±æ€§éƒ½ä¾¦æµ‹åˆ°ï¼Œæ‰€ä»¥è¦å°è£…ä¸€ä¸ªObserverç±»ã€‚Observerçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®å†…çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬å­å±æ€§ï¼‰éƒ½è½¬æ¢æˆ getter/setter çš„å½¢å¼ï¼Œç„¶åå»è¿½è¸ªå®ƒä»¬çš„å˜åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span> (value) &#123;</div><div class="line">        <span class="keyword">this</span>.value = value</div><div class="line">        <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(value)) &#123;</div><div class="line">            <span class="keyword">this</span>.walk(value)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    walk (obj) &#123;</div><div class="line">        <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</div><div class="line">            defineReactive (obj, keys[i], obj[keys[i]])</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">'object'</span>) &#123;</div><div class="line">      <span class="keyword">new</span> Observer(val)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> dep = <span class="keyword">new</span> Dep()</div><div class="line">    <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">       enumerable: <span class="literal">true</span>,</div><div class="line">       configurable: <span class="literal">true</span>,</div><div class="line">       get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          dep.depend()</div><div class="line">             <span class="keyword">return</span> val</div><div class="line">       &#125;,</div><div class="line">       set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">          <span class="keyword">if</span> (val === newVal) &#123;</div><div class="line">             <span class="keyword">return</span> </div><div class="line">          &#125;</div><div class="line">          val = newVal</div><div class="line">          dep.notify()</div><div class="line">       &#125;</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Observer ç±»ï¼Œç”¨äºå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢æˆè¢«ä¾¦æµ‹çš„ objectã€‚</p><p>åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼Œåªæœ‰ Object ç±»å‹çš„æ•°æ®æ‰ä¼šè°ƒç”¨ walk å°†æ¯ä¸€ä¸ªå±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚</p><p>æœ€åï¼Œåœ¨ defineReactive ä¸­æ–°å¢ new Observer(val) æ¥é€’å½’å­å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ data ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚</p><p>å½“ data ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å±æ€§å¯¹åº”çš„ä¾èµ–å°±ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚</p><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å˜åŒ–ä¾¦æµ‹å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦èƒ½ä¾¦æµ‹åˆ°å¹¶å‘å‡ºé€šçŸ¥ã€‚</p><p>Object å¯ä»¥é€šè¿‡ Object.defineProperty å°†å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œè¯»å–æ•°æ®æ—¶ä¼šè§¦å‘ getterï¼Œä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ setterã€‚</p><p>æˆ‘ä»¬éœ€è¦åœ¨ getter ä¸­æ”¶é›†æœ‰å“ªäº›ä¾èµ–ä½¿ç”¨äº†æ•°æ®ã€‚å½“ setter è¢«è§¦å‘æ—¶ï¼Œå»é€šçŸ¥ getter ä¸­æ”¶é›†çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>æ”¶é›†ä¾èµ–éœ€è¦ä¸ºä¾èµ–æ‰¾ä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼Œä¸ºæ­¤åˆ›å»ºäº† Depï¼Œå®ƒç”¨æ¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯ç­‰ã€‚</p><p>æ‰€è°“çš„ä¾èµ–ï¼Œå…¶å®å°±æ˜¯ Watcherã€‚æŠŠ Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚</p><p>Watcher çš„åŸç†æ˜¯å…ˆæŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€å”¯ä¸€çš„æŒ‡å®šä½ç½® (Dep.target)ï¼Œç„¶åè¯»å–è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¯»å–äº†è¿™ä¸ªæ•°æ®ï¼Œå› æ­¤ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getter ã€‚æ¥ç€ï¼Œåœ¨ getter ä¸­å°±ä¼šä»å…¨å±€å”¯ä¸€çš„ä½ç½®è¯»å–æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­å»ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒWatcher å¯ä»¥ä¸»åŠ¨å»è®¢é˜…ä»»æ„ä¸€ä¸ªæ•°æ®çš„å˜åŒ–ã€‚</p><p>ç”±æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† Observer ç±»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ª object ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å­æ•°æ®ï¼‰éƒ½è½¬æ¢æˆå“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼šä¾¦æµ‹ object ä¸­æ‰€æœ‰æ•°æ®çš„å˜åŒ–ã€‚</p><p>åœ¨ Vue ä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§æˆ–åˆ é™¤å±æ€§éƒ½æ— æ³•è¢«ä¾¦æµ‹åˆ°ã€‚</p><p><img src="https://screenshot.net/zh/qv9nwto" alt=""></p><p>Object é€šè¿‡ Observer è½¬æ¢æˆäº† getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ã€‚</p><p>å½“å¤–ç•Œé€šè¿‡ Watcher è¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ getter ä»è€Œå°† Watcher æ·»åŠ åˆ° Dep ä¸­ã€‚</p><p>å½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ setterï¼Œä»è€Œå‘ Dep ä¸­çš„ä¾èµ–å‘é€é€šçŸ¥ã€‚</p><p>Watcher æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šåƒå¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</title>
    <link href="http://yoursite.com/2019/07/26/JS-%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E5%92%8C%E6%89%A7%E8%A1%8C%E6%A0%88/"/>
    <id>http://yoursite.com/2019/07/26/JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ/</id>
    <published>2019-07-26T07:18:52.000Z</published>
    <updated>2019-07-26T07:28:37.956Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p></blockquote><a id="more"></a><h2 id="ç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><a href="#ç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="ç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"></a>ç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h2><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹"></a>æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹</h3><p>æ‰§è¡Œä¸Šä¸‹æ–‡æ€»å…±æœ‰ä¸‰ç§ç±»å‹ï¼š</p><ul><li><p>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šåªæœ‰ä¸€ä¸ªï¼Œæµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡å°±æ˜¯ window å¯¹è±¡ï¼Œthis ä¼šæŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚</p></li><li><p>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šå­˜åœ¨æ— æ•°ä¸ªï¼Œåªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p></li><li><p>Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šè¿è¡Œåœ¨ Eval å‡½æ•°ä¸­çš„ä»£ç ã€‚</p></li></ul><hr><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"></a>æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h3><p>æ¥ä¸‹æ¥é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å†™äº†é‚£ä¹ˆå¤šå‡½æ•°ï¼Œå¦‚ä½•ç®¡ç†åˆ›å»ºçš„é‚£ä¹ˆå¤šæ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ</p><p>Javascript åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œä¹Ÿå«è°ƒç”¨æ ˆï¼Œæ¥ç®¡ç†åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><p>é¦–æ¬¡è¿è¡Œ Javascript ä»£ç æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ Push åˆ°å½“å‰çš„æ‰§è¡Œæ ˆä¸­ã€‚æ¯å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨ï¼Œå¼•æ“éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ Push åˆ°å½“å‰æ‰§è¡Œæ ˆçš„æ ˆé¡¶ã€‚</p><p>æ ¹æ®æ‰§è¡Œæ ˆ LIFO è§„åˆ™ï¼Œå½“æ ˆé¡¶å‡½æ•°è¿è¡Œå®Œæˆåï¼Œå…¶å¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°†ä¼šä»æ ˆä¸­ Pop å‡ºï¼Œä¸Šä¸‹æ–‡æ§åˆ¶æƒå°†ä¼šç§»åˆ°å½“å‰æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="string">'Hello World!'</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">first</span>(<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Inside first function'</span>);  </div><div class="line">  second();  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Again inside first function'</span>);  </div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">second</span>(<span class="params"></span>) </span>&#123;  </div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Inside second function'</span>);  </div><div class="line">&#125;</div><div class="line"></div><div class="line">first();  </div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Inside Global Execution Context'</span>);</div></pre></td></tr></table></figure><p><img src="&#39;https://user-gold-cdn.xitu.io/2018/11/5/166e258e1d0281a6?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#39;" alt=""></p><hr><h3 id="æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º"></a>æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»º</h3><p>æ‰§è¡Œä¸Šä¸‹æ–‡åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µåˆ›å»ºï¼š1ï¼‰ åˆ›å»ºé˜¶æ®µ 2ï¼‰æ‰§è¡Œé˜¶æ®µ</p><h4 id="åˆ›å»ºé˜¶æ®µ"><a href="#åˆ›å»ºé˜¶æ®µ" class="headerlink" title="åˆ›å»ºé˜¶æ®µ"></a>åˆ›å»ºé˜¶æ®µ</h4><ul><li><p>ç¡®å®š this çš„å€¼ï¼Œä¹Ÿè¢«ç§°ä¸º This Binding</p></li><li><p>LexicalEnvironment-è¯æ³•ç¯å¢ƒç»„ä»¶è¢«åˆ›å»º</p></li><li><p>VariableEnvironment-å˜é‡ç¯å¢ƒç»„ä»¶è¢«åˆ›å»º</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ExecutionContext = &#123;</div><div class="line">    ThisBinding: <span class="xml"><span class="tag">&lt;<span class="name">this</span> <span class="attr">value</span>&gt;</span>, // ç¡®å®š this</span></div><div class="line"><span class="xml">    LexicalEnvironment: &#123;...&#125;, // è¯æ³•ç¯å¢ƒ</span></div><div class="line"><span class="xml">    VariableEnvironment: &#123;...&#125; // å˜é‡ç¯å¢ƒ</span></div><div class="line"><span class="xml">&#125;</span></div></pre></td></tr></table></figure><h5 id="This-Binding"><a href="#This-Binding" class="headerlink" title="This Binding"></a>This Binding</h5><ul><li><p>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­ this çš„å€¼æŒ‡å‘ window å¯¹è±¡ï¼Œè€Œåœ¨ nodejs ä¸­æŒ‡å‘è¿™ä¸ªæ–‡ä»¶çš„ module å¯¹è±¡ã€‚</p></li><li><p>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis çš„å€¼å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚å…·ä½“æœ‰ï¼šé»˜è®¤ç»‘å®šã€éšå¼ç»‘å®šã€æ˜¾ç¤ºç»‘å®šã€new ç»‘å®šç­‰ã€‚</p></li></ul><h5 id="è¯æ³•ç¯å¢ƒ"><a href="#è¯æ³•ç¯å¢ƒ" class="headerlink" title="è¯æ³•ç¯å¢ƒ"></a>è¯æ³•ç¯å¢ƒ</h5><p>è¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š</p><ul><li><p>ç¯å¢ƒè®°å½•ï¼šå­˜å‚¨å˜é‡å’Œå‡½æ•°å£°æ˜çš„å®é™…ä½ç½®</p></li><li><p>å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ï¼šå¯ä»¥è®¿é—®å…¶å¤–éƒ¨è¯æ³•ç¯å¢ƒ</p></li></ul><p>è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹ï¼š</p><ul><li><p>å…¨å±€ç¯å¢ƒï¼šæ˜¯ä¸€ä¸ªæ²¡æœ‰å¤–éƒ¨ç¯å¢ƒçš„è¯æ³•ç¯å¢ƒï¼Œå…¶å¤–éƒ¨ç¯å¢ƒå¼•ç”¨ä¸º nullã€‚æ‹¥æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰åŠå…¶å…³è”çš„æ–¹æ³•å’Œå±æ€§ä»¥åŠä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰çš„å…¨å±€å˜é‡ï¼Œ this çš„å€¼æŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚</p></li><li><p>å‡½æ•°ç¯å¢ƒï¼šç”¨æˆ·åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡è¢«å­˜å‚¨åœ¨ç¯å¢ƒè®°å½•ä¸­ï¼ŒåŒ…å«äº† arguments å¯¹è±¡ã€‚å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨å¯ä»¥æ˜¯å…¨å±€ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ…å«å†…éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°ç¯å¢ƒï¼Œ</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">GlobalExectionContext = &#123;  <span class="comment">// å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</span></div><div class="line">  LexicalEnvironment: &#123;          <span class="comment">// è¯æ³•ç¯å¢ƒ</span></div><div class="line">    EnvironmentRecord: &#123;          <span class="comment">// ç¯å¢ƒè®°å½•</span></div><div class="line">      Type: <span class="string">"Object"</span>,                <span class="comment">// å…¨å±€ç¯å¢ƒ</span></div><div class="line">      <span class="comment">// æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ </span></div><div class="line">      outer: <span class="xml"><span class="tag">&lt;<span class="name">null</span>&gt;</span>                 // å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨</span></div><div class="line"><span class="xml">  &#125;  </span></div><div class="line"><span class="xml">&#125;</span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml">FunctionExectionContext = &#123; // å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</span></div><div class="line"><span class="xml">  LexicalEnvironment: &#123;     // è¯æ³•ç¯å¢ƒ</span></div><div class="line"><span class="xml">      EnvironmentRecord: &#123;      // ç¯å¢ƒè®°å½•</span></div><div class="line"><span class="xml">        Type: "Declarative",        // å‡½æ•°ç¯å¢ƒ</span></div><div class="line"><span class="xml">        // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ          // å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨</span></div><div class="line">        outer: &lt;Global or outer function environment reference&gt;  </div><div class="line">    &#125;  </div><div class="line">  &#125;</div></pre></td></tr></table></figure><h5 id="å˜é‡ç¯å¢ƒ"><a href="#å˜é‡ç¯å¢ƒ" class="headerlink" title="å˜é‡ç¯å¢ƒ"></a>å˜é‡ç¯å¢ƒ</h5><p>  å˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå› æ­¤å®ƒå…·æœ‰ä¸Šé¢å®šä¹‰çš„è¯æ³•ç¯å¢ƒçš„æ‰€æœ‰å±æ€§ã€‚</p><p>  åœ¨ES6ä¸­ï¼Œè¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒçš„åŒºåˆ«åœ¨äºå‰è€…ç”¨äºå­˜å‚¨å‡½æ•°å£°æ˜å’Œå˜é‡(let const)ç»‘å®šï¼Œåè€…ä»…ç”¨äºå­˜å‚¨å˜é‡(var)ç»‘å®šã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">GlobalExectionContext = &#123;</div><div class="line"></div><div class="line">  ThisBinding: <span class="xml"><span class="tag">&lt;<span class="name">Global</span> <span class="attr">Object</span>&gt;</span>,</span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml">  LexicalEnvironment: &#123;  </span></div><div class="line"><span class="xml">    EnvironmentRecord: &#123;  </span></div><div class="line"><span class="xml">      Type: "Object",  </span></div><div class="line"><span class="xml">      // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ  </span></div><div class="line"><span class="xml">      a: <span class="tag">&lt; <span class="attr">uninitialized</span> &gt;</span>,  </span></div><div class="line"><span class="xml">      b: <span class="tag">&lt; <span class="attr">uninitialized</span> &gt;</span>,  </span></div><div class="line"><span class="xml">      multiply: <span class="tag">&lt; <span class="attr">func</span> &gt;</span>  </span></div><div class="line"><span class="xml">    &#125;  </span></div><div class="line">    outer: &lt;null&gt;  </div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  VariableEnvironment: &#123;  </div><div class="line">    EnvironmentRecord: &#123;  </div><div class="line">      Type: "Object",  </div><div class="line">      // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ  </div><div class="line">      c: undefined,  </div><div class="line">    &#125;  </div><div class="line">    outer: &lt;null&gt;  </div><div class="line">  &#125;  </div><div class="line">&#125;</div><div class="line"></div><div class="line">FunctionExectionContext = &#123;  </div><div class="line">   </div><div class="line">  ThisBinding: &lt;Global Object&gt;,</div><div class="line">  </div><div class="line">  LexicalEnvironment: &#123;  </div><div class="line">    EnvironmentRecord: &#123;  </div><div class="line">      Type: "Declarative",  </div><div class="line">      // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ  </div><div class="line">      Arguments: &#123;0: 20, 1: 30, length: 2&#125;,  </div><div class="line">    &#125;,  </div><div class="line">    outer: &lt;GlobalLexicalEnvironment&gt;  </div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  VariableEnvironment: &#123;  </div><div class="line">    EnvironmentRecord: &#123;  </div><div class="line">      Type: "Declarative",  </div><div class="line">      // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ  </div><div class="line">      g: undefined  </div><div class="line">    &#125;,  </div><div class="line">    outer: &lt;GlobalLexicalEnvironment&gt;  </div><div class="line">  &#125;  </div><div class="line">&#125;</div></pre></td></tr></table></figure><p>  å˜é‡æå‡çš„åŸå› ï¼šåœ¨åˆ›å»ºé˜¶æ®µï¼Œå‡½æ•°å£°æ˜å­˜å‚¨åœ¨ç¯å¢ƒä¸­ï¼Œè€Œå˜é‡ä¼šè¢«è®¾ç½®ä¸º undefined (var æƒ…å†µä¸‹) æˆ–ä¿æŒæœªåˆå§‹åŒ– (letã€const æƒ…å†µä¸‹)ã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥åœ¨å£°æ˜ä¹‹å‰è®¿é—® var å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœåœ¨å£°æ˜ä¹‹å‰è®¿é—® let å’Œ const å®šä¹‰çš„å˜é‡ä¼šæç¤ºå¼•ç”¨é”™è¯¯çš„åŸå› ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å˜é‡æå‡ã€‚</p><h5 id="æ‰§è¡Œé˜¶æ®µ"><a href="#æ‰§è¡Œé˜¶æ®µ" class="headerlink" title="æ‰§è¡Œé˜¶æ®µ"></a>æ‰§è¡Œé˜¶æ®µ</h5><p>  æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼š</p><ul><li><p>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡</p></li><li><p>ä»£ç æ‰§è¡Œ</p><h6 id="è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡"></a>è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡</h6><p>æ­¤æ—¶çš„å˜é‡å¯¹è±¡åŒ…æ‹¬ï¼ˆå¦‚ä¸‹é¡ºåºåˆå§‹åŒ–ï¼‰ï¼š</p></li><li><p>å‡½æ•°æ‰€æœ‰çš„å½¢å‚ï¼šæ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸º undefinedã€‚</p></li><li><p>å‡½æ•°å£°æ˜ï¼šå¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§ã€‚</p></li><li><p>å˜é‡å£°æ˜ï¼šå¦‚æœå˜é‡åç§°ä¸å·²ç»å£°æ˜çš„å½¢å‚æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> b = <span class="number">2</span>;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;&#125;</div><div class="line">  <span class="keyword">var</span> d = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line">  b = <span class="number">3</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">foo(<span class="number">1</span>);</div></pre></td></tr></table></figure></li></ul>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">AO = &#123;</div><div class="line">    <span class="built_in">arguments</span>: &#123;</div><div class="line">        <span class="number">0</span>: <span class="number">1</span>,</div><div class="line">        length: <span class="number">1</span></div><div class="line">    &#125;,</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="literal">undefined</span>,</div><div class="line">    c: reference to <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;,</div><div class="line">    d: <span class="literal">undefined</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>  å½¢å‚ arguments å·²ç»æœ‰å€¼äº†ï¼Œä½†æ˜¯å˜é‡è¿˜æ˜¯ undefinedï¼Œåªæ˜¯åˆå§‹åŒ–çš„å€¼ã€‚</p><h6 id="ä»£ç æ‰§è¡Œ"><a href="#ä»£ç æ‰§è¡Œ" class="headerlink" title="ä»£ç æ‰§è¡Œ"></a>ä»£ç æ‰§è¡Œ</h6><p>  è¿™ä¸ªé˜¶æ®µä¼šé¡ºåºæ‰§è¡Œä»£ç ï¼Œå¹¶ä¿®æ”¹å˜é‡çš„å€¼ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">AO = &#123;</div><div class="line">    <span class="built_in">arguments</span>: &#123;</div><div class="line">        <span class="number">0</span>: <span class="number">1</span>,</div><div class="line">        length: <span class="number">1</span></div><div class="line">    &#125;,</div><div class="line">    a: <span class="number">1</span>,</div><div class="line">    b: <span class="number">3</span>,</div><div class="line">    c: reference to <span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>)</span>&#123;&#125;,</div><div class="line">    d: reference to FunctionExpression <span class="string">"d"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>  æ€»ç»“å¦‚ä¸‹ï¼š</p><ul><li><p>å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–æ˜¯å…¨å±€å¯¹è±¡ã€‚</p></li><li><p>å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–åªåŒ…æ‹¬ arguments å¯¹è±¡ã€‚</p></li><li><p>åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼ã€‚</p></li><li><p>åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼ã€‚</p></li></ul><h2 id="æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"><a href="#æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ" class="headerlink" title="æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ"></a>æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ</h2><p>JS æ˜¯å•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ‰§è¡Œé¡ºåºæ˜¯é¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯ JS å¼•æ“å¹¶ä¸æ˜¯ä¸€è¡Œä¸€è¡Œåœ°åˆ†æå’Œæ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µåœ°åˆ†æå’Œæ‰§è¡Œï¼Œå…ˆè¿›è¡Œç¼–è¯‘ç„¶åæ‰æ˜¯æ‰§è¡Œã€‚</p><p>æœ‰å¦‚ä¸‹ä¸¤æ®µä»£ç ï¼Œæ‰§è¡Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸¤æ®µä»£ç ç©¶ç«Ÿæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scope = <span class="string">"global scope"</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> scope = <span class="string">"local scope"</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> scope;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> f();</div><div class="line">&#125;</div><div class="line">checkscope();</div></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> scope = <span class="string">"global scope"</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkscope</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> scope = <span class="string">"local scope"</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="keyword">return</span> scope;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> f;</div><div class="line">&#125;</div><div class="line">checkscope()();</div></pre></td></tr></table></figure><p>ç­”æ¡ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„å˜åŒ–ä¸ä¸€æ ·ã€‚</p><p>ç¬¬ä¸€æ®µä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ECStack.push(<span class="xml"><span class="tag">&lt;<span class="name">checkscope</span>&gt;</span> functionContext);</span></div><div class="line">ECStack.push(&lt;f&gt; functionContext);</div><div class="line">ECStack.pop();</div><div class="line">ECStack.pop();</div></pre></td></tr></table></figure><p>ç¬¬äºŒæ®µä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ECStack.push(<span class="xml"><span class="tag">&lt;<span class="name">checkscope</span>&gt;</span> functionContext);</span></div><div class="line"><span class="xml">ECStack.pop();</span></div><div class="line">ECStack.push(&lt;f&gt; functionContext);</div><div class="line">ECStack.pop();</div></pre></td></tr></table></figure><h3 id="å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡"></a>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</h3><p>åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨æ´»åŠ¨å¯¹è±¡æ¥è¡¨ç¤ºå˜é‡å¯¹è±¡ã€‚</p><p>æ´»åŠ¨å¯¹è±¡å’Œå˜é‡å¯¹è±¡çš„åŒºåˆ«åœ¨äºï¼š</p><ul><li><p>å˜é‡å¯¹è±¡æ˜¯è§„èŒƒä¸Šæˆ– JS å¼•æ“ä¸Šå®ç°çš„ï¼Œå¹¶ä¸èƒ½åœ¨ JS ç¯å¢ƒä¸­ç›´æ¥è®¿é—®ã€‚</p></li><li><p>å½“è¿›å…¥åˆ°ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åï¼Œè¿™ä¸ªå˜é‡å¯¹è±¡ä¼šè¢«æ¿€æ´»ï¼Œæ‰€ä»¥å«æ´»åŠ¨å¯¹è±¡ï¼Œè¿™æ—¶æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±æ€§æ‰èƒ½è¢«è®¿é—®ã€‚</p></li></ul><p>è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºå…¶åˆ›å»ºä¸€ä¸ª arguments å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å±€éƒ¨å˜é‡ argumentsã€‚æ‰€æœ‰ä½œä¸ºå‚æ•°ä¼ å…¥çš„å€¼éƒ½ä¼šæˆä¸º arguments å¯¹è±¡çš„æ•°ç»„å…ƒç´ ã€‚</p><hr><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul><li><a href="https://juejin.im/post/5bf3d20ff265da61776b95da" target="_blank" rel="external">ç†è§£JavaScript ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ</a></li><li><a href="https://juejin.im/post/5bf3d20ff265da61776b95da" target="_blank" rel="external">JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå’Œå˜é‡å¯¹è±¡</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†</title>
    <link href="http://yoursite.com/2019/06/26/Node-NodeJS%E6%A0%B8%E5%BF%83%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2019/06/26/Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†/</id>
    <published>2019-06-26T15:11:52.000Z</published>
    <updated>2019-07-07T11:26:33.333Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>æˆªæ­¢ä»Šå¤©ï¼Œåƒè°·æ­Œã€äºšé©¬é€Šç­‰å…¨çƒ Top 10 äº’è”ç½‘å¤§å…¬å¸ï¼Œéƒ½æ—©å·²å…¥å‘ Nodeâ€¦</p></blockquote><a id="more"></a><h3 id="Nodejs-æ¦‚è¿°"><a href="#Nodejs-æ¦‚è¿°" class="headerlink" title="Nodejs æ¦‚è¿°"></a>Nodejs æ¦‚è¿°</h3><p>Nodejs æ˜¯åŸºäº Chrome V8 å¼•æ“æ„å»ºçš„ï¼Œç”±äº‹ä»¶å¾ªç¯åˆ†å¸ƒ I/O ä»»åŠ¡ï¼Œæœ€ç»ˆå·¥ä½œçº¿ç¨‹ä¼šå°†ä»»åŠ¡æ”¾åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œè€Œäº‹ä»¶å¾ªç¯ç­‰å¾…æ‰§è¡Œç»“æœå°±å¯ä»¥äº†ã€‚</p><ul><li><p>Nodejs æ˜¯ Javascript çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚</p></li><li><p>Nodejs æ„å»ºåœ¨ Chrome V8 è¿™ä¸ªè‘—åçš„ Javascript å¼•æ“ä¸Šã€‚</p></li><li><p>Nodejs æ¯ä¸ªå‡½æ•°éƒ½æ˜¯åŒæ­¥çš„ï¼Œè€Œ I/O æ“ä½œæ˜¯å¼‚æ­¥çš„ã€‚</p></li><li><p>Nodejs ä½¿ç”¨ npm ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚</p></li></ul><h3 id="Nodejs-å®‰è£…"><a href="#Nodejs-å®‰è£…" class="headerlink" title="Nodejs å®‰è£…"></a>Nodejs å®‰è£…</h3><p>Nodejs æ”¯æŒ macOSã€Linux ä»¥åŠ Windows ç­‰å¤šä¸ªä¸»æµæ“ä½œç³»ç»Ÿã€‚</p><h4 id="3m-å®‰è£…æ³•"><a href="#3m-å®‰è£…æ³•" class="headerlink" title="3m å®‰è£…æ³•"></a>3m å®‰è£…æ³•</h4><ul><li><p>nvm å¼€æºçš„ Nodejs ç‰ˆæœ¬ç®¡ç†å™¨</p></li><li><p>npm Nodejs åŒ…ç®¡ç†ç«¯</p></li><li><p>nrm è§£å†³ npm é•œåƒè®¿é—®æ…¢çš„é—®é¢˜ã€‚</p></li></ul><h5 id="nvm"><a href="#nvm" class="headerlink" title="nvm"></a>nvm</h5><h6 id="å®‰è£…-nvm"><a href="#å®‰è£…-nvm" class="headerlink" title="å®‰è£… nvm"></a>å®‰è£… nvm</h6><p>é¦–å…ˆï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ curl -o- https:<span class="comment">//raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash</span></div></pre></td></tr></table></figure><p>æ„æ€æ˜¯é€šè¿‡ curl å‘½ä»¤ä¸‹è½½ install.sh è„šæœ¬å¹¶æ‰§è¡Œã€‚æ‰§è¡Œå®Œæˆåï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi ~<span class="regexp">/.zshrc</span></div></pre></td></tr></table></figure><p>æŠŠ nvm å‘½ä»¤çš„æ‰§è¡Œè·¯å¾„æ”¾åˆ° ~/.zshrc æ–‡ä»¶ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> NVM_DIR=<span class="string">"$HOME/.nvm"</span></div><div class="line">[ -s <span class="string">"$NVM_DIR/nvm.sh"</span> ] &amp;&amp; . <span class="string">"$NVM_DIR/nvm.sh"</span></div></pre></td></tr></table></figure><p>æ‰§è¡Œ source å‘½ä»¤ï¼Œä½¿ç³»ç»Ÿç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source ~<span class="regexp">/.zshrc</span></div></pre></td></tr></table></figure><p>è¾“å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">nvm --version</div><div class="line"></div><div class="line"><span class="number">0.33</span><span class="number">.1</span></div></pre></td></tr></table></figure><h6 id="æŸ¥çœ‹å¯å®‰è£…çš„-Nodejs-ç‰ˆæœ¬"><a href="#æŸ¥çœ‹å¯å®‰è£…çš„-Nodejs-ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹å¯å®‰è£…çš„ Nodejs ç‰ˆæœ¬"></a>æŸ¥çœ‹å¯å®‰è£…çš„ Nodejs ç‰ˆæœ¬</h6><p>å®‰è£… Node ä¹‹å‰ï¼Œéœ€è¦äº†è§£é€šè¿‡ nvm å¯ä»¥å®‰è£…å“ªäº›ç‰ˆæœ¬çš„ Nodeã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nvm ls-remote</div></pre></td></tr></table></figure><ul><li><p>LTS ç‰ˆæœ¬æ˜¯æŒ‡é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œæ¨èç»™å¤§éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p></li><li><p>Current ç‰ˆæœ¬æ˜¯æŒ‡å½“å‰æ­£åœ¨å¼€å‘çš„å°é²œç‰ˆæœ¬ï¼Œä¸å®Œå…¨ç‰ˆæœ¬ï¼Œéœ€è¦ç»è¿‡ä¸€æ®µæ—¶é—´çš„æµ‹è¯•ã€å¼€å‘å’Œä¿®å¤ bug ç­‰æ‰èƒ½å˜ä¸º LTS ç‰ˆæœ¬ï¼Œä¸€èˆ¬ä¾›å¼€å‘è€…å­¦ä¹ ã€‚</p></li></ul><h6 id="å®‰è£…-Node"><a href="#å®‰è£…-Node" class="headerlink" title="å®‰è£… Node"></a>å®‰è£… Node</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nvm install <span class="number">10.15</span><span class="number">.3</span></div></pre></td></tr></table></figure><p>é€šè¿‡ nvm å®‰è£…çš„ Node ä½äºç”¨æˆ·ç›®å½•ä¸‹ï¼Œè€Œéç³»ç»Ÿç›®å½•ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">which node</div><div class="line">/Users/wangqian/.nvm/versions/node/v10<span class="number">.15</span><span class="number">.3</span>/bin/node</div></pre></td></tr></table></figure><p>é»˜è®¤ä½¿ç”¨æŸä¸ª Node ç‰ˆæœ¬æ¥ç¼–è¯‘ä»£ç ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ª default åˆ«åã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">nvm alias <span class="keyword">default</span> node</div><div class="line"><span class="keyword">default</span> -&gt; node (-&gt; v10<span class="number">.15</span><span class="number">.3</span>)</div></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œè¾“å…¥ node -vï¼Œä»¥ååœ¨ç»ˆç«¯çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„é»˜è®¤ç‰ˆæœ¬éƒ½ä¼šæ˜¯ä½ è®¾ç½®çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">node -v</div><div class="line">v10<span class="number">.15</span><span class="number">.3</span></div></pre></td></tr></table></figure><p>å¦‚ä½•ä½¿ç”¨ nvm åˆ‡æ¢ Node ç‰ˆæœ¬ï¼Ÿé¦–å…ˆå®‰è£… Node 8.x</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nvm install <span class="number">8</span></div></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ° 8.x ç‰ˆæœ¬ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">nvm use <span class="number">8</span></div><div class="line">Now using node v8<span class="number">.16</span><span class="number">.0</span> (npm v6<span class="number">.4</span><span class="number">.1</span>)</div><div class="line">node -v</div><div class="line">v8<span class="number">.16</span><span class="number">.0</span></div></pre></td></tr></table></figure><p>å¦‚ä½•çŸ¥é“æœ¬æœºé€šè¿‡ nvm å®‰è£…äº†å“ªäº› Node ç‰ˆæœ¬å‘¢ï¼Ÿ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">nvm ls</div><div class="line">-&gt;      v8<span class="number">.16</span><span class="number">.0</span></div><div class="line">       v10<span class="number">.15</span><span class="number">.3</span></div><div class="line"><span class="keyword">default</span> -&gt; node (-&gt; v10<span class="number">.15</span><span class="number">.3</span>)</div><div class="line">node -&gt; stable (-&gt; v10<span class="number">.15</span><span class="number">.3</span>) (<span class="keyword">default</span>)</div><div class="line">stable -&gt; <span class="number">10.15</span> (-&gt; v10<span class="number">.15</span><span class="number">.3</span>) (<span class="keyword">default</span>)</div><div class="line">iojs -&gt; N/A (<span class="keyword">default</span>)</div><div class="line">lts<span class="comment">/* -&gt; lts/dubnium (-&gt; N/A)</span></div><div class="line"><span class="comment">lts/argon -&gt; v4.9.1 (-&gt; N/A)</span></div><div class="line"><span class="comment">lts/boron -&gt; v6.17.1 (-&gt; N/A)</span></div><div class="line"><span class="comment">lts/carbon -&gt; v8.16.0</span></div><div class="line"><span class="comment">lts/dubnium -&gt; v10.16.0 (-&gt; N/A)</span></div></pre></td></tr></table></figure><p>è‹¥è¦ç»å¸¸åˆ‡æ¢ Node ç‰ˆæœ¬ï¼Œæœ€ç—›è‹¦çš„è«è¿‡äºå…¨å±€æ¨¡å—éœ€è¦é‡æ–°å®‰è£…ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œnvm æä¾›äº†ä¸€ä¸ªå¾ˆè´´å¿ƒçš„ä¸€é”®å®‰è£…å…¨å±€æ¨¡å—çš„ nvm reinstall-packageså‘½ä»¤ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nvm reinstall-packages <span class="number">6</span></div></pre></td></tr></table></figure><p>nvm é»˜è®¤è¿œç«¯ä¸‹è½½åœ°å€æ˜¯ <a href="https://nodejs.org/distï¼Œå¦‚æœæƒ³å®‰è£…è‡ªå®šä¹‰çš„" target="_blank" rel="external">https://nodejs.org/distï¼Œå¦‚æœæƒ³å®‰è£…è‡ªå®šä¹‰çš„</a> Node ç‰ˆæœ¬ï¼Œå¯ä»¥æŒ‡å®š nvm çš„è¿œç«¯ä¸‹è½½åœ°å€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NVM_NODEJS_ORG_MIRROR=https:<span class="comment">//nodejs.org/download/chakracore-nightly</span></div></pre></td></tr></table></figure><p>å¯¹äºä¸€äº›æ­£åœ¨æµ‹è¯•çš„å°é²œç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ä¸‹é¢çš„åœ°å€ä¸‹è½½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NVM_NODEJS_ORG_MIRROR=https:<span class="comment">//nodejs.org/download/test</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;æˆªæ­¢ä»Šå¤©ï¼Œåƒè°·æ­Œã€äºšé©¬é€Šç­‰å…¨çƒ Top 10 äº’è”ç½‘å¤§å…¬å¸ï¼Œéƒ½æ—©å·²å…¥å‘ Nodeâ€¦&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Node" scheme="http://yoursite.com/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>JS-thisã€callã€apply</title>
    <link href="http://yoursite.com/2019/06/13/JS-this%E3%80%81call%E3%80%81apply/"/>
    <id>http://yoursite.com/2019/06/13/JS-thisã€callã€apply/</id>
    <published>2019-06-13T05:00:52.000Z</published>
    <updated>2019-06-16T09:51:28.472Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>åœ¨ Javascript ç¼–ç¨‹ä¸­ï¼Œthisã€Function.prototype.callã€Function.prototype.apply æœ‰ç€å¹¿æ³›çš„è¿ç”¨ï¼Œç†è§£å®ƒä»¬çš„ç”¨æ³•è‡³å…³é‡è¦ã€‚</p></blockquote><a id="more"></a><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>Javascript ä¸­çš„ this æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå…·ä½“æŒ‡å‘å“ªä¸ªå¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒåŠ¨æ€ç»‘å®šçš„ã€‚</p><h4 id="this-çš„æŒ‡å‘"><a href="#this-çš„æŒ‡å‘" class="headerlink" title="this çš„æŒ‡å‘"></a>this çš„æŒ‡å‘</h4><p>åœ¨å…·ä½“å®é™…åº”ç”¨ä¸­ï¼Œthis çš„æŒ‡å‘é€šå¸¸å¯åˆ†ä¸ºä»¥ä¸‹4ç§:</p><ul><li><p>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨</p></li><li><p>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨</p></li><li><p>ä½œä¸ºæ„é€ å™¨è°ƒç”¨</p></li><li><p>Function.prototype.callã€Function.prototype.apply</p></li></ul><h5 id="ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨"><a href="#ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨" class="headerlink" title="ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨"></a>ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨</h5><p>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘è¯¥å¯¹è±¡ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  a: <span class="number">1</span>,</div><div class="line">  getA: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">obj.getA()</div><div class="line"></div><div class="line"><span class="comment">// 1</span></div></pre></td></tr></table></figure><h5 id="ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨"><a href="#ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨" class="headerlink" title="ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨"></a>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨</h5><p>å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œæ­¤æ—¶çš„ this æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œè¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯ window å¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">1</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a)</div><div class="line">&#125;</div><div class="line"></div><div class="line">getName()</div><div class="line"><span class="comment">// 1</span></div></pre></td></tr></table></figure><h5 id="ä½œä¸ºæ„é€ å™¨è°ƒç”¨"><a href="#ä½œä¸ºæ„é€ å™¨è°ƒç”¨" class="headerlink" title="ä½œä¸ºæ„é€ å™¨è°ƒç”¨"></a>ä½œä¸ºæ„é€ å™¨è°ƒç”¨</h5><p>å½“ç”¨ new è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ„é€ å™¨é‡Œçš„ this å°±æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = <span class="string">'sven'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass()</div><div class="line"><span class="built_in">console</span>.log(obj.name)</div><div class="line"><span class="comment">// 'sven'</span></div></pre></td></tr></table></figure><p>å¦‚æœæ„é€ å™¨æ˜¾å¼åœ°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ¬¡è¿ç®—ç»“æœæœ€ç»ˆä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰æœŸå¾…çš„ thisã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = <span class="string">'sven'</span></div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    name: <span class="string">'wang'</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> MyClass()</div><div class="line"><span class="built_in">console</span>.log(obj.name)</div><div class="line"><span class="comment">// wang</span></div></pre></td></tr></table></figure><p>å¦‚æœæ„é€ å™¨ä¸æ˜¾å¼åœ°è¿”å›ä»»ä½•æ•°æ®ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªéå¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œå°±ä¸ä¼šé€ æˆä¸Šè¿°é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> MyClass = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = <span class="string">'sven'</span></div><div class="line">  <span class="keyword">return</span> <span class="string">'wang'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = n</div><div class="line"><span class="built_in">console</span>.log(obj.name)</div><div class="line"><span class="comment">// 'sven'</span></div></pre></td></tr></table></figure><h5 id="Function-prototype-callã€Function-prototype-apply"><a href="#Function-prototype-callã€Function-prototype-apply" class="headerlink" title="Function.prototype.callã€Function.prototype.apply"></a>Function.prototype.callã€Function.prototype.apply</h5><p>ç”¨ Function.prototype.callã€Function.prototype.apply å¯ä»¥åŠ¨æ€æ”¹å˜ä¼ å…¥å‡½æ•°çš„ thisã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">  name: <span class="string">'wang'</span>,</div><div class="line">  getName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">  name: <span class="string">'zhang'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">obj1.getName()</div><div class="line">obj1.getName.call(obj2)</div><div class="line"></div><div class="line"><span class="comment">// 'wang'</span></div><div class="line"><span class="comment">// 'zhang'</span></div></pre></td></tr></table></figure><hr><h4 id="ä¸¢å¤±çš„-this"><a href="#ä¸¢å¤±çš„-this" class="headerlink" title="ä¸¢å¤±çš„ this"></a>ä¸¢å¤±çš„ this</h4><p>ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  name: <span class="string">'wang'</span>,</div><div class="line">  getName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">obj.getName()</div><div class="line">getName = obj.getName</div><div class="line">getName()</div><div class="line"></div><div class="line"><span class="comment">// 'wang'</span></div><div class="line"><span class="comment">// undefined</span></div></pre></td></tr></table></figure><p>å½“è°ƒç”¨ obj.getName æ—¶ï¼Œæ­¤æ—¶ this æŒ‡å‘ obj å¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡º â€˜wangâ€™ã€‚</p><p>å½“ç”¨å¦å¤–ä¸€ä¸ªå˜é‡ getName æ¥å¼•ç”¨ obj.getNameï¼Œå¹¶ä¸”è°ƒç”¨æ—¶ï¼Œå®ƒæ˜¯è¢«å½“ä½œæ™®é€šå‡½æ•°æ¥è°ƒç”¨ï¼Œæ­¤æ—¶ this æŒ‡å‘ window å¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡º undefinedã€‚</p><hr><h4 id="call-å’Œ-apply"><a href="#call-å’Œ-apply" class="headerlink" title="call å’Œ apply"></a>call å’Œ apply</h4><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å‡½æ•°å¼é£æ ¼çš„ä»£ç ç¼–å†™ä¸­ï¼Œcall å’Œ apply æ–¹æ³•å°¤ä¸ºé‡è¦ã€‚</p><h5 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h5><p>call å’Œ apply ä½œç”¨ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºä¼ å…¥å‚æ•°å½¢å¼çš„ä¸åŒã€‚</p><p>apply æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†…çš„ this å¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ã€‚</p><p>call ä¼ å…¥çš„å‚æ•°æ•°é‡ä¸å›ºå®šï¼Œè·Ÿ apply ä¸åŒçš„æ˜¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä»£è¡¨å‡½æ•°ä½“å†… this å¯¹è±¡çš„æŒ‡å‘ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œæ¯ä¸ªå‚æ•°ä¾æ­¤ä¼ å…¥å‡½æ•°ã€‚</p><p>å½“ä½¿ç”¨ call æˆ–è€… apply æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œåˆ™å‡½æ•°ä½“å†…çš„ this ä¼šæŒ‡å‘é»˜è®¤çš„å®¿ä¸»å¯¹è±¡ã€‚</p><p>ä½†å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°ä½“å†…çš„ this è¿˜æ˜¯ä¸º nullã€‚</p><h5 id="call-å’Œ-apply-çš„ç”¨é€”"><a href="#call-å’Œ-apply-çš„ç”¨é€”" class="headerlink" title="call å’Œ apply çš„ç”¨é€”"></a>call å’Œ apply çš„ç”¨é€”</h5><p>ä¸‹é¢å°†è¯¦ç»†ä»‹ç» call å’Œ apply åœ¨å®é™…å¼€å‘ä¸­çš„ç”¨é€”ã€‚</p><h6 id="æ”¹å˜-this-æŒ‡å‘"><a href="#æ”¹å˜-this-æŒ‡å‘" class="headerlink" title="æ”¹å˜ this æŒ‡å‘"></a>æ”¹å˜ this æŒ‡å‘</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1 = &#123;</div><div class="line">  name: <span class="string">'wang'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj2 = &#123;</div><div class="line">  name: <span class="string">'zhang'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> name = <span class="string">'qian'</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;</div><div class="line"></div><div class="line">getName () <span class="comment">// 'qian'</span></div><div class="line">getName.call(obj1)  <span class="comment">// 'wang'</span></div><div class="line">getName.call(obj2) <span class="comment">// 'zhang'</span></div></pre></td></tr></table></figure><h6 id="Function-prototype-bind"><a href="#Function-prototype-bind" class="headerlink" title="Function.prototype.bind"></a>Function.prototype.bind</h6><p>å¤§éƒ¨åˆ†é«˜çº§æµè§ˆå™¨éƒ½å®ç°äº†å†…ç½®çš„ Function.prototype.bindï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚å³ä½¿æ²¡æœ‰åŸç”Ÿçš„ Function.prototype.bind ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ¥æ¨¡æ‹Ÿï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> self = <span class="keyword">this</span> <span class="comment">// ä¿å­˜åŸå‡½æ•°</span></div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>)</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</span></div><div class="line">    <span class="keyword">return</span> self.apply(context, <span class="built_in">arguments</span>) <span class="comment">// æ‰§è¡Œæ–°çš„å‡½æ•°æ—¶ï¼Œä¼šæŠŠä¹‹å‰ä¼ å…¥çš„ context å½“ä½œæ–°å‡½æ•°ä½“å†…çš„ this</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  name: <span class="string">'seven'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">&#125;.bind(obj)</div><div class="line"></div><div class="line">func()</div></pre></td></tr></table></figure><p>ä¸Šè¿°ä¸ºä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Function.prototype.bind å®ç°ï¼Œé€šå¸¸æˆ‘ä»¬è¿˜ä¼šæŠŠå®ƒå®ç°å¾—ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½¿å¾—å¯ä»¥åœ¨ func å‡½æ•°ä¸­é¢„å…ˆå¡«å…¥ä¸€äº›å‚æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Function</span>.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</div><div class="line">  <span class="keyword">var</span> self = <span class="keyword">this</span>, <span class="comment">// ä¿å­˜åŸå‡½æ•°</span></div><div class="line">      context = [].shift.call(<span class="built_in">arguments</span>), <span class="comment">// éœ€è¦ç»‘å®šçš„ this ä¸Šä¸‹æ–‡</span></div><div class="line">      args = [].slice.call(<span class="built_in">arguments</span>) <span class="comment">// å‰©ä½™çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„</span></div><div class="line">  <span class="built_in">console</span>.log(context)</div><div class="line">  <span class="built_in">console</span>.log(args)</div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// è¿”å›ä¸€ä¸ªæ–°éŸ©æ·‘</span></div><div class="line">    <span class="keyword">return</span> self.apply(context, [].concat(args, [].slice.call(<span class="built_in">arguments</span>))) <span class="comment">// æ‰§è¡Œæ–°çš„å‡½æ•°æ—¶ï¼ŒæŠŠä¹‹å‰ä¼ å…¥çš„ context å½“ä½œæ–°å‡½æ•°ä½“å†…çš„ thisï¼Œå¹¶ä¸”ç»„åˆä¸¤æ¬¡åˆ†åˆ«ä¼ å…¥çš„å‚æ•°ï¼Œä½œä¸ºæ–°å‡½æ•°çš„å‚æ•°</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  name: <span class="string">'seven'</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params">a, b, c, d</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</div><div class="line">  <span class="built_in">console</span>.log([a, b, c, d])</div><div class="line">&#125;.bind(obj, <span class="number">1</span>, <span class="number">2</span>)</div><div class="line">func(<span class="number">3</span>, <span class="number">4</span>)</div></pre></td></tr></table></figure><h6 id="å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•"><a href="#å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•" class="headerlink" title="å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•"></a>å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•</h6><p>å€Ÿç”¨æ–¹æ³•çš„ç¬¬ä¸€ç§åœºæ™¯æ˜¯â€å€Ÿç”¨æ„é€ å‡½æ•°â€œï¼Œé€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œå¯ä»¥å®ç°ä¸€äº›ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> A = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> B = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  A.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">B.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> B(<span class="string">'wang'</span>)</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(b.getName()) <span class="comment">// 'wang'</span></div></pre></td></tr></table></figure><p>é™„ï¼š</p><p>å‡½æ•°çš„å‚æ•°åˆ—è¡¨ arguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚</p><p>å¦‚æœæƒ³åœ¨ arguments ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.push</p><p>å¦‚æœæƒ³æŠŠ arguments è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.slice</p><p>å¦‚æœæƒ³æˆªå– arguments ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.shift</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;åœ¨ Javascript ç¼–ç¨‹ä¸­ï¼Œthisã€Function.prototype.callã€Function.prototype.apply æœ‰ç€å¹¿æ³›çš„è¿ç”¨ï¼Œç†è§£å®ƒä»¬çš„ç”¨æ³•è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹</title>
    <link href="http://yoursite.com/2019/05/16/Vue-%E6%BA%90%E7%A0%81%E7%B3%BB%E5%88%97%E9%9A%8F%E8%AF%BB%E7%AC%94%E8%AE%B0%E4%B9%8BObject%E5%8F%98%E5%8C%96%E4%BE%A6%E6%B5%8B/"/>
    <id>http://yoursite.com/2019/05/16/Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹/</id>
    <published>2019-05-16T10:34:52.000Z</published>
    <updated>2019-08-17T17:08:47.848Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£</p></blockquote><a id="more"></a><h3 id="ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹"><a href="#ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹" class="headerlink" title="ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹"></a>ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹</h3><p>ä»çŠ¶æ€ç”ŸæˆDOMï¼Œå†è¾“å‡ºåˆ°ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ä¸€æ•´å¥—æµç¨‹å«åšæ¸²æŸ“ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ä¼šä¸æ–­åœ°é‡æ–°æ¸²æŸ“ã€‚å“åº”å¼ç³»ç»Ÿèµ‹äºˆæ¡†æ¶é‡æ–°æ¸²æŸ“çš„èƒ½åŠ›ï¼Œå…¶é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å˜åŒ–ä¾¦æµ‹ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå˜åŒ–ä¾¦æµ‹çš„ä½œç”¨å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥è§†å›¾è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚</p><p>Vue.js 2.0 å¼•å…¥äº†è™šæ‹Ÿ DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ– (ç»„ä»¶å®ä¾‹) ï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ã€‚</p><hr><h3 id="å¦‚ä½•è¿½è¸ªå˜åŒ–"><a href="#å¦‚ä½•è¿½è¸ªå˜åŒ–" class="headerlink" title="å¦‚ä½•è¿½è¸ªå˜åŒ–"></a>å¦‚ä½•è¿½è¸ªå˜åŒ–</h3><p>é¦–å…ˆï¼Œåœ¨ JS ä¸­ï¼Œé€šè¿‡ Object.defineProperty ä¾¦æµ‹å¯¹è±¡å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å“åº”å¼æœ€æ ¹æœ¬çš„ä¾èµ–ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">  <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">     enumerable: <span class="literal">true</span>,</div><div class="line">     configurable: <span class="literal">true</span>,</div><div class="line">     get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> val</div><div class="line">     &#125;,</div><div class="line">     set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (val === newVal) &#123;</div><div class="line">           <span class="keyword">return</span> </div><div class="line">        &#125;</div><div class="line">        val = newVal</div><div class="line">     &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ­¤å¤„ç”¨ defineReactive å¯¹ Object.defineProperty è¿›è¡Œå°è£…ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å¯¹è±¡è¿›è¡Œå˜åŒ–è¿½è¸ªã€‚å°è£…å¥½ä¹‹åï¼Œæ¯å½“ä» data çš„ key ä¸­è¯»å–æ•°æ®æ—¶ï¼Œgetter å‡½æ•°è¢«è§¦å‘ï¼›æ¯å½“åœ¨ data çš„ key ä¸­è®¾ç½®æ–°æ•°æ®æ—¶ï¼Œ setter å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚</p><p>ç”±æ­¤å¯è§ï¼ŒObject.defineProperty æ˜¯å¯¹å·²æœ‰å±æ€§è¿›è¡Œçš„åŠ«æŒæ“ä½œï¼Œæ‰€ä»¥ Vue æ‰è¦æ±‚äº‹å…ˆå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨ data ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•å“åº”å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚è¢«åŠ«æŒçš„å±æ€§ä¼šæœ‰ç›¸åº”çš„ getã€set æ–¹æ³•ã€‚</p><hr><h3 id="å¦‚ä½•æ”¶é›†ä¾èµ–"><a href="#å¦‚ä½•æ”¶é›†ä¾èµ–" class="headerlink" title="å¦‚ä½•æ”¶é›†ä¾èµ–"></a>å¦‚ä½•æ”¶é›†ä¾èµ–</h3><p>æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> globalObj = &#123;</div><div class="line">  text1: <span class="string">'text1'</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">let</span> o1 = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  template:</div><div class="line">    <span class="string">`&lt;div&gt;</span></div><div class="line"><span class="string">       &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; </span></div><div class="line"><span class="string">    &lt;div&gt;`</span>,</div><div class="line">  data: globalObj</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">let</span> o2 = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  template:</div><div class="line">     <span class="string">`&lt;div&gt;</span></div><div class="line"><span class="string">        &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; </span></div><div class="line"><span class="string">     &lt;div&gt;`</span>,</div><div class="line">  data: globalObj</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>è¯¥æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªvmå®ä¾‹ä½¿ç”¨äº†text1ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å‘ä½¿ç”¨äº†å®ƒçš„åœ°æ–¹å‘é€é€šçŸ¥æ¥æ›´æ–°è§†å›¾ï¼Ÿ</p><p>å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼Œå³æŠŠç”¨åˆ°äº†æ•°æ® text1 çš„åœ°æ–¹æ”¶é›†èµ·æ¥ï¼Œç„¶åå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠä¹‹å‰æ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘æ›´æ–°ä¸€éã€‚</p><p>å³ï¼šåœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–ã€‚</p><hr><h3 id="ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰"><a href="#ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰" class="headerlink" title="ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰"></a>ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰</h3><p> æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ã€‚æˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œç”¨å®ƒæ¥ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€é€šçŸ¥ç­‰ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</div><div class="line">  </div><div class="line">  <span class="keyword">constructor</span> () &#123;</div><div class="line">    <span class="keyword">this</span>.subs = [] <span class="comment">// è§‚å¯Ÿè€…é›†åˆ</span></div><div class="line">  &#125;</div><div class="line"> <span class="comment">// æ·»åŠ è§‚å¯Ÿè€…</span></div><div class="line">  addSub (sub) &#123;</div><div class="line">    <span class="keyword">this</span>.subs.push(sub)</div><div class="line">  &#125;</div><div class="line"> <span class="comment">// ç§»é™¤è§‚å¯Ÿè€…</span></div><div class="line">  removeSub (sub) &#123;</div><div class="line">    remove(<span class="keyword">this</span>.subs, sub)</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  depend () &#123; <span class="comment">// å¦‚æœå­˜åœ¨ Dep.targetï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†æ“ä½œ</span></div><div class="line">    <span class="keyword">if</span> (Dep.target) &#123;</div><div class="line">      <span class="keyword">this</span>.addSub(Dep.target)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  notify () &#123;</div><div class="line">    <span class="keyword">const</span> subs = <span class="keyword">this</span>.subs.slice() <span class="comment">// é¿å…æ±¡æŸ“åŸæ¥çš„é›†åˆ</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = subs.length; i &lt; l; i++) &#123;</div><div class="line">      subs[i].update() <span class="comment">// æ›´æ–°</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">remove</span>(<span class="params">arr, item</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (arr.length) &#123;</div><div class="line">    <span class="keyword">const</span> index = arr.indexOf(item)</div><div class="line">    <span class="keyword">if</span> (index &gt; <span class="number">-1</span>) &#123;</div><div class="line">      <span class="keyword">return</span> arr.splice(index, <span class="number">1</span>)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æ”¹é€  defineReactive</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">  <span class="keyword">let</span> dep = <span class="keyword">new</span> Dep()</div><div class="line">  <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">     enumerable: <span class="literal">true</span>,</div><div class="line">     configurable: <span class="literal">true</span>,</div><div class="line">     get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        dep.depend()</div><div class="line">           <span class="keyword">return</span> val</div><div class="line">     &#125;,</div><div class="line">     set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (val === newVal) &#123;</div><div class="line">           <span class="keyword">return</span> </div><div class="line">        &#125;</div><div class="line">        val = newVal</div><div class="line">        dep.notify()</div><div class="line">     &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="ä»€ä¹ˆæ˜¯ä¾èµ–"><a href="#ä»€ä¹ˆæ˜¯ä¾èµ–" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¾èµ–"></a>ä»€ä¹ˆæ˜¯ä¾èµ–</h3><p>å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬è¦é€šçŸ¥ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç”¨åˆ°æ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ã€ä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·å†™çš„å‡½æ•°ç­‰ç­‰ï¼Œè¿™æ—¶éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›æƒ…å†µçš„ç±»ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥å•Šï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åï¼Œå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚</p><p>æ”¶é›†è°ï¼ŸWatcher!</p><hr><h3 id="ä»€ä¹ˆæ˜¯-Watcher"><a href="#ä»€ä¹ˆæ˜¯-Watcher" class="headerlink" title="ä»€ä¹ˆæ˜¯ Watcher"></a>ä»€ä¹ˆæ˜¯ Watcher</h3><p>Watcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®ƒï¼Œå®ƒå†é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vm.$watch(<span class="string">'a.b.c'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">newVal, oldVal</span>) </span>&#123;</div><div class="line">  <span class="comment">// do something</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å‡½æ•°ã€‚</p><p>æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c å±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ã€‚ç„¶åï¼Œå½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥ watcherã€‚æ¥ç€ï¼Œwatcher åœ¨æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Watcher</span> </span>&#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  <span class="keyword">constructor</span> (</div><div class="line">    vm: Component, // ç»„ä»¶å®ä¾‹</div><div class="line">    expOrFn: string | Function, // è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œæˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦èƒ½è§¦å‘å–å€¼æ“ä½œ</div><div class="line">    cb: Function // è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ</div><div class="line">  ) &#123;</div><div class="line">    <span class="keyword">this</span>.vm = vm <span class="comment">// Watcheræœ‰ä¸€ä¸ª vm å±æ€§ï¼Œè¡¨æ˜å®ƒæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„</span></div><div class="line">    <span class="keyword">this</span>.cb = cb <span class="comment">// å›è°ƒ</span></div><div class="line">    <span class="keyword">this</span>.getter = parsePath(expOrFn)</div><div class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.get()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  get () &#123; <span class="comment">// è§¦å‘å–å€¼æ“ä½œï¼Œè¿›è€Œè§¦å‘å±æ€§çš„getter</span></div><div class="line">    Dep.target = <span class="keyword">this</span></div><div class="line">    <span class="keyword">let</span> value = <span class="keyword">this</span>.getter.call(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.vm)</div><div class="line">    Dep.target = <span class="literal">null</span></div><div class="line">    <span class="keyword">return</span> value</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  update () &#123; <span class="comment">// æ›´æ–°</span></div><div class="line">    <span class="keyword">const</span> oldValue = <span class="keyword">this</span>.value</div><div class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.get()</div><div class="line">    <span class="keyword">this</span>.cb.call(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.value, oldValue)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å¯ä»¥å°†è‡ªå·±ä¸»åŠ¨æ·»åŠ åˆ° data.a.b.c çš„ Dep ä¸­ã€‚</p><p>åœ¨ get æ–¹æ³•ä¸­å…ˆæŠŠ Dep.target è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰ watcher å®ä¾‹ï¼Œç„¶åå†è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ï¼Œè¿™å°±ä¼šè§¦å‘ getterï¼Œè§¦å‘äº† getterï¼Œå°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„é€»è¾‘ã€‚</p><p>åªè¦ç°åœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åå†è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨æ·»åŠ åˆ° keypath çš„ Dep ä¸­ã€‚</p><p>ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­åï¼Œæ¯å½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè®©ä¾èµ–åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ã€‚</p><p>ä¸ç®¡ç”¨æˆ·æ‰§è¡Œçš„æ˜¯ vm.$watch(â€˜a.b.câ€™, (value, oldValue) =&gt; {})ï¼Œè¿˜æ˜¯æ¨¡æ¿ä¸­çš„ dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å˜åŒ–ã€‚</p><p>parsePathå‡½æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> bailRE = <span class="regexp">/[^\w.$]/</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">parsePath</span>(<span class="params">path</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (bailRE.test(path)) &#123;</div><div class="line">      <span class="keyword">return</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">const</span> segments = path.split(<span class="string">'.'</span>)</div><div class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; segments.length; i++) &#123;</div><div class="line">      <span class="keyword">if</span> (!obj) <span class="keyword">return</span></div><div class="line">      obj = obj[segments[i]]</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> obj</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="é€’å½’ä¾¦æµ‹æ‰€æœ‰Key"><a href="#é€’å½’ä¾¦æµ‹æ‰€æœ‰Key" class="headerlink" title="é€’å½’ä¾¦æµ‹æ‰€æœ‰Key"></a>é€’å½’ä¾¦æµ‹æ‰€æœ‰Key</h3><p>å‰é¢çš„å®ä¾‹ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ•°æ®ä¸­çš„æ‰€æœ‰å±æ€§éƒ½ä¾¦æµ‹åˆ°ï¼Œæ‰€ä»¥è¦å°è£…ä¸€ä¸ªObserverç±»ã€‚Observerçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®å†…çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬å­å±æ€§ï¼‰éƒ½è½¬æ¢æˆ getter/setter çš„å½¢å¼ï¼Œç„¶åå»è¿½è¸ªå®ƒä»¬çš„å˜åŒ–ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</div><div class="line">    <span class="keyword">constructor</span> (value) &#123;</div><div class="line">        <span class="keyword">this</span>.value = value</div><div class="line">        <span class="keyword">if</span> (!<span class="built_in">Array</span>.isArray(value)) &#123;</div><div class="line">            <span class="keyword">this</span>.walk(value)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    walk (obj) &#123;</div><div class="line">        <span class="keyword">const</span> keys = <span class="built_in">Object</span>.keys(obj)</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; keys.length; i++) &#123;</div><div class="line">            defineReactive (obj, keys[i], obj[keys[i]])</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">data, key, val</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> val === <span class="string">'object'</span>) &#123;</div><div class="line">      <span class="keyword">new</span> Observer(val)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">let</span> dep = <span class="keyword">new</span> Dep()</div><div class="line">    <span class="built_in">Object</span>.defineProperty(data, key, &#123;</div><div class="line">       enumerable: <span class="literal">true</span>,</div><div class="line">       configurable: <span class="literal">true</span>,</div><div class="line">       get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">          dep.depend()</div><div class="line">             <span class="keyword">return</span> val</div><div class="line">       &#125;,</div><div class="line">       set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</div><div class="line">          <span class="keyword">if</span> (val === newVal) &#123;</div><div class="line">             <span class="keyword">return</span> </div><div class="line">          &#125;</div><div class="line">          val = newVal</div><div class="line">          dep.notify()</div><div class="line">       &#125;</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Observer ç±»ï¼Œç”¨äºå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢æˆè¢«ä¾¦æµ‹çš„ objectã€‚</p><p>åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼Œåªæœ‰ Object ç±»å‹çš„æ•°æ®æ‰ä¼šè°ƒç”¨ walk å°†æ¯ä¸€ä¸ªå±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚</p><p>æœ€åï¼Œåœ¨ defineReactive ä¸­æ–°å¢ new Observer(val) æ¥é€’å½’å­å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ data ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚</p><p>å½“ data ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å±æ€§å¯¹åº”çš„ä¾èµ–å°±ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚</p><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å˜åŒ–ä¾¦æµ‹å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦èƒ½ä¾¦æµ‹åˆ°å¹¶å‘å‡ºé€šçŸ¥ã€‚</p><p>Object å¯ä»¥é€šè¿‡ Object.defineProperty å°†å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œè¯»å–æ•°æ®æ—¶ä¼šè§¦å‘ getterï¼Œä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ setterã€‚</p><p>æˆ‘ä»¬éœ€è¦åœ¨ getter ä¸­æ”¶é›†æœ‰å“ªäº›ä¾èµ–ä½¿ç”¨äº†æ•°æ®ã€‚å½“ setter è¢«è§¦å‘æ—¶ï¼Œå»é€šçŸ¥ getter ä¸­æ”¶é›†çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚</p><p>æ”¶é›†ä¾èµ–éœ€è¦ä¸ºä¾èµ–æ‰¾ä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼Œä¸ºæ­¤åˆ›å»ºäº† Depï¼Œå®ƒç”¨æ¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯ç­‰ã€‚</p><p>æ‰€è°“çš„ä¾èµ–ï¼Œå…¶å®å°±æ˜¯ Watcherã€‚æŠŠ Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚</p><p>Watcher çš„åŸç†æ˜¯å…ˆæŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€å”¯ä¸€çš„æŒ‡å®šä½ç½® (Dep.target)ï¼Œç„¶åè¯»å–è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¯»å–äº†è¿™ä¸ªæ•°æ®ï¼Œå› æ­¤ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getter ã€‚æ¥ç€ï¼Œåœ¨ getter ä¸­å°±ä¼šä»å…¨å±€å”¯ä¸€çš„ä½ç½®è¯»å–æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­å»ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒWatcher å¯ä»¥ä¸»åŠ¨å»è®¢é˜…ä»»æ„ä¸€ä¸ªæ•°æ®çš„å˜åŒ–ã€‚</p><p>ç”±æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† Observer ç±»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ª object ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å­æ•°æ®ï¼‰éƒ½è½¬æ¢æˆå“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼šä¾¦æµ‹ object ä¸­æ‰€æœ‰æ•°æ®çš„å˜åŒ–ã€‚</p><p>åœ¨ Vue ä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§æˆ–åˆ é™¤å±æ€§éƒ½æ— æ³•è¢«ä¾¦æµ‹åˆ°ã€‚</p><p><img src="https://screenshot.net/zh/qv9nwto" alt=""></p><p>Object é€šè¿‡ Observer è½¬æ¢æˆäº† getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ã€‚</p><p>å½“å¤–ç•Œé€šè¿‡ Watcher è¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ getter ä»è€Œå°† Watcher æ·»åŠ åˆ° Dep ä¸­ã€‚</p><p>å½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ setterï¼Œä»è€Œå‘ Dep ä¸­çš„ä¾èµ–å‘é€é€šçŸ¥ã€‚</p><p>Watcher æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šåƒå¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Vue" scheme="http://yoursite.com/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨</title>
    <link href="http://yoursite.com/2019/03/25/JS-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E9%93%BE%E8%A1%A8/"/>
    <id>http://yoursite.com/2019/03/25/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨/</id>
    <published>2019-03-25T12:57:52.000Z</published>
    <updated>2019-03-25T12:24:33.483Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>ä½¿ç”¨åˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œåº•å±‚å‚¨å­˜æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚ç„¶è€Œï¼Œæ•°ç»„å¹¶ä¸æ€»æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚</p></blockquote><a id="more"></a>               <hr><h3 id="æ•°ç»„çš„ç¼ºç‚¹"><a href="#æ•°ç»„çš„ç¼ºç‚¹" class="headerlink" title="æ•°ç»„çš„ç¼ºç‚¹"></a>æ•°ç»„çš„ç¼ºç‚¹</h3><p>æ•°ç»„ä¸æ€»æ˜¯ç»„ç»‡æ•°æ®çš„æœ€ä½³æ•°æ®ç»“æ„ï¼ŒåŸå› å¦‚ä¸‹ï¼šåœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å½“æ•°ç»„å·²è¢«æ•°æ®å¡«æ»¡æ—¶ï¼Œå†éœ€è¦åŠ å…¥æ–°çš„å…ƒç´ å°±ä¼šéå¸¸å›°éš¾ã€‚</p><p>åœ¨æ•°ç»„ä¸­ï¼Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ ä¹Ÿå¾ˆéº»çƒ¦ï¼Œéœ€è¦å°†æ•°ç»„ä¸­çš„å…¶å®ƒå…ƒç´ å‘å‰æˆ–å‘åç§»åŠ¨ï¼Œä»¥åæ˜ æ•°ç»„åˆšåˆšè¿›è¡Œäº†æ·»åŠ æˆ–åˆ é™¤æ“ä½œã€‚</p><p>å¦‚æœä½ å‘ç°æ•°ç»„åœ¨å®é™…ä½¿ç”¨æ—¶å¾ˆæ…¢ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨é“¾è¡¨æ¥æ›¿ä»£å®ƒã€‚é™¤äº†å¯¹æ•°æ®çš„éšæœºè®¿é—®ï¼Œ</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;ä½¿ç”¨åˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œåº•å±‚å‚¨å­˜æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚ç„¶è€Œï¼Œæ•°ç»„å¹¶ä¸æ€»æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—</title>
    <link href="http://yoursite.com/2019/03/16/JS-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E9%98%9F%E5%88%97/"/>
    <id>http://yoursite.com/2019/03/16/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—/</id>
    <published>2019-03-16T12:57:52.000Z</published>
    <updated>2019-03-23T09:33:40.176Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—åªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºã€‚</p></blockquote><a id="more"></a>               <hr><h3 id="å¯¹é˜Ÿåˆ—çš„æ“ä½œ"><a href="#å¯¹é˜Ÿåˆ—çš„æ“ä½œ" class="headerlink" title="å¯¹é˜Ÿåˆ—çš„æ“ä½œ"></a>å¯¹é˜Ÿåˆ—çš„æ“ä½œ</h3><p>é˜Ÿåˆ—çš„ä¸¤ç§ä¸»è¦æ“ä½œæ˜¯ï¼šå‘é˜Ÿåˆ—ä¸­æ’å…¥æ–°å…ƒç´ å’Œåˆ é™¤é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚æ’å…¥æ“ä½œä¹Ÿå«åšå…¥é˜Ÿï¼Œåˆ é™¤æ“ä½œä¹Ÿå«åšå‡ºé˜Ÿã€‚å…¥é˜Ÿæ“ä½œåœ¨é˜Ÿå°¾æ’å…¥æ–°å…ƒç´ ï¼Œå‡ºé˜Ÿæ“ä½œåˆ é™¤é˜Ÿå¤´çš„å…ƒç´ ã€‚</p><p>é˜Ÿåˆ—çš„å¦ä¸€é¡¹é‡è¦æ“ä½œæ˜¯è¯»å–é˜Ÿå¤´çš„å…ƒç´ ï¼Œè¿™ä¸ªæ“ä½œå« peek() ã€‚è¯¥æ“ä½œè¿”å›é˜Ÿå¤´å…ƒç´ ï¼Œä½†ä¸æŠŠå®ƒä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚é™¤äº†è¯»å–é˜Ÿå¤´å…ƒç´ ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ length å±æ€§æ¥çŸ¥é“é˜Ÿåˆ—ä¸­å­˜å‚¨äº†å¤šå°‘å…ƒç´ ï¼Œç”¨ clear() æ–¹æ³•æ¥æ¸…ç©ºé˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚</p><p><img src="https://www.oreilly.com/library/view/data-structures-and/9781449373931/images/dsaj_0501.png" alt=""></p><hr><h3 id="ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—"><a href="#ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—" class="headerlink" title="ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—"></a>ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—</h3><p>ä½¿ç”¨æ•°ç»„æ¥å®ç°é˜Ÿåˆ—çœ‹èµ·æ¥é¡ºç†æˆç« ã€‚æ•°ç»„çš„ push() æ–¹æ³•å¯ä»¥åœ¨æ•°ç»„æœ«å°¾åŠ å…¥å…ƒç´ ï¼Œshift() æ–¹æ³•åˆ™å¯ä»¥åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</p><p>push() æ–¹æ³•å°†å®ƒçš„å‚æ•°æ’å…¥æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¼€æ”¾çš„ä½ç½®ï¼Œè¯¥ä½ç½®æ€»åœ¨æ•°ç»„çš„æœ«å°¾ï¼Œå³ä½¿æ˜¯ä¸ªç©ºæ•°ç»„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>å‡†å¤‡å¼€å§‹å®ç° Queue ç±»ï¼Œå…ˆä»æ„é€ å‡½æ•°å¼€å§‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore = []</div><div class="line">  <span class="keyword">this</span>.enqueue = enqueue</div><div class="line">  <span class="keyword">this</span>.dequeue = dequeue</div><div class="line">  <span class="keyword">this</span>.front = front</div><div class="line">  <span class="keyword">this</span>.back = back</div><div class="line">  <span class="keyword">this</span>.toString = toString</div><div class="line">  <span class="keyword">this</span>.empty = empty</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>enqueue() æ–¹æ³•å‘é˜Ÿå°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">enqueue</span> (<span class="params">element</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore.push(element)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>dequeue() æ–¹æ³•åˆ é™¤é˜Ÿé¦–çš„å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dequeue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.shift()</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•è¯»å–é˜Ÿé¦–å’Œé˜Ÿå°¾çš„å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">front</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="number">0</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">back</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="keyword">this</span>.dataStore.length <span class="number">-1</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>toString() æ–¹æ³•æ˜¾ç¤ºé˜Ÿåˆ—å†…çš„æ‰€æœ‰å…ƒç´ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> retStr = <span class="string">''</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.dataStore.length; i++) &#123;</div><div class="line">    retStr += <span class="keyword">this</span>.dataStore[i] + <span class="string">' '</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> retStr</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>empty() æ–¹æ³•åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">empty</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.length === <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="ä½¿ç”¨é˜Ÿåˆ—ï¼šæ–¹å—èˆçš„èˆä¼´åˆ†é…é—®é¢˜"><a href="#ä½¿ç”¨é˜Ÿåˆ—ï¼šæ–¹å—èˆçš„èˆä¼´åˆ†é…é—®é¢˜" class="headerlink" title="ä½¿ç”¨é˜Ÿåˆ—ï¼šæ–¹å—èˆçš„èˆä¼´åˆ†é…é—®é¢˜"></a>ä½¿ç”¨é˜Ÿåˆ—ï¼šæ–¹å—èˆçš„èˆä¼´åˆ†é…é—®é¢˜</h3><p>ç”·ç”·å¥³å¥³æ¥åˆ°èˆæ± ï¼Œä»–ä»¬æŒ‰ç…§è‡ªå·±çš„æ€§åˆ«æ’æˆä¸¤é˜Ÿã€‚å½“èˆæ± ä¸­æœ‰åœ°æ–¹ç©ºå‡ºæ¥æ—¶ï¼Œé€‰ä¸¤ä¸ªé˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªäººç»„æˆèˆä¼´ã€‚ä»–ä»¬èº«åçš„äººå„è‡ªå‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå˜æˆæ–°çš„é˜Ÿé¦–ã€‚å½“ä¸€å¯¹èˆä¼´è¿ˆå…¥èˆæ± æ—¶ï¼Œä¸»æŒäººä¼šå¤§å£°å–Šå‡ºä»–ä»¬çš„åå­—ã€‚å½“ä¸€é˜Ÿèˆä¼´èµ°å‡ºèˆæ± ï¼Œä¸”ä¸¤æ’é˜Ÿä¼ä¸­æœ‰ä»»æ„ä¸€é˜Ÿæ²¡äººæ—¶ï¼Œä¸»æŒäººä¹Ÿä¼šæŠŠè¿™ä¸ªæƒ…å†µå‘Šè¯‰å¤§å®¶ã€‚</p><p>ä¸ºäº†æ¨¡æ‹Ÿè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æŠŠè·³æ–¹å—èˆçš„ç”·ç”·å¥³å¥³çš„å§“åå‚¨å­˜åœ¨ dancers å˜é‡ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dancers = <span class="string">'F Allison \n M Frank \n M Mason \n M Clayton \n F Cheryl \n M Raymond \n F Jennifer \n M Bryan \n M David \n M Danny \n F Aurora'</span></div></pre></td></tr></table></figure><p>æ¯ä¸ªèˆè€…çš„ä¿¡æ¯éƒ½è¢«å­˜å‚¨åœ¨ä¸€ä¸ª Dancer å¯¹è±¡ä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dancer</span> (<span class="params">name, sex</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.sex = sex</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œå°†èˆè€…ä¿¡æ¯è¯»åˆ°ç¨‹åºä¸­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDancers</span> (<span class="params">maleDancers, femaleDancers</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> names = dancers.split(<span class="string">'\n'</span>)</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</div><div class="line">    names[i] = names[i].trim()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; names.length; i++) &#123;</div><div class="line">    <span class="keyword">var</span> dancer = names[i].split(<span class="string">' '</span>)</div><div class="line">    <span class="keyword">var</span> sex = dancer[<span class="number">0</span>]</div><div class="line">    <span class="keyword">var</span> name = dancer[<span class="number">1</span>]</div><div class="line">    <span class="keyword">if</span> (sex === <span class="string">'F'</span>) &#123;</div><div class="line">      femaleDancers.enqueue(<span class="keyword">new</span> Dancer(name, sex))</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      maleDancers.enqueue(<span class="keyword">new</span> Dancer(name, sex))</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>èˆè€…çš„å§“åè¢«ä»å˜é‡ dancers ä¸­è¯»å…¥æ•°ç»„ã€‚ç„¶å trim() å‡½æ•°é™¤å»äº†æ¯è¡Œå­—ç¬¦ä¸²çš„ç©ºæ ¼ã€‚ç¬¬äºŒä¸ªå¾ªç¯å°†æ¯è¡Œå­—ç¬¦ä¸²æŒ‰å§“åå’Œæ€§åˆ«åˆ†æˆä¸¤éƒ¨åˆ†å­˜å…¥ä¸€ä¸ªæ•°ç»„ã€‚ç„¶åæ ¹æ®æ€§åˆ«ï¼Œå°†èˆè€…åŠ å…¥ä¸åŒçš„é˜Ÿåˆ—ã€‚</p><p>ä¸‹ä¸€ä¸ªå‡½æ•°å°†ç”·æ€§å’Œå¥³æ€§ç»„æˆèˆä¼´ï¼Œå¹¶ä¸”å®£å¸ƒé…å¯¹ç»“æœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dance</span> (<span class="params">females, males</span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'the dance partners are: '</span>)</div><div class="line">  <span class="keyword">let</span> person</div><div class="line">  <span class="keyword">while</span> (!females.empty() &amp;&amp; !males.empty()) &#123;</div><div class="line">    person = females.dequeue()</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'female dancer is '</span>, person)</div><div class="line">    person = males.dequeue()</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'and male dancer is '</span>, person)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="ä½¿ç”¨é˜Ÿåˆ—å¯¹æ•°æ®è¿›è¡Œæ’åº"><a href="#ä½¿ç”¨é˜Ÿåˆ—å¯¹æ•°æ®è¿›è¡Œæ’åº" class="headerlink" title="ä½¿ç”¨é˜Ÿåˆ—å¯¹æ•°æ®è¿›è¡Œæ’åº"></a>ä½¿ç”¨é˜Ÿåˆ—å¯¹æ•°æ®è¿›è¡Œæ’åº</h3><p>é˜Ÿåˆ—ä¸ä»…ç”¨äºæ‰§è¡Œç°å®ç”Ÿæ´»ä¸­ä¸æ’é˜Ÿæœ‰å…³çš„æ“ä½œï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ’åºã€‚å¯¹äº0 ~99 çš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºåŸºæ•°æ’åºå¯¹æ•°æ®æ‰«æä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡æŒ‰ä¸ªä½ä¸Šçš„æ•°å­—è¿›è¡Œæ’åºï¼Œç¬¬äºŒæ¬¡æŒ‰åä½ä¸Šçš„æ•°å­—è¿›è¡Œæ’åºã€‚æ¯ä¸ªæ•°å­—æ ¹æ®å¯¹åº”ä½ä¸Šçš„æ•°å€¼è¢«åˆ†åœ¨ä¸åŒçš„ç›’å­ä¸Šã€‚å‡è®¾æœ‰ä»¥ä¸‹æ•°å­—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">91, 46, 85, 15, 92, 35, 31, 22</div></pre></td></tr></table></figure><p>ç»è¿‡åŸºæ•°æ’åºç¬¬ä¸€æ¬¡æ‰«æä¹‹åï¼Œæ•°å­—è¢«åˆ†é…åˆ°å¦‚ä¸‹çš„ç›’å­é‡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Bin 0:</div><div class="line">Bin 1: 91, 31</div><div class="line">Bin 2: 92, 22</div><div class="line">Bin 3:</div><div class="line">Bin 4:</div><div class="line">Bin 5: 85, 15, 35</div><div class="line">Bin 6: 46</div><div class="line">Bin 7:</div><div class="line">Bin 8:</div><div class="line">Bin 9:</div></pre></td></tr></table></figure><p>æ ¹æ®ç›’å­çš„é¡ºåºï¼Œç¬¬ä¸€æ¬¡æ’åºçš„ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">91, 31, 92, 22, 85, 15, 35, 46</div></pre></td></tr></table></figure><p>ç„¶åæ ¹æ®åä½ä¸Šçš„æ•°å€¼å†æ¬¡å°†ä¸Šè¿°æ’åºçš„ç»“æœåˆ†é…åˆ°ä¸åŒçš„ç›’å­é‡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Bin 0:</div><div class="line">Bin 1: 15</div><div class="line">Bin 2: 22</div><div class="line">Bin 3: 31, 35</div><div class="line">Bin 4: 46</div><div class="line">Bin 5: </div><div class="line">Bin 6: </div><div class="line">Bin 7: </div><div class="line">Bin 8: 85</div><div class="line">Bin 9: 91, 92</div></pre></td></tr></table></figure><p>æœ€åï¼Œå°†ç›’å­ä¸­çš„æ•°å­—å–å‡ºï¼Œç»„æˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å³ä¸ºæ’å¥½åºçš„æ•°å­—ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">15ï¼Œ 22ï¼Œ 31ï¼Œ 35ï¼Œ 46ï¼Œ 85ï¼Œ 91ï¼Œ 92</div></pre></td></tr></table></figure><p>ä½¿ç”¨é˜Ÿåˆ—ä»£è¡¨ç›’å­ï¼Œå¯ä»¥å®ç°è¿™ä¸ªç®—æ³•ã€‚æˆ‘ä»¬éœ€è¦ä¹ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªå¯¹åº”ä¸€ä¸ªæ•°å­—ï¼Œå°†æ‰€æœ‰é˜Ÿåˆ—ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½¿ç”¨å–ä½™å’Œé™¤æ³•æ“ä½œå†³å®šä¸ªä½å’Œåä½ã€‚ç®—æ³•çš„å‰©ä½™éƒ¨åˆ†å°†æ•°å­—åŠ å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼Œæ ¹æ®ä¸ªä½æ•°å€¼å¯¹å…¶é‡æ–°æ’åºï¼Œç„¶åå†æ ¹æ®åä½ä¸Šçš„æ•°å€¼è¿›è¡Œæ’åºï¼Œç»“æœå³ä¸ºæ’å¥½åºçš„æ•°å­—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore = []</div><div class="line">  <span class="keyword">this</span>.enqueue = enqueue</div><div class="line">  <span class="keyword">this</span>.dequeue = dequeue</div><div class="line">  <span class="keyword">this</span>.front = front</div><div class="line">  <span class="keyword">this</span>.back = back</div><div class="line">  <span class="keyword">this</span>.toString = toString</div><div class="line">  <span class="keyword">this</span>.count = count</div><div class="line">  <span class="keyword">this</span>.empty = empty</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">enqueue</span> (<span class="params">element</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore.push(element)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dequeue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.shift()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">front</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="number">0</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">back</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="keyword">this</span>.dataStore.length <span class="number">-1</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> retStr = <span class="string">''</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.dataStore.length; i++) &#123;</div><div class="line">    retStr += <span class="keyword">this</span>.dataStore[i] + <span class="string">' '</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> retStr</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.length</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">empty</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.length === <span class="number">0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//åŸºæ•°æ’åº</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> queues = []   <span class="comment">//å®šä¹‰é˜Ÿåˆ—æ•°ç»„</span></div><div class="line"><span class="keyword">var</span> nums = []     <span class="comment">//å®šä¹‰æ•°å­—æ•°ç»„</span></div><div class="line"></div><div class="line"><span class="comment">//é€‰åä¸ª0~99çš„éšæœºæ•°è¿›è¡Œæ’åº</span></div><div class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++)&#123;</div><div class="line">    queues[i] = <span class="keyword">new</span> Queue()</div><div class="line">    nums[i] = <span class="built_in">Math</span>.floor( <span class="built_in">Math</span>.random() * <span class="number">101</span> )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//æ’åºä¹‹å‰</span></div><div class="line"><span class="built_in">console</span>.log( <span class="string">'before radix sort: '</span> + nums )</div><div class="line"></div><div class="line"><span class="comment">//åŸºæ•°æ’åº</span></div><div class="line">distribution(nums, queues , <span class="number">10</span> , <span class="number">1</span>)</div><div class="line">collect(queues, nums)</div><div class="line">distribution(nums, queues , <span class="number">10</span> , <span class="number">10</span>)</div><div class="line">collect(queues, nums)</div><div class="line"></div><div class="line"><span class="comment">//æ’åºä¹‹å</span></div><div class="line"><span class="built_in">console</span>.info(<span class="string">'after radix sort: '</span> + nums)</div><div class="line"></div><div class="line"><span class="comment">//æ ¹æ®ç›¸åº”çš„ï¼ˆä¸ªä½å’Œåä½ï¼‰æ•°å€¼ï¼Œå°†æ•°å­—åˆ†é…åˆ°ç›¸åº”é˜Ÿåˆ—</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">distribution</span> (<span class="params">nums, queues, n, digit</span>) </span>&#123;  <span class="comment">//digitè¡¨ç¤ºä¸ªä½æˆ–è€…åä½çš„å€¼</span></div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</div><div class="line">        <span class="keyword">if</span>(digit == <span class="number">1</span>)&#123;</div><div class="line">            queues[nums[i] % <span class="number">10</span>].enqueue(nums[i])</div><div class="line">        &#125;<span class="keyword">else</span>&#123;</div><div class="line">            queues[<span class="built_in">Math</span>.floor(nums[i] / <span class="number">10</span>)].enqueue(nums[i])</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">  <span class="built_in">console</span>.log(queues.toString())</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//ä»é˜Ÿåˆ—ä¸­æ”¶é›†æ•°å­—</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">collect</span> (<span class="params">queues, nums</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> i = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> digit = <span class="number">0</span>; digit &lt; <span class="number">10</span> ; digit++ )&#123;</div><div class="line">        <span class="keyword">while</span> (!queues[digit].empty())&#123;</div><div class="line">            nums[i++] = queues[digit].dequeue()</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¼˜å…ˆé˜Ÿåˆ—</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä»é˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ ï¼Œä¸€å®šæ˜¯æœ€æ–°å…¥é˜Ÿçš„å…ƒç´ ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä½¿ç”¨é˜Ÿåˆ—çš„åº”ç”¨ï¼Œåœ¨åˆ é™¤å…ƒç´ æ—¶ä¸å¿…éµå¾ªå…ˆè¿›å…ˆå‡ºçš„çº¦å®šã€‚è¿™ç§åº”ç”¨ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå«åšä¼˜å…ˆé˜Ÿåˆ—çš„æ•°æ®ç»“æ„æ¥è¿›è¡Œæ¨¡æ‹Ÿã€‚</p><p>ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦è€ƒè™‘ä¼˜å…ˆæƒçš„é™åˆ¶ã€‚</p><p>å…ˆæ¥å®šä¹‰å­˜å‚¨é˜Ÿåˆ—å…ƒç´ çš„å¯¹è±¡ï¼Œç„¶ååœ¨æ„å»ºæˆ‘ä»¬çš„ä¼˜å…ˆé˜Ÿåˆ—ç³»ç»Ÿï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Patient</span> (<span class="params">name, code</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.code = code</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å˜é‡ code æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§ã€‚</p><p>ç°åœ¨éœ€è¦é‡æ–°å®šä¹‰ dequeue() æ–¹æ³•ï¼Œä½¿å…¶åˆ é™¤é˜Ÿåˆ—ä¸­æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚æˆ‘ä»¬è§„å®šï¼Œä¼˜å…ˆç çš„å€¼æœ€å°ï¼Œä»£è¡¨ä¼˜å…ˆçº§æœ€é«˜ã€‚æ–°çš„ dequeue() æ–¹æ³•éå†é˜Ÿåˆ—çš„åº•å±‚å­˜å‚¨æ•°ç»„ï¼Œä»ä¸­æ‰¾å‡ºä¼˜å…ˆç å€¼æœ€å°çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨æ•°ç»„çš„ splice() æ–¹æ³•åˆ é™¤ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚æ–°çš„ dequeue() æ–¹æ³•å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dequeue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> entry = <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="keyword">this</span>.dataStore.length; ++i) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.dataStore[i].code &lt; <span class="keyword">this</span>.dataStore[entry].code) &#123;</div><div class="line">      entry = i</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.splice(entry, <span class="number">1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Queue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore = []</div><div class="line">  <span class="keyword">this</span>.enqueue = enqueue</div><div class="line">  <span class="keyword">this</span>.dequeue = dequeue</div><div class="line">  <span class="keyword">this</span>.front = front</div><div class="line">  <span class="keyword">this</span>.back = back</div><div class="line">  <span class="keyword">this</span>.toString = toString</div><div class="line">  <span class="keyword">this</span>.count = count</div><div class="line">  <span class="keyword">this</span>.empty = empty</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">enqueue</span> (<span class="params">element</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore.push(element)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dequeue</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> entry = <span class="number">0</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; <span class="keyword">this</span>.dataStore.length; ++i) &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.dataStore[i].code &lt; <span class="keyword">this</span>.dataStore[entry].code) &#123;</div><div class="line">      entry = i</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.splice(entry, <span class="number">1</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">front</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="number">0</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">back</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="keyword">this</span>.dataStore.length <span class="number">-1</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">toString</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> retStr = <span class="string">''</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.dataStore.length; i++) &#123;</div><div class="line">    retStr += <span class="keyword">this</span>.dataStore[i].name + <span class="string">' code:'</span> + <span class="keyword">this</span>.dataStore[i].code + <span class="string">' '</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> retStr</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.length</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">empty</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore.length === <span class="number">0</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Patient</span> (<span class="params">name, code</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.name = name</div><div class="line">  <span class="keyword">this</span>.code = code</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Patient(<span class="string">'smith'</span>, <span class="number">5</span>)</div><div class="line"><span class="keyword">var</span> ed = <span class="keyword">new</span> Queue()</div><div class="line">ed.enqueue(p)</div><div class="line">p = <span class="keyword">new</span> Patient(<span class="string">'Jones'</span>, <span class="number">4</span>)</div><div class="line">ed.enqueue(p)</div><div class="line">p = <span class="keyword">new</span> Patient(<span class="string">'Wang'</span>, <span class="number">6</span>)</div><div class="line">ed.enqueue(p)</div><div class="line">p = <span class="keyword">new</span> Patient(<span class="string">'Qian'</span>, <span class="number">1</span>)</div><div class="line">ed.enqueue(p)</div><div class="line">p = <span class="keyword">new</span> Patient(<span class="string">'Brown'</span>, <span class="number">1</span>)</div><div class="line">ed.enqueue(p)</div><div class="line"><span class="keyword">var</span> seen = ed.dequeue()</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Patient being treated: '</span> + seen[<span class="number">0</span>].name)</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Patients watting to be seen:'</span>)</div><div class="line"><span class="built_in">console</span>.log(ed.toString())</div><div class="line"></div><div class="line">seen = ed.dequeue()</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Patient being treated: '</span> + seen[<span class="number">0</span>].name)</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Patients watting to be seen:'</span>)</div><div class="line"><span class="built_in">console</span>.log(ed.toString())</div><div class="line"></div><div class="line">seen = ed.dequeue()</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Patient being treated: '</span> + seen[<span class="number">0</span>].name)</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Patients watting to be seen:'</span>)</div><div class="line"><span class="built_in">console</span>.log(ed.toString())</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—åªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ</title>
    <link href="http://yoursite.com/2019/03/15/JS-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E4%B9%8B%E6%A0%88/"/>
    <id>http://yoursite.com/2019/03/15/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ/</id>
    <published>2019-03-15T12:57:52.000Z</published>
    <updated>2019-03-18T12:55:26.303Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>æ ˆæ˜¯å’Œåˆ—è¡¨ç±»ä¼¼çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥è§£å†³è®¡ç®—æœºä¸–ç•Œé‡Œçš„å¾ˆå¤šé—®é¢˜ã€‚</p></blockquote><a id="more"></a><hr><h3 id="å¯¹æ ˆçš„æ“ä½œ"><a href="#å¯¹æ ˆçš„æ“ä½œ" class="headerlink" title="å¯¹æ ˆçš„æ“ä½œ"></a>å¯¹æ ˆçš„æ“ä½œ</h3><p>æ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„åˆ—è¡¨ï¼Œæ ˆå†…çš„å…ƒç´ åªèƒ½é€šè¿‡åˆ—è¡¨çš„ä¸€ç«¯è®¿é—®ï¼Œè¿™ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶ã€‚æ ˆè¢«ç§°ä¸ºä¸€ç§åå…¥å…ˆå‡º (LIFOï¼Œlast-in-first-out) çš„æ•°æ®ç»“æ„ã€‚</p><p>ç”±äºæ ˆå…·æœ‰åå…¥å…ˆå‡ºçš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ä»»ä½•ä¸åœ¨æ ˆé¡¶çš„å…ƒç´ éƒ½æ— æ³•è®¿é—®ã€‚ä¸ºäº†å¾—åˆ°æ ˆåº•çš„å…ƒç´ ï¼Œå¿…é¡»å…ˆæ‹¿æ‰ä¸Šé¢çš„å…ƒç´ ã€‚</p><p>å¯¹æ ˆçš„ä¸¤ç§ä¸»è¦æ“ä½œæ˜¯å°†ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆå’Œå°†ä¸€ä¸ªå…ƒç´ å¼¹å‡ºæ ˆã€‚å…¥æ ˆä½¿ç”¨ push() æ–¹æ³•ï¼Œå‡ºæ ˆä½¿ç”¨ pop() æ–¹æ³•ã€‚</p><p>å¦ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œå°±æ˜¯é¢„è§ˆæ ˆé¡¶çš„å…ƒç´ ã€‚ pop() æ–¹æ³•è™½ç„¶å¯ä»¥è®¿é—®åˆ°æ ˆé¡¶çš„å…ƒç´ ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¹Ÿå°†æ ˆé¡¶å…ƒç´ æ°¸ä¹…æ€§åœ°åˆ é™¤äº†ã€‚peek() æ–¹æ³•åˆ™åªè¿”å›æ ˆé¡¶å…ƒç´ ï¼Œè€Œä¸åˆ é™¤å®ƒã€‚</p><p><img src="https://www.oreilly.com/library/view/data-structures-and/9781449373931/images/dsaj_0401.png" alt=""></p><p>ä¸ºäº†è®°å½•æ ˆé¡¶çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†å“ªé‡Œå¯ä»¥åŠ å…¥æ–°å…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡ top ã€‚å½“å‘æ ˆå†…å‹å…¥å…ƒç´ æ—¶ï¼Œè¯¥å˜é‡å¢å¤§ã€‚å½“ä»æ ˆå†…å¼¹å‡ºå…ƒç´ æ—¶ï¼Œè¯¥å˜é‡å‡å°ã€‚</p><p>push()ã€pop()ã€peek() æ˜¯æ ˆçš„3ä¸ªä¸»è¦æ–¹æ³•ï¼Œä½†æ˜¯æ ˆè¿˜æœ‰å…¶å®ƒæ–¹æ³•å’Œå±æ€§ã€‚clear() æ¸…é™¤æ ˆå†…æ‰€æœ‰å…ƒç´ ï¼Œlength å±æ€§è®°å½•æ ˆå†…å…ƒç´ çš„ä¸ªæ•°ï¼Œempty å±æ€§ï¼Œç”¨ä»¥è¡¨ç¤ºæ ˆå†…æ˜¯å¦æœ‰å…ƒç´ ã€‚</p><hr><h3 id="æ ˆçš„å®ç°"><a href="#æ ˆçš„å®ç°" class="headerlink" title="æ ˆçš„å®ç°"></a>æ ˆçš„å®ç°</h3><p>å®ç°ä¸€ä¸ªæ ˆï¼Œé¦–å…ˆæ˜¯è¦å†³å®šå­˜å‚¨æ•°æ®çš„åº•å±‚æ•°æ®ç»“æ„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€‰ç”¨æ•°ç»„ã€‚</p><p>æˆ‘ä»¬ä»å®ç°ä»¥å®šä¹‰ Stack ç±»çš„æ„é€ å‡½æ•°å¼€å§‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Stack</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore = []</div><div class="line">  <span class="keyword">this</span>.top = <span class="number">0</span></div><div class="line">  <span class="keyword">this</span>.push = push</div><div class="line">  <span class="keyword">this</span>.pop = pop</div><div class="line">  <span class="keyword">this</span>.peek = peek</div><div class="line">  <span class="keyword">this</span>.clear = clear</div><div class="line">  <span class="keyword">this</span>.length = length</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨æ•°ç»„ dataStore æ¥ä¿å­˜æ ˆå†…çš„å…ƒç´ ï¼Œæ„é€ å‡½æ•°å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºæ•°ç»„ã€‚å˜é‡ top è®°å½•æ ˆé¡¶ä½ç½®ï¼Œè¢«æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸º 0 ï¼Œè¡¨ç¤ºæ ˆé¡¶å¯¹åº”æ•°ç»„çš„èµ·å§‹ä½ç½® 0 ã€‚å¦‚æœæœ‰å…ƒç´ è¢«å‹å…¥æ ˆå†…ï¼Œè¯¥å˜é‡çš„å€¼å°†éšä¹‹å˜åŒ–ã€‚</p><p>push() æ–¹æ³• â€“ å½“å‘æ ˆå†…å‹å…¥ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œéœ€è¦å°†å…¶ä¿å­˜åœ¨æ•°ç»„ä¸­å˜é‡ top æ‰€å¯¹åº”çš„ä½ç½®ï¼Œç„¶åå°† top å€¼åŠ  1ï¼Œè®©å…¶æŒ‡å‘æ•°ç»„ä¸­ä¸‹ä¸€ä¸ªç©ºä½å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span> (<span class="params">element</span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.dataStore[<span class="keyword">this</span>.top++] = element</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ³¨æ„ ++ æ“ä½œç¬¦çš„ä½ç½®ï¼Œå®ƒæ”¾åœ¨ this.top çš„åé¢ï¼Œè¿™æ ·æ–°å…¥æ ˆçš„å…ƒç´ å°±ä¼šè¢«æ”¾åœ¨ top çš„å½“å‰å€¼æŒ‡å‘çš„ä½ç½®ï¼Œç„¶åå†å°† top çš„å€¼åŠ  1 ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®ã€‚</p><p>pop() æ–¹æ³• â€“ è¿”å›æ ˆé¡¶å…ƒç´ ï¼ŒåŒæ—¶å°†å˜é‡ top çš„å€¼å‡ 1 ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">pop</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[--<span class="keyword">this</span>.top]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>peek() æ–¹æ³• â€“ è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œå³å°†å˜é‡ top çš„å€¼å‡ 1 ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">peek</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.dataStore[<span class="keyword">this</span>.top - <span class="number">1</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¦‚æœå¯¹ä¸€ä¸ªç©ºæ ˆè°ƒç”¨ peek() æ–¹æ³•ï¼Œç»“æœä¸º undefined ã€‚</p><p>length() æ–¹æ³• â€“ é€šè¿‡è¿”å›å˜é‡ top å€¼å¾—æ–¹å¼æ¥è·å–æ ˆå†…å­˜å‚¨äº†å¤šå°‘å…ƒç´ ã€‚</p><p>clear() â€“ å°†å˜é‡ top çš„å€¼è®¾ä¸º 0 ï¼Œè½»æ¾æ¸…ç©ºä¸€ä¸ªæ ˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">clear</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.top = <span class="number">0</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h3 id="ä½¿ç”¨-Stack-ç±»"><a href="#ä½¿ç”¨-Stack-ç±»" class="headerlink" title="ä½¿ç”¨ Stack ç±»"></a>ä½¿ç”¨ Stack ç±»</h3><p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›é—®é¢˜ç‰¹åˆ«é€‚åˆç”¨æ ˆæ¥è§£å†³ï¼š</p><h4 id="æ•°åˆ¶é—´çš„ç›¸äº’è½¬æ¢"><a href="#æ•°åˆ¶é—´çš„ç›¸äº’è½¬æ¢" class="headerlink" title="æ•°åˆ¶é—´çš„ç›¸äº’è½¬æ¢"></a>æ•°åˆ¶é—´çš„ç›¸äº’è½¬æ¢</h4><p>å¯ä»¥åˆ©ç”¨æ ˆå®ç°ä¸€ä¸ªæ•°å­—ä»ä¸€ç§æ•°åˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§æ•°åˆ¶ã€‚å‡è®¾æƒ³å°†æ•°å­— n è½¬æ¢ä¸ºä»¥ b ä¸ºåŸºæ•°çš„æ•°å­—ï¼Œå®ç°è½¬æ¢çš„ç®—æ³•å¦‚ä¸‹(æ³¨ï¼šæ­¤ç®—æ³•åªé’ˆå¯¹åŸºæ•°ä¸º2â€”9çš„æƒ…å†µ)ï¼š</p><p>(1) æœ€é«˜ä½ä¸º n % bï¼Œå°†æ­¤ä½å‹å…¥æ ˆã€‚<br>(2) ä½¿ç”¨ n / b ä»£æ›¿ n ã€‚<br>(3) é‡å¤æ­¥éª¤ 1 å’Œ 2 ï¼Œç›´åˆ° n ç­‰äº 0 ï¼Œä¸”æ²¡æœ‰ä½™æ•°ã€‚<br>(4) æŒç»­å°†æ ˆå†…å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ°æ ˆä¸ºç©ºï¼Œä¾æ¬¡å°†è¿™äº›å…ƒç´ æ’åˆ—ï¼Œå°±å¾—åˆ°è½¬æ¢åæ•°å­—çš„å­—ç¬¦ä¸²å½¢å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">mulBase</span> (<span class="params">num, base</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> s = <span class="keyword">new</span> Stack()</div><div class="line">  <span class="keyword">do</span> &#123;</div><div class="line">    s.push(num % base)</div><div class="line">    num = <span class="built_in">Math</span>.floor(num /= base)</div><div class="line">  &#125; <span class="keyword">while</span> (num &gt; <span class="number">0</span>)</div><div class="line">  <span class="keyword">var</span> converted = <span class="string">''</span></div><div class="line">  <span class="keyword">while</span> (s.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">    converted += s.pop()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> converted</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="å›æ–‡"><a href="#å›æ–‡" class="headerlink" title="å›æ–‡"></a>å›æ–‡</h4><p>å›æ–‡æ˜¯æŒ‡è¿™æ ·ä¸€ç§ç°è±¡ï¼šä¸€ä¸ªå•è¯ã€çŸ­è¯­æˆ–æ•°å­—ï¼Œä»å‰å¾€åå†™å’Œä»åå¾€å‰å†™éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ï¼šå•è¯ â€˜dadâ€™ , â€˜racecarâ€™ å°±æ˜¯å›æ–‡ã€‚</p><p>ä½¿ç”¨æ ˆï¼Œå¯ä»¥è½»æ¾åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚æˆ‘ä»¬å°†æ‹¿åˆ°çš„å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ä»å·¦åˆ°å³çš„é¡ºåºå‹å…¥æ ˆã€‚å½“å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦éƒ½å…¥æ ˆåï¼Œæ ˆå†…å°±ä¿å­˜äº†ä¸€ä¸ªåè½¬åçš„å­—ç¬¦ä¸²ï¼Œæœ€åçš„å­—ç¬¦åœ¨æ ˆé¡¶ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨æ ˆåº•ã€‚</p><p><img src="https://www.oreilly.com/library/view/data-structures-and/9781449373931/images/dsaj_0402.png" alt=""></p><p>å­—ç¬¦ä¸²å®Œæ•´å‹å…¥æ ˆå†…åï¼Œé€šè¿‡æŒç»­å¼¹å‡ºæ ˆä¸­çš„æ¯ä¸ªå­—æ¯å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åˆšå¥½ä¸åŸæ¥çš„å­—ç¬¦ä¸²é¡ºåºç›¸åã€‚æˆ‘ä»¬åªéœ€æ¯”è¾ƒè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å³å¯ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œå°±æ˜¯ä¸€ä¸ªå›æ–‡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPalindrome</span> (<span class="params">word</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> s = <span class="keyword">new</span> Stack()</div><div class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> word) &#123;</div><div class="line">    s.push(i)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> rWord = <span class="string">''</span></div><div class="line">  <span class="keyword">while</span> (s.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">    rWord += s.pop()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> rWord == word</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="é€’å½’æ¼”ç¤º"><a href="#é€’å½’æ¼”ç¤º" class="headerlink" title="é€’å½’æ¼”ç¤º"></a>é€’å½’æ¼”ç¤º</h4><p>ä¸ºäº†æ¼”ç¤ºå¦‚ä½•ç”¨æ ˆå®ç°é€’å½’ï¼Œè€ƒè™‘ä¸€ä¸‹æ±‚é˜¶ä¹˜å‡½æ•°çš„é€’å½’å®šä¹‰ï¼Œé¦–å…ˆçœ‹çœ‹ 5 çš„é˜¶ä¹˜æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">factorial</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (n === <span class="number">0</span>) &#123;</div><div class="line">    <span class="keyword">return</span> <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ä½¿ç”¨æ ˆæ¨¡æ‹Ÿé€’å½’çš„è¿‡ç¨‹</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fact</span> (<span class="params">n</span>) </span>&#123;</div><div class="line">  <span class="keyword">var</span> s = <span class="keyword">new</span> Stack()</div><div class="line">  <span class="keyword">while</span> (n &gt; <span class="number">1</span>) &#123;</div><div class="line">    s.push(n--)</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> product = <span class="number">1</span></div><div class="line">  <span class="built_in">console</span>.log(s.length())</div><div class="line">  <span class="keyword">while</span> (s.length() &gt; <span class="number">0</span>) &#123;</div><div class="line">    product *= s.pop()</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">return</span> product</div><div class="line">&#125;</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;æ ˆæ˜¯å’Œåˆ—è¡¨ç±»ä¼¼çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥è§£å†³è®¡ç®—æœºä¸–ç•Œé‡Œçš„å¾ˆå¤šé—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²</title>
    <link href="http://yoursite.com/2018/11/27/Node-%E9%98%BF%E9%87%8C%E4%BA%91ECS%E9%83%A8%E7%BD%B2/"/>
    <id>http://yoursite.com/2018/11/27/Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²/</id>
    <published>2018-11-27T04:19:00.000Z</published>
    <updated>2019-06-04T02:56:38.236Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>åŒ11æŠ¢è´­äº†ä¸€å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¶å·¥ä½œä¸å¿™ï¼Œæäº†ä¸€ä¸ªç®€å•çš„nodeé¡¹ç›®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†nodeé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECSï¼Ÿ</p></blockquote><a id="more"></a><p>æ­¤æ•™ç¨‹ä»…ä¾›æ–°æ‰‹å€Ÿé‰´ï¼Œå¤šå°‘æœ‰äº›ç¼ºé™·ï¼Œæœ‰é—®é¢˜è¿˜æœ›å„ä½å¤§ä½¬æŒ‡æ­£ã€‚</p><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><ul><li>ä¸€ä¸ªåŸŸå</li><li>é˜¿é‡Œäº‘ECS(å®ä¾‹é•œåƒï¼šCentOS7.4)</li><li>å¦‚æœä½¿ç”¨Windowsï¼Œæ¨èxshellã€‚å¦‚æœæ˜¯Macï¼Œæ¨èiTerm2</li></ul><p>(æ³¨ï¼šå› æœ¬äººä½¿ç”¨Macï¼Œä»¥ä¸‹å‡å·²Macä¸ºä¸»)</p><hr><h3 id="ç»ˆç«¯è¿æ¥æœåŠ¡å™¨"><a href="#ç»ˆç«¯è¿æ¥æœåŠ¡å™¨" class="headerlink" title="ç»ˆç«¯è¿æ¥æœåŠ¡å™¨"></a>ç»ˆç«¯è¿æ¥æœåŠ¡å™¨</h3><ul><li>æ‰“å¼€iTerm2ï¼Œè¾“å…¥è¿æ¥å‘½ä»¤ssh username@ipå…¬ç½‘åœ°å€ï¼Œå›è½¦ï¼Œè¾“å…¥ä½ åœ¨è´­ä¹°æœåŠ¡å™¨æ—¶è®¾ç½®çš„å¯†ç ã€‚</li></ul><p><img src="http://images.gitbook.cn/fb945240-f68e-11e7-b8d1-49d5de1a2fe1" alt=""></p><ul><li>å¯†ç è¾“å…¥æ­£ç¡®ï¼Œè¿›å…¥æœåŠ¡å™¨ã€‚</li></ul><p><img src="http://images.gitbook.cn/8a21b2f0-f68f-11e7-b8d1-49d5de1a2fe1" alt=""></p><p>cd / è¿›å…¥æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½• mkdir softï¼Œç”¨æ¥æ”¾æˆ‘ä»¬çš„å®‰è£…åŒ…ã€‚</p><hr><h3 id="å®‰è£…Node"><a href="#å®‰è£…Node" class="headerlink" title="å®‰è£…Node"></a>å®‰è£…Node</h3><p>ä¸‹è½½nodeåŒ…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://nodejs.org/dist/v8.9.4/node-v8.9.4.tar.gz</div></pre></td></tr></table></figure><p>ä¸‹è½½å®Œæˆåï¼Œè¿›è¡Œå‹ç¼©åŒ…è§£å‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf v8.9.4.tar.gz</div></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹å¥½çš„ç›®å½•å¹¶æ‰§è¡Œconfigé…ç½®å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd node-v8.9.4 &amp;&amp; ./configure</div></pre></td></tr></table></figure><p>æ‰§è¡Œç¼–è¯‘åŠå®‰è£…å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure><p>ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ä¹‹åï¼Œä¸€ä¸ªnodeç¯å¢ƒå°±å®‰è£…å¥½äº†ã€‚å¯ä»¥é€šè¿‡node -v æˆ–è€… npm -væ¥æ£€æŸ¥å½“å‰node/npmæ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><p><img src="http://images.gitbook.cn/aa87c390-f6e4-11e7-b0db-b9b8a7444865" alt=""></p><p>å¦‚æœä½ éœ€è¦å‡çº§nodeå’Œnpmç‰ˆæœ¬ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm i -g n</div><div class="line">n stable</div></pre></td></tr></table></figure><hr><h3 id="å®‰è£…nrmå’Œpm2"><a href="#å®‰è£…nrmå’Œpm2" class="headerlink" title="å®‰è£…nrmå’Œpm2"></a>å®‰è£…nrmå’Œpm2</h3><p>nrmæ˜¯ä¸€ä¸ªç®¡ç†npmæºçš„æ’ä»¶ï¼Œæ–¹ä¾¿åˆ‡æ¢å›½å†…å¤–ä»¥åŠç§äººnpmåº“ã€‚</p><p>pm2æ˜¯nodeæœåŠ¡å™¨çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œæ–¹ä¾¿ç®¡ç†å½“å‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æœåŠ¡ã€‚</p><p>è¿™é‡Œè¯´ä¸€ä¸‹cnpmï¼Œå¦‚æœå®‰è£…ä¾èµ–åŒ…å¾ˆæ…¢æˆ–è€…æ ¹æœ¬æ²¡è¿›åº¦ï¼Œè¾“å…¥å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure><p>ç„¶åä½¿ç”¨cnpmä»£æ›¿npmå®‰è£…ã€‚</p><p>å›åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„softç›®å½•ã€‚</p><hr><h4 id="nrm"><a href="#nrm" class="headerlink" title="nrm"></a>nrm</h4><p>å®‰è£…nrmã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g nrm</div></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li>nrm add name address æ·»åŠ æ–°çš„æº</li><li>nrm use name åˆ‡æ¢åˆ°æº</li><li>nrm ls æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æº</li></ul><p><img src="http://images.gitbook.cn/ef923690-f6e5-11e7-b28d-519a9998aa5b" alt=""></p><hr><h4 id="pm2"><a href="#pm2" class="headerlink" title="pm2"></a>pm2</h4><p>å®‰è£…pm2ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g pm2</div></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li>pm2 list æŸ¥çœ‹pm2å®ˆæŠ¤æœåŠ¡</li><li>pm2 start index.js å¯åŠ¨ä¸€ä¸ªpm2å®ˆæŠ¤è¿›ç¨‹å‘½ä»¤</li><li>pm2 restart id/name é‡å¯ä¸€ä¸ªpm2å®ˆæŠ¤è¿›ç¨‹å‘½ä»¤</li><li>pm2 delete id/name åˆ é™¤ä¸€ä¸ªæ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹</li><li>pm2 delete all åˆ é™¤æ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹</li><li>pm2 monit æŸ¥çœ‹pm2çš„æ¶ˆè€—</li></ul><p><img src="http://images.gitbook.cn/24e04d00-f6e6-11e7-b0db-b9b8a7444865" alt=""></p><hr><h3 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h3><p>å¸è½½å·²æœ‰çš„mysqlã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rpm -qa|grep -i mysql</div><div class="line">yum remove &apos;mysql&apos;</div></pre></td></tr></table></figure><p>ä¸‹è½½mysqlæºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// 5.7.24</div><div class="line">wget http://repo.mysql.com//mysql57-community-release-el7-7.noarch.rpm</div></pre></td></tr></table></figure><p>å®‰è£…ä¸‹è½½çš„æºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rpm -ivh mysql57-community-release-el7-7.noarch.rpm</div></pre></td></tr></table></figure><p>ä¸‹è½½å®‰è£…mysqlã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">yum install mysql-server</div><div class="line">yum install mysql-devel</div><div class="line">yum install mysql</div></pre></td></tr></table></figure><p>å¯åŠ¨mysqlã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service mysqld start</div></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li>service mysqld status æŸ¥çœ‹mysqlå½“å‰çš„çŠ¶æ€</li><li>service mysqld stop åœæ­¢mysql</li><li>service mysqld restart é‡å¯mysql</li><li>service mysqld start å¯åŠ¨mysql</li></ul><p>å¦‚æœé‡åˆ°é”™è¯¯ï¼šERROR 2002 (HY000): Canâ€™t connect to local MySQL server through socket /var/lib/mysql/mysql.sockâ€™ï¼Œè¯·åœ¨tmpä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ln -s /tmp/mysql.sock /var/lib/mysql</div></pre></td></tr></table></figure><p>æ‰“å¼€my.cnfå¹¶ä¿®æ”¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /etc/my.cnf</div></pre></td></tr></table></figure><p><img src="http://images.gitbook.cn/4d980cc0-f6ea-11e7-9a49-93c72a04fa82" alt=""></p><p>é‡å¯æ•°æ®åº“ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service mysqld restart</div></pre></td></tr></table></figure><p>ç™»å½•(é»˜è®¤rootæ˜¯æ²¡æœ‰å¯†ç çš„)ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -u root</div></pre></td></tr></table></figure><p>è¿™æ—¶å‡ºç°ERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password: NO)ï¼Œç™»å½•rootå¸å·éœ€è¦å¯†ç ï¼Œç°åœ¨æˆ‘ä»¬æ²¡æœ‰è®¾ç½®å¯†ç ï¼Œå“ªæ¥çš„å¯†ç ã€‚</p><p>äºæ˜¯æˆ‘ä»¬å¼€å§‹å¿˜è®°å¯†ç çš„æ“ä½œ</p><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨/etc/my.cnfæ–‡ä»¶ä¸­æ·»åŠ skip-grant-tables<br>ç¬¬äºŒæ­¥ï¼Œé‡å¯mysqlï¼Œservice mysqld restart<br>ç¬¬ä¸‰æ­¥ï¼Œç™»å½•mysqlï¼Œmysql -u root<br>ç¬¬å››æ­¥ï¼Œä¿®æ”¹å¯†ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt;use mysql;</div><div class="line">mysql&gt;update mysql.user set authentication_string=password(&apos;your password&apos;) where user=&apos;root&apos;;</div><div class="line">mysql&gt;flush privileges;</div><div class="line">mysql&gt;exit;</div></pre></td></tr></table></figure><p>ç¬¬äº”æ­¥ï¼Œæ¢å¤/etc/my.cnfï¼Œå°†skip-grant-tablesåˆ é™¤æˆ–è€…æ³¨é‡Šæ‰<br>ç¬¬å…­æ­¥ï¼Œé‡å¯mysqlï¼Œservice mysqld restart</p><p>åˆ†é…ç”¨æˆ·</p><p>hostæŒ‡å®šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ï¼Œæ­¤å¤„çš„â€localhostâ€ï¼Œæ˜¯æŒ‡è¯¥ç”¨æˆ·åªèƒ½åœ¨æœ¬åœ°ç™»å½•ï¼Œä¸èƒ½åœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šè¿œç¨‹ç™»å½•ï¼Œå¦‚æœæƒ³è¿œç¨‹ç™»å½•çš„è¯ï¼Œå°†â€localhostâ€æ”¹ä¸ºâ€%â€ï¼Œè¡¨ç¤ºåœ¨ä»»ä½•ä¸€å°ç”µè„‘ä¸Šéƒ½å¯ä»¥ç™»å½•;ä¹Ÿå¯ä»¥æŒ‡å®šæŸå°æœºå™¨å¯ä»¥è¿œç¨‹ç™»å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CREATE USER &apos;username&apos;@&apos;host&apos; IDENTIFIED BY &apos;password&apos;;</div><div class="line">CREATE USER &apos;test&apos;@&apos;%&apos; IDENTIFIED BY &apos;password&apos;;</div></pre></td></tr></table></figure><p>ç»™åˆ›å»ºçš„ç”¨æˆ·æƒé™</p><ul><li>privileges ç”¨æˆ·çš„æ“ä½œæƒé™,å¦‚SELECTï¼ŒINSERTï¼ŒUPDATEç­‰.å¦‚æœè¦æˆäºˆæ‰€çš„æƒé™åˆ™ä½¿ç”¨ALL</li><li>databasename æ•°æ®åº“å</li><li>tablename è¡¨å,å¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œæƒé™åˆ™å¯ç”¨è¡¨ç¤º, å¦‚.*.</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GRANT privileges ON databasename.tablename TO &apos;username&apos;@&apos;host&apos;</div></pre></td></tr></table></figure><hr><h3 id="å®‰è£…Redis"><a href="#å®‰è£…Redis" class="headerlink" title="å®‰è£…Redis"></a>å®‰è£…Redis</h3><p>Redisæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æ•°æ®ä»“åº“ï¼Œæ—¢å¯ä»¥åšnosqlæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥åšç¼“å­˜æ•°æ®åº“ã€‚</p><p>ä¸‹è½½å®‰è£…åŒ…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget http://download.redis.io/releases/redis-4.0.6.tar.gz</div></pre></td></tr></table></figure><p>è§£å‹å¹¶è¿›å…¥è§£å‹ä¹‹åçš„æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf redis-4.0.6.tar.gz &amp;&amp;cd redis-4.0.6</div></pre></td></tr></table></figure><p>ç¼–è¯‘å¹¶å®‰è£…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure><p>å¯åŠ¨redisæœåŠ¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">redis-server redis.conf</div></pre></td></tr></table></figure><p><img src="http://images.gitbook.cn/9ab114d0-f82e-11e7-b753-f548c55dc4dd" alt=""></p><p>æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œä¸èƒ½å†è¾“å…¥ä»»ä½•å‘½ä»¤ï¼Œå› ä¸ºredis-serverå·²ç»å ç”¨äº†è¿™ä¸ªå‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚æˆ‘ä»¬éœ€è¦å†æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å¹¶è¿æ¥æœåŠ¡å™¨ã€‚</p><p>ä½¿ç”¨rediså®¢æˆ·ç«¯è¿æ¥RedisæœåŠ¡ï¼Œæ‰§è¡ŒRedisæ–‡ä»¶å¤¹ä¸‹çš„redis-cliæ–‡ä»¶redis-cliï¼Œè¾“å…¥å‡ ä¸ªå‘½ä»¤æµ‹è¯•ä¸€ä¸‹ç®€å•çš„set/getï¼š</p><p><img src="http://images.gitbook.cn/c4d479e0-f82f-11e7-bec2-d1185e7bb6e2" alt=""></p><p>å…³æ‰å®¢æˆ·ç«¯ï¼ŒredisæœåŠ¡ä¹Ÿä¼šåœæ­¢ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹redis.confæ–‡ä»¶ï¼Œå°†daemonizedeçš„å€¼æ”¹ä¸ºyesã€‚</p><p><img src="http://images.gitbook.cn/afb6f050-f830-11e7-b753-f548c55dc4dd" alt=""></p><p>å†æ¬¡è¿è¡ŒRedisçš„å¯åŠ¨å‘½ä»¤redis-server redis.confï¼Œè¿™æ¬¡å°±ä¸ä¼šå ç”¨å‘½ä»¤è¡Œäº†ï¼Œå¯ä»¥ç»§ç»­æ“ä½œå…¶ä»–çš„ï¼ŒRedisæœåŠ¡ä¹Ÿä¸ä¼šåœæ­¢ã€‚</p><hr><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p>nginxåœ¨è½¬å‘è¯·æ±‚ï¼Œè´Ÿè½½å‡è¡¡ç­‰æ–¹é¢éå¸¸æœ‰ç”¨ã€‚å®ƒå¯ä»¥å°†å‡ ä¸ªä¸åŒçš„æœåŠ¡é›†ä¸­åœ¨ä¸€ä¸ª80ç«¯å£ä¸‹ï¼Œæ ¹æ®åŸŸåæˆ–è€…è¯·æ±‚è·¯å¾„æ¥åŒºåˆ†ã€‚</p><p>åœ¨å®‰è£…nginxä¹‹å‰ï¼Œå…ˆè¦å®‰è£…å‡ ä¸ªä¾èµ–æ’ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yum install -y pcre pcre-devel</div><div class="line">yum install -y zlib zlib-devel</div></pre></td></tr></table></figure><p>å®‰è£…opensslã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum install -y openssl openssl-devel</div></pre></td></tr></table></figure><p>ä¸‹è½½nginxåŒ…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">wget https://nginx.org/download/nginx-1.15.6.tar.gz</div></pre></td></tr></table></figure><p>è§£å‹å¹¶è¿›å…¥è§£å‹å¥½çš„ç›®å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf nginx-1.15.6.tar.gz &amp;&amp; cd nginx-1.15.6</div></pre></td></tr></table></figure><p>æ‰§è¡Œé…ç½®å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./configure</div></pre></td></tr></table></figure><p>ç¼–è¯‘å¹¶å®‰è£…ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure><p>æŸ¥çœ‹å®‰è£…ç»“æœã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">whereis nginx</div></pre></td></tr></table></figure><p><img src="http://images.gitbook.cn/d892e470-f835-11e7-b753-f548c55dc4dd" alt=""></p><p>è·³è½¬åˆ°å®‰è£…å¥½çš„nginxç›®å½•ä¸‹ï¼Œè¿›å…¥sbinç›®å½•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/nginx/sbin</div></pre></td></tr></table></figure><p>å¯åŠ¨nginxã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./nginx</div></pre></td></tr></table></figure><p>å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li>./nginx å¯åŠ¨nginx</li><li>./nginx -s stop åœæ­¢nginx</li><li>./nginx -s quit é€€å‡ºnginx</li><li>./nginx -s reload é‡å¯nginx</li></ul><hr><h3 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h3><p>centOSä¸Šæ²¡æœ‰å®‰è£…gitï¼Œæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yum install git</div><div class="line">git --version</div></pre></td></tr></table></figure><hr><h3 id="ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®"><a href="#ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®" class="headerlink" title="ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®"></a>ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®</h3><p>åœ¨æœ¬åœ°æ­å»ºå¹¶æµ‹è¯•å¥½nodeé¡¹ç›®ï¼Œä¸Šä¼ åˆ°GitHubã€‚ç„¶ågit cloneä¸€ä¸‹ã€‚</p><p>é…ç½®ECSå®‰å…¨ç»„è§„åˆ™ï¼Œæš´éœ²3000æ¥å£ã€‚</p><p>å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨æ•°æ®åº“ï¼Œè¿è¡Œä¹‹å‰è¦å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼Œç„¶åå†è¿è¡Œé¡¹ç›®ï¼Œç™»å½•æ•°æ®åº“æ‰§è¡Œcreate database dabasename;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/***</div><div class="line">cd ***</div><div class="line">cnpm i</div><div class="line">pm2 start index.js</div></pre></td></tr></table></figure><p>æ³¨ï¼šé¡¹ç›®ç›‘å¬3000ç«¯å£ï¼Œå¦‚æœé¡ºåˆ©çš„è¯ï¼Œé¡¹ç›®å·²ç»è¿è¡Œèµ·æ¥äº†ã€‚<br>   å¯ä»¥ä½¿ç”¨pm2 listæŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨ï¼Œä½¿ç”¨pm2 logæ‰“å°æ—¥å¿—ã€‚</p><hr><h3 id="Linuxå¸¸ç”¨æ“ä½œæŒ‡ä»¤åˆ—è¡¨"><a href="#Linuxå¸¸ç”¨æ“ä½œæŒ‡ä»¤åˆ—è¡¨" class="headerlink" title="Linuxå¸¸ç”¨æ“ä½œæŒ‡ä»¤åˆ—è¡¨"></a>Linuxå¸¸ç”¨æ“ä½œæŒ‡ä»¤åˆ—è¡¨</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ssh username@ip</td><td>è¿æ¥æœåŠ¡å™¨</td></tr><tr><td>cd path</td><td>è·³è½¬åˆ°è·¯å¾„å¯¹åº”çš„ç›®å½•ä¸‹</td></tr><tr><td>rm filename</td><td>åˆ é™¤æ–‡ä»¶</td></tr><tr><td>rm -rf path</td><td>åˆ é™¤ç›®å½•åŠç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</td></tr><tr><td>ls [-a]</td><td>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œç›®å½•(-aï¼šæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶)</td></tr><tr><td>ll</td><td>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶è¯¦æƒ…(æ–‡ä»¶æƒé™)</td></tr><tr><td>pwd</td><td>æŸ¥çœ‹å½“å‰è·¯å¾„çš„å®Œæ•´è·¯å¾„</td></tr><tr><td>which name</td><td>é»˜è®¤ä½ç½®æŸ¥æ‰¾è¯¥åå­—</td></tr><tr><td>mkdir dirname</td><td>åˆ›å»ºç©ºç›®å½•</td></tr><tr><td>cat path</td><td>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</td></tr><tr><td>cp origin target</td><td>å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹</td></tr><tr><td>mv origin target</td><td>ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹</td></tr><tr><td>ps -aux</td><td>æ˜¾ç¤ºå½“å‰è¿›ç¨‹</td></tr><tr><td>kill -9 processid</td><td>ç»“æŸè¿›ç¨‹</td></tr><tr><td>tar -zxvf filename</td><td>è§£å‹æ–‡ä»¶</td></tr><tr><td>tar -zcvf filename</td><td>å‹ç¼©æ–‡ä»¶</td></tr><tr><td>vi path</td><td>è¿›å…¥æ–‡ä»¶ç¼–è¾‘æ¨¡å¼</td></tr><tr><td>viç¼–è¾‘æ–‡ä»¶ï¼ŒæŒ‰ä¸‹iè¿›å…¥ç¼–è¾‘æ¨¡å¼</td></tr><tr><td>vié€€å‡ºæ–‡ä»¶ï¼Œesc+:wqæˆ–esc+:xä¿å­˜é€€å‡º</td></tr><tr><td>vié€€å‡ºæ–‡ä»¶ï¼Œesc+:qæˆ–esc+:q!å¼ºåˆ¶é€€å‡º</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;åŒ11æŠ¢è´­äº†ä¸€å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¶å·¥ä½œä¸å¿™ï¼Œæäº†ä¸€ä¸ªç®€å•çš„nodeé¡¹ç›®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†nodeé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECSï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="åç«¯" scheme="http://yoursite.com/categories/%E5%90%8E%E7%AB%AF/"/>
    
    
      <category term="Node" scheme="http://yoursite.com/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>JS-æ·±æ‹·è´ä¸æµ…æ‹·è´</title>
    <link href="http://yoursite.com/2018/10/11/JS-%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D/"/>
    <id>http://yoursite.com/2018/10/11/JS-æ·±æ‹·è´ä¸æµ…æ‹·è´/</id>
    <published>2018-10-11T10:11:52.000Z</published>
    <updated>2018-12-11T14:03:41.509Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>å½“æˆ‘ä»¬åœ¨JSä¸­å¤åˆ¶ä¸€ä¸ªæ•°æ®ï¼Œåœ¨å¤åˆ¶å¦‚stringï¼Œnumberç­‰åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œçœ‹ä¼¼æ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½†æ˜¯å½“å¤åˆ¶å¦‚arrayï¼Œobjectç±»å‹æ—¶ã€‚å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚</p></blockquote><a id="more"></a><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var a = &#123;x: 10, y: 10&#125;</div><div class="line">var b = a</div><div class="line">b.x = 100</div><div class="line">b.y = 100</div></pre></td></tr></table></figure><p>æ‰“å°ä¸€ä¸‹aå’Œbçš„å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">console.log(a) // &#123;x: 100, y: 200&#125;</div><div class="line">console.log(b) // &#123;x: 100, y: 200&#125;</div></pre></td></tr></table></figure><p>å‘ç°æ”¹å˜bçš„å€¼ï¼ŒåŒæ—¶ä¹Ÿæ”¹äº†açš„å€¼ã€‚</p><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var a = 10</div><div class="line">var b = a</div><div class="line">b = 20</div></pre></td></tr></table></figure><p>æ‰“å°ä¸€ä¸‹aå’Œbçš„å€¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">console.log(a) // 10</div><div class="line">console.log(b) // 20</div></pre></td></tr></table></figure><p>??? bçš„å€¼æ”¹å˜å¹¶æ²¡æœ‰å¼•èµ·açš„å€¼æ”¹å˜ã€‚</p><hr><h3 id="å€¼ç±»å‹-vs-å¼•ç”¨ç±»å‹"><a href="#å€¼ç±»å‹-vs-å¼•ç”¨ç±»å‹" class="headerlink" title="å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹"></a>å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹</h3><p>åœ¨JSä¸­ï¼Œå˜é‡ä¼ é€’æ–¹å¼åˆ†ä¸ºå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚å€¼ç±»å‹åŒ…æ‹¬Stringï¼ŒNumberï¼ŒNullï¼ŒBooleanï¼ŒUndefinedã€‚å¼•ç”¨ç±»å‹åŒ…æ‹¬Objectç±»çš„æ‰€æœ‰ï¼Œå¦‚Dateï¼ŒArrayï¼ŒFunctionã€‚</p><p>åœ¨å‚æ•°ä¼ é€’æ–¹å¼ä¸Šï¼Œå€¼ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ã€‚å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«ä¼ é€’(æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä¸¤è€…å¼•ç”¨åŒä¸€ä¸ªå€¼ï¼Œå½“ä¸€è€…æ”¹å˜å€¼ï¼Œå¦ä¸€è€…ä¹Ÿæ”¹å˜)ã€‚</p><p>JSè¿™æ ·è®¾è®¡çš„åŸå› åœ¨äºï¼šæŒ‰å€¼ä¼ é€’çš„ç±»å‹ï¼Œå¤åˆ¶ä¸€ä»½å­˜å…¥æ ˆå†…å­˜ï¼Œè¿™ç±»ç±»å‹ä¸€èˆ¬ä¸ä¼šå ç”¨å¤ªå¤šå†…å­˜ï¼Œè€Œä¸”æŒ‰å€¼ä¼ é€’ä¿è¯äº†å…¶è®¿é—®é€Ÿåº¦ã€‚æŒ‰å…±äº«ä¼ é€’çš„ç±»å‹ï¼Œæ˜¯å¤åˆ¶å…¶å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¤åˆ¶å…¶å€¼ï¼Œä¿è¯è¿‡å¤§çš„å¯¹è±¡ç­‰ä¸ä¼šå› ä¸ºä¸åœå¤åˆ¶å†…å®¹è€Œé€ æˆå†…å­˜çš„æµªè´¹ã€‚</p><p>æ·±æ‹·è´å’Œæµ…æ‹·è´æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨äºæ˜¯å¦çœŸæ­£è·å–äº†ä¸€ä¸ªå¯¹è±¡çš„æ‹·è´å®ä½“ï¼Œè€Œä¸åªæ˜¯å¼•ç”¨ã€‚</p><hr><h3 id="æµ…æ‹·è´çš„å®ç°æ–¹å¼"><a href="#æµ…æ‹·è´çš„å®ç°æ–¹å¼" class="headerlink" title="æµ…æ‹·è´çš„å®ç°æ–¹å¼"></a>æµ…æ‹·è´çš„å®ç°æ–¹å¼</h3><h4 id="ç›´æ¥èµ‹å€¼"><a href="#ç›´æ¥èµ‹å€¼" class="headerlink" title="ç›´æ¥èµ‹å€¼"></a>ç›´æ¥èµ‹å€¼</h4><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let obj = &#123;username: &apos;kobe&apos;, age: 39, sex: &#123;option1: &apos;ç”·&apos;, option2: &apos;å¥³&apos;&#125;&#125;</div><div class="line">let obj1 = obj</div><div class="line">obj1.sex.option1 = &apos;ä¸ç”·ä¸å¥³&apos; // ä¿®æ”¹å¤åˆ¶çš„å¯¹è±¡ä¼šå½±å“åŸå¯¹è±¡</div></pre></td></tr></table></figure><p>æ‰“å°obj1çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(obj1) // &#123;username: &apos;kobe&apos;, age: 39, sex: &#123;option1: &apos;ä¸ç”·ä¸å¥³&apos;, option2: &apos;å¥³&apos;&#125;&#125;</div></pre></td></tr></table></figure><hr><h4 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign"></a>Object.assign</h4><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let obj = &#123;</div><div class="line">  username: &apos;kobe&apos;</div><div class="line">&#125;;</div><div class="line">let obj1 = Object.assign(obj)</div><div class="line">obj1.username = &apos;wang&apos;</div></pre></td></tr></table></figure><p>æ‰“å°objçš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(obj) // &#123; username: &quot;wang&quot; &#125;</div></pre></td></tr></table></figure><hr><h4 id="Array-prototype-concat"><a href="#Array-prototype-concat" class="headerlink" title="Array.prototype.concat"></a>Array.prototype.concat</h4><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let arr = [1, 3, &#123;</div><div class="line">    username: &apos;kobe&apos;</div><div class="line">&#125;]</div><div class="line">let arr2=arr.concat()</div><div class="line">arr2[2].username = &apos;wang&apos;</div></pre></td></tr></table></figure><p>æ‰“å°arrçš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(arr) // [1, 3, &#123; username: &quot;wade&quot; &#125;]</div></pre></td></tr></table></figure><hr><h4 id="Array-prototype-slice"><a href="#Array-prototype-slice" class="headerlink" title="Array.prototype.slice"></a>Array.prototype.slice</h4><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">let arr = [1, 3, &#123;</div><div class="line">    username: &apos;kobe&apos;</div><div class="line">&#125;]</div><div class="line">let arr2=arr.slice()</div><div class="line">arr2[2].username = &apos;wang&apos;</div></pre></td></tr></table></figure><p>æ‰“å°arrçš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(arr) // [1, 3, &#123; username: &quot;wade&quot; &#125;]</div></pre></td></tr></table></figure><hr><h4 id="Array-prototype-concat-vs-Array-prototype-slice"><a href="#Array-prototype-concat-vs-Array-prototype-slice" class="headerlink" title="Array.prototype.concat vs Array.prototype.slice"></a>Array.prototype.concat vs Array.prototype.slice</h4><p>å…³äºArrayçš„concatå’Œsliceè¡¥å……è¯´æ˜ï¼šArrayçš„concatå’Œsliceæ–¹æ³•ä¸æ”¹å˜åŸå§‹æ•°ç»„ï¼Œåªæ˜¯è¿”å›äº†ä¸€ä¸ªæµ…å¤åˆ¶åŸæ•°ç»„ä¸­çš„å…ƒç´ çš„ä¸€ä¸ªæ–°æ•°ç»„ã€‚</p><p>åŸæ•°ç»„ä¸­çš„å…ƒç´ ä¼šæŒ‰ç…§ä¸‹è¿°è§„åˆ™æ‹·è´ï¼š</p><ul><li><p>å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå¼•ç”¨ç±»å‹ï¼Œsliceæˆ–è€…concatä¼šæ‹·è´è¿™ä¸ªå¼•ç”¨åˆ°æ–°çš„æ•°ç»„é‡Œï¼Œä¸¤ä¸ªå¯¹è±¡å¼•ç”¨éƒ½å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœè¢«å¼•ç”¨çš„å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œåˆ™æ–°æ•°ç»„å’ŒåŸæ•°ç»„ä¸­çš„è¿™ä¸ªå…ƒç´ éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p></li><li><p>å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå€¼ç±»å‹ï¼Œsliceæˆ–è€…concatä¼šå¤åˆ¶ä¸€ä»½è¿™äº›å€¼åˆ°æ–°æ•°ç»„é‡Œã€‚åœ¨åˆ«çš„æ•°ç»„é‡Œä¿®æ”¹è¿™äº›å€¼ï¼Œå¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªæ•°ç»„ã€‚</p></li></ul><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">let arr = [1, 3, &#123;</div><div class="line">    username: &apos;kobe&apos;</div><div class="line">&#125;];</div><div class="line">let arr3 = arr.slice();</div><div class="line">arr3[1] = 2</div><div class="line">console.log(arr, arr3)</div></pre></td></tr></table></figure><p>æ‰“å°arrå’Œarr3çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">console.log(arr, arr3)</div><div class="line">// ---result</div><div class="line">// [1, 3, &#123; username: &quot;kobe&quot; &#125;]</div><div class="line">// [1, 2, &#123; username: &quot;kobe&quot; &#125;]</div></pre></td></tr></table></figure><hr><h3 id="æ·±æ‹·è´çš„å®ç°æ–¹å¼"><a href="#æ·±æ‹·è´çš„å®ç°æ–¹å¼" class="headerlink" title="æ·±æ‹·è´çš„å®ç°æ–¹å¼"></a>æ·±æ‹·è´çš„å®ç°æ–¹å¼</h3><h4 id="Object-assign-1"><a href="#Object-assign-1" class="headerlink" title="Object.assign"></a>Object.assign</h4><p>Object.assignå¯ä»¥è¿›è¡Œä¸€å±‚æ·±åº¦æ‹·è´</p><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">        name: &apos;wang&apos;,</div><div class="line">        test1: null,</div><div class="line">        test2: undefined,</div><div class="line">        test3: function()&#123;alert(1)&#125;,</div><div class="line">test4: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">var obj1 = Object.assign(&#123;&#125;, obj1)</div><div class="line">obj1.age = 24</div><div class="line">console.log(obj, obj1)</div></pre></td></tr></table></figure><p>æ‰“å°objå’Œobj1çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">console.log(obj, obj1)</div><div class="line">// ----result</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;  &#125; &#125;</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;  &#125;, age: 24 &#125;</div></pre></td></tr></table></figure><p>ç„¶è€Œã€‚ã€‚ã€‚ã€‚ã€‚</p><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">        name: &apos;wang&apos;,</div><div class="line">        test1: null,</div><div class="line">        test2: undefined,</div><div class="line">        test3: function()&#123;alert(1)&#125;,</div><div class="line">test4: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">var obj1 = Object.assign(&#123;&#125;, obj1)</div><div class="line">obj1.test4.age = 24</div></pre></td></tr></table></figure><p>æ‰“å°objå’Œobj1çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">console.log(obj, obj1)</div><div class="line">// ----result</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; age: 24 &#125; &#125;</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; age: 24 &#125; &#125;</div></pre></td></tr></table></figure><hr><h4 id="JSON-parse-JSON-stringfy-obj"><a href="#JSON-parse-JSON-stringfy-obj" class="headerlink" title="JSON.parse(JSON.stringfy(obj))"></a>JSON.parse(JSON.stringfy(obj))</h4><p>è¯´åˆ°æ·±æ‹·è´ï¼Œä½ è‚¯å®šä¼šæƒ³åˆ°JSON.parse(JSON.stringfy(obj))ã€‚</p><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">        name: &apos;wang&apos;,</div><div class="line">        test: &#123;</div><div class="line">            name: &apos;test&apos;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">var obj1 = JSON.parse(JSON.stringify(obj))</div><div class="line">obj1.test.name = 24</div></pre></td></tr></table></figure><p>æ‰“å°objå’Œobj1çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">console.log(obj, obj1)</div><div class="line">// ----result</div><div class="line">// &#123; name: &quot;wang&quot;, test: &#123; name: &quot;test&quot; &#125; &#125;</div><div class="line">// &#123; name: &quot;wang&quot;, test: &#123; name: 24 &#125; &#125;</div></pre></td></tr></table></figure><p>ç„¶è€Œã€‚ã€‚ã€‚ã€‚</p><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">        name: &apos;wang&apos;,</div><div class="line">        test1: null,</div><div class="line">        test2: undefined,</div><div class="line">        test3: function()&#123;alert(1)&#125;,</div><div class="line">        test4: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">var obj1 = JSON.parse(JSON.stringify(obj))</div></pre></td></tr></table></figure><p>æ‰“å°objå’Œobj1çš„å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">console.log(obj, obj1)</div><div class="line">// ---result</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;  &#125; &#125;</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test4: &#123;  &#125; &#125;</div></pre></td></tr></table></figure><p>???test2å’Œtest3ä¸è§äº†ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>JSON.stringify()æ–¹æ³•æ˜¯å°†ä¸€ä¸ªJavaScriptå€¼(å¯¹è±¡æˆ–è€…æ•°ç»„)è½¬æ¢ä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼Œä¸èƒ½æ¥å—å‡½æ•°ã€‚</p><hr><h4 id="æ‰‹å†™é€’å½’æ–¹æ³•"><a href="#æ‰‹å†™é€’å½’æ–¹æ³•" class="headerlink" title="æ‰‹å†™é€’å½’æ–¹æ³•"></a>æ‰‹å†™é€’å½’æ–¹æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">function deepClone(obj) &#123;</div><div class="line">let result</div><div class="line">    let toString = Object.prototype.toString</div><div class="line">    if (toString.call(obj) === &apos;[Object Array]&apos;) &#123;</div><div class="line">    result = []</div><div class="line">      for (var i =0; i&lt;obj.length; i++) &#123;</div><div class="line">        result[i] = deepClone(obj[i])</div><div class="line">        &#125;</div><div class="line">    &#125; else if (toString.call(obj) === &apos;[Object Object]&apos;) &#123;</div><div class="line">    result = &#123;&#125;</div><div class="line">      for (var key in obj) &#123;</div><div class="line">        if (obj.hasOwnProperty(key)) &#123;</div><div class="line">            result[key] = deepClone(obj[key])</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">    return obj</div><div class="line">    &#125;</div><div class="line">  return result</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>ğŸŒ°ï¼šè°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var obj = &#123;</div><div class="line">        name: &apos;wang&apos;,</div><div class="line">        test1: null,</div><div class="line">        test2: undefined,</div><div class="line">        test3: function()&#123;alert(1)&#125;,</div><div class="line">        test4: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">var obj1 = deepClone(obj)</div><div class="line">console.log(obj, obj21)</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: Object &#123;  &#125; &#125;</div><div class="line">// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: Object &#123;  &#125; &#125;</div></pre></td></tr></table></figure><hr><h4 id="jQueryå®ç°"><a href="#jQueryå®ç°" class="headerlink" title="jQueryå®ç°"></a>jQueryå®ç°</h4><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var obj1 = &#123;</div><div class="line">        name: &apos;wang&apos;,</div><div class="line">        test1: null,</div><div class="line">        test2: undefined,</div><div class="line">        test3: function()&#123;alert(1)&#125;,</div><div class="line">        test4: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">var obj2 = $.extend(true, &#123;&#125;, obj1)</div></pre></td></tr></table></figure><hr><h4 id="lodashå®ç°"><a href="#lodashå®ç°" class="headerlink" title="lodashå®ç°"></a>lodashå®ç°</h4><p>ğŸŒ°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var obj1 = &#123;</div><div class="line">        name: &apos;wclimb&apos;,</div><div class="line">        test1: null,</div><div class="line">        test2: undefined,</div><div class="line">        test3: function()&#123;alert(1)&#125;,</div><div class="line">        test4: &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">var obj2 = _.cloneDeep(obj1)</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;å½“æˆ‘ä»¬åœ¨JSä¸­å¤åˆ¶ä¸€ä¸ªæ•°æ®ï¼Œåœ¨å¤åˆ¶å¦‚stringï¼Œnumberç­‰åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œçœ‹ä¼¼æ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½†æ˜¯å½“å¤åˆ¶å¦‚arrayï¼Œobjectç±»å‹æ—¶ã€‚å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="JavaScript" scheme="http://yoursite.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Webpack-åŸºç¡€ä½¿ç”¨</title>
    <link href="http://yoursite.com/2018/09/25/Webpack-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2018/09/25/Webpack-åŸºç¡€ä½¿ç”¨/</id>
    <published>2018-09-25T07:15:00.000Z</published>
    <updated>2018-12-11T14:03:41.515Z</updated>
    
    <content type="html"><![CDATA[<h4 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a>å¯¼è¯­</h4><blockquote><p>webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚</p></blockquote><a id="more"></a><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ä½¿ç”¨npmæˆ–è€…yarnæ¥å®‰è£…webpack</p><hr><h4 id="å…¨å±€å®‰è£…"><a href="#å…¨å±€å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…"></a>å…¨å±€å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm i webpack webpack-cli -g</div><div class="line"></div><div class="line">or</div><div class="line"></div><div class="line">$ yarn -g add webpack webpack-cli</div></pre></td></tr></table></figure><p>ç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œå°±å¯ä»¥å…¨å±€æ‰§è¡Œwebpackå‘½ä»¤äº†ã€‚æ³¨ï¼šwebpack-cliåœ¨4.xç‰ˆæœ¬ä¹‹åä¸å†ä½œä¸ºwebpackçš„ä¾èµ–äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶éœ€è¦å•ç‹¬å®‰è£…ã€‚</p><hr><h4 id="å±€éƒ¨å®‰è£…"><a href="#å±€éƒ¨å®‰è£…" class="headerlink" title="å±€éƒ¨å®‰è£…"></a>å±€éƒ¨å®‰è£…</h4><p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ›´æ¨èå°†webpackä½œä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–æ¥å®‰è£…ä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥æŒ‡å®šé¡¹ç›®ä¸­ä½¿ç”¨çš„webpackç‰ˆæœ¬ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ npm i webpack webpack-cli -D</div><div class="line"></div><div class="line">or</div><div class="line"></div><div class="line">$ yarn add webpack webpack-cli -D</div></pre></td></tr></table></figure><p>ç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œwebpackä¼šå‡ºç°åœ¨é¡¹ç›®çš„package.jsonæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªnpm scripts:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;build&quot;: &quot;webpack --mode production&quot;</div><div class="line">&#125;,</div><div class="line">&quot;devDependencies&quot;: &#123;</div><div class="line">  &quot;webpack&quot;: &quot;^4.1.1&quot;,</div><div class="line">  &quot;webpack-cli&quot;: &quot;^2.0.12&quot;,</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é¡¹ç›®æ ¹ç›®å½•æ–°å»º./src/index.jsï¼Œä»»æ„å†™JSä»£ç ï¼Œä¿å­˜ï¼Œæ‰§è¡Œnpm run buildæˆ–è€…yarn buildå‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šå‘ç°é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å¢äº†ä¸€ä¸ªdistç›®å½•ï¼Œé‡Œé¢å­˜æ”¾äº†webpackæ„å»ºå¥½çš„main.jsæ–‡ä»¶ã€‚</p><p>webpack4.xå¯ä»¥é›¶é…ç½®å°±å¼€å§‹æ„å»ºï¼Œä½†æœ‰æ—¶æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦æ›´å¤šçš„åŠŸèƒ½ã€‚</p><hr><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>å…ˆæ”¾ä¸€å¼ ç»å…¸å›¾ï¼š</p><p><img src="https://user-gold-cdn.xitu.io/2018/3/19/1623bfac4a1e0945?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt=""></p><hr><h4 id="å…¥å£"><a href="#å…¥å£" class="headerlink" title="å…¥å£"></a>å…¥å£</h4><p>å¦‚ä¸Šå›¾å·¦ä¸Šè§’çš„.jsï¼Œè¿™ä¸ª.jså°±æ˜¯å¤šä¸ªä»£ç æ¨¡å—çš„å…¥å£ï¼Œä¹Ÿæ˜¯webpackæ„å»ºçš„å…¥å£ã€‚webpackä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä»å®ƒå¼€å§‹è§£æä¾èµ–ï¼Œç„¶åè¿›è¡Œæ‰“åŒ…ã€‚</p><p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œé‚£ä¹ˆå¯èƒ½å…¥å£åªæœ‰ä¸€ä¸ªã€‚å¦‚æœæ˜¯å¤šé¡µåº”ç”¨ï¼Œé‚£ä¹ˆç»å¸¸æ˜¯ä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªæ„å»ºå…¥å£ã€‚</p><p>ç”¨æ³•ï¼šentry</p><hr><h5 id="å•ä¸ªå…¥å£è¯­æ³•"><a href="#å•ä¸ªå…¥å£è¯­æ³•" class="headerlink" title="å•ä¸ªå…¥å£è¯­æ³•"></a>å•ä¸ªå…¥å£è¯­æ³•</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// ç®€å†™</div><div class="line">module.exports = &#123;</div><div class="line">  entry: &apos;./src/index&apos;</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    main: &apos;./src/index&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h5 id="å¤šä¸ªå…¥å£è¯­æ³•"><a href="#å¤šä¸ªå…¥å£è¯­æ³•" class="headerlink" title="å¤šä¸ªå…¥å£è¯­æ³•"></a>å¤šä¸ªå…¥å£è¯­æ³•</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  entry: &#123;</div><div class="line">    foo: &apos;./src/foo&apos;,</div><div class="line">    bar: &apos;./src/bar&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h4 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h4><p>è¾“å‡ºå³æŒ‡webpackæœ€ç»ˆæ„å»ºå‡ºæ¥çš„é™æ€æ–‡ä»¶ï¼Œæ„å»ºç»“æœçš„æ–‡ä»¶åï¼Œè·¯å¾„ç­‰éƒ½æ˜¯å¯ä»¥é…ç½®çš„ã€‚</p><p>ç”¨æ³•ï¼šoutput</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">    filename: &apos;bundle.js&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</div><div class="line">module.exports = &#123;</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, &apos;dist&apos;),</div><div class="line">    filename: &apos;[name].js&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// è·¯å¾„ä¸­ä½¿ç”¨hashï¼Œæ¯æ¬¡æ„å»ºéƒ½æœ‰ä¸€ä¸ªä¸åŒçš„hashå€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜</div><div class="line">module.exports = &#123;</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(__dirname, &apos;dist/[hash]&apos;),</div><div class="line">    filename: &apos;[name].js&apos;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h4 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h4><p>loaderï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆwebpackå¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpackä¼šé»˜è®¤æŠŠæ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆJSæ–‡ä»¶ï¼Œå¦‚æœå…¥å£æ–‡ä»¶ä¾èµ–ä¸€ä¸ª.pugæ¨¡å—æ–‡ä»¶æˆ–è€….scssæ ·å¼æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ç›¸åº”çš„loaderæ¥æŠŠä¸åŒæ ¼å¼çš„æ–‡ä»¶è½¬æ¢ä¸ºJavaScriptï¼Œä»¥ä¾¿æ‰“åŒ…ååœ¨æµè§ˆå™¨è¿è¡Œã€‚</p><p>ç”¨æ³•ï¼šmodule.rules</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.jsx?/, // æ¡ä»¶</div><div class="line">        include: [</div><div class="line">          path.resolve(__dirname, &apos;src&apos;)</div><div class="line">        ], // æ¡ä»¶</div><div class="line">        use: &apos;babel-loader&apos; // è§„åˆ™åº”ç”¨ç»“æœ</div><div class="line">      &#125; // ä¸€ä¸ªObjectå³ä¸€æ¡è§„åˆ™</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>loaderåŒ¹é…è§„åˆ™ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªå› ç´ ï¼šåŒ¹é…æ¡ä»¶å’ŒåŒ¹é…è§„åˆ™åçš„åº”ç”¨ã€‚</p><hr><h5 id="è§„åˆ™æ¡ä»¶é…ç½®"><a href="#è§„åˆ™æ¡ä»¶é…ç½®" class="headerlink" title="è§„åˆ™æ¡ä»¶é…ç½®"></a>è§„åˆ™æ¡ä»¶é…ç½®</h5><p>åŒ¹é…æ¡ä»¶é€šå¸¸ä½¿ç”¨è¯·æ±‚èµ„æºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ¥è¿›è¡ŒåŒ¹é…ï¼Œå®˜æ–¹æ–‡æ¡£æˆä¸ºresourceã€‚</p><p>ä¸Šè¿°ä»£ç ä¸­çš„testå’Œincludeéƒ½ç”¨äºåŒ¹é…resourceè·¯å¾„ï¼Œæ˜¯resource.testå’Œresource.includeçš„ç®€å†™ã€‚ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  rules: [</div><div class="line">      &#123;</div><div class="line">        resource: &#123; // resource çš„åŒ¹é…æ¡ä»¶</div><div class="line">          test: /\.jsx?/,</div><div class="line">          include: [</div><div class="line">            path.resolve(__dirname, &apos;src&apos;),</div><div class="line">          ]</div><div class="line">        &#125;,</div><div class="line">        use: &apos;babel-loader&apos;</div><div class="line">      &#125;,</div><div class="line">      // ...</div><div class="line">    ],</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>webpackä¸ºloaderæä¾›äº†å¤šç§åŒ¹é…æ¡ä»¶çš„é…ç½®æ–¹å¼ï¼š</p><ul><li>test: â€¦ åŒ¹é…ç‰¹å®šæ¡ä»¶</li><li>include: â€¦ åŒ¹é…ç‰¹å®šè·¯å¾„</li><li>exclude: â€¦ æ’é™¤ç‰¹å®šè·¯å¾„</li><li>and: [] å¿…é¡»åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶</li><li>or: [] åŒ¹é…æ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ªæ¡ä»¶</li><li>not: [] æ’é™¤åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶</li></ul><p>æ¡ä»¶å€¼ç±»å‹ï¼š</p><ul><li>å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼ˆç»å¯¹è·¯å¾„ï¼‰</li><li>æ­£åˆ™è¡¨è¾¾å¼</li><li>æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„</li><li>å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶</li><li>å‡½æ•°ï¼šè¿”å›trueè¡¨ç¤ºåŒ¹é…</li></ul><hr><h5 id="è§„åˆ™åº”ç”¨é…ç½®"><a href="#è§„åˆ™åº”ç”¨é…ç½®" class="headerlink" title="è§„åˆ™åº”ç”¨é…ç½®"></a>è§„åˆ™åº”ç”¨é…ç½®</h5><p>åŒ¹é…è§„åˆ™åçš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨useå­—æ®µï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">rules: [</div><div class="line">  &#123;</div><div class="line">    test: /\.less/,</div><div class="line">    use: [</div><div class="line">      &apos;style-loader&apos;,</div><div class="line">      &#123;</div><div class="line">        loader: &apos;css-loader&apos;,</div><div class="line">        options: &#123;</div><div class="line">          // ...</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      &#123;</div><div class="line">        loader: &apos;less-loader&apos;,</div><div class="line">        options: &#123;</div><div class="line">          // ...</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure><p>ä½¿ç”¨optionså¯ä»¥ç»™å¯¹åº”çš„loaderä¼ é€’ä¸€äº›é…ç½®é¡¹ã€‚</p><p>å¯¹äºä¸Šè¿°çš„lessè§„åˆ™åº”ç”¨é…ç½®ï¼Œä¸€ä¸ªlessæ¨¡å—æ–‡ä»¶å¯ä»¥ç»è¿‡å¤šä¸ªloaderçš„è½¬æ¢å¤„ç†ï¼Œæ‰§è¡Œé¡ºåºä¸ºä»å³åˆ°å·¦ã€‚</p><p>å¦‚æœå¤šä¸ªruleåŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œloaderçš„åº”ç”¨é¡ºåºåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">rules: [</div><div class="line">  &#123;</div><div class="line">    test: /\.js$/,</div><div class="line">    loader: &quot;eslint-loader&quot;,</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    test: /\.js$/,</div><div class="line">    loader: &quot;babel-loader&quot;,</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure><p>eslint-loaderç”¨äºæ£€æŸ¥äººå·¥ç¼–å†™çš„ä»£ç ï¼Œbabel-loaderç”¨äºè½¬æ¢ä»£ç ã€‚æ‰€ä»¥ï¼Œeslint-loaderåº”è¯¥åœ¨babel-loaderä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä¿è¯æ‰§è¡Œé¡ºåºï¼Ÿ</p><p>webpackä¸ºæ¯ä¸€ä¸ªåŒ¹é…è§„åˆ™æä¾›äº†enforceå­—æ®µæ¥é…ç½®å½“å‰ruleå¾—çš„loaderç±»å‹ã€‚pre(å‰ç½®) &gt; è¡Œå†… &gt; æ™®é€š &gt; åç½®(post)ã€‚ æˆ‘ä»¬è¦ç¡®ä¿eslint-loaderåœ¨babel-loaderä¹‹å‰æ‰§è¡Œï¼Œåªéœ€ç»™ruleè§„åˆ™é¡¹æ·»åŠ enforceå­—æ®µï¼Œå¹¶è®¾ç½®å…¶å€¼ä¸ºpreã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">rules: [</div><div class="line">  &#123;</div><div class="line">    enforce: &apos;pre&apos;,</div><div class="line">    test: /\.js$/,</div><div class="line">    loader: &quot;eslint-loader&quot;,</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    test: /\.js$/,</div><div class="line">    loader: &quot;babel-loader&quot;,</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure><hr><h5 id="å¸¸ç”¨ruleé…ç½®é¡¹"><a href="#å¸¸ç”¨ruleé…ç½®é¡¹" class="headerlink" title="å¸¸ç”¨ruleé…ç½®é¡¹"></a>å¸¸ç”¨ruleé…ç½®é¡¹</h5><h6 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.css$/,</div><div class="line">        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</div><div class="line">        use: ExtractTextPlugin.extract(&#123;</div><div class="line">          fallback: &apos;style-loader&apos;,</div><div class="line">          use: &apos;css-loader&apos;,</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]</div><div class="line">    new ExtractTextPlugin(&apos;[name].css&apos;),</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>css-loaderï¼šè´Ÿè´£è§£æCSSä»£ç ï¼Œä¸»è¦å¤„ç†CSSä¸­çš„ä¾èµ–ï¼ŒğŸŒ°ï¼š@importã€url()ç­‰ã€‚</li><li>style-loaderï¼šå°†css-loaderè§£æçš„ç»“æœè½¬å˜ä¸ºJSä»£ç ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ’å…¥styleæ ‡ç­¾æ¥è®©CSSç”Ÿæ•ˆã€‚</li></ul><hr><h6 id="é¢„å¤„ç†å™¨"><a href="#é¢„å¤„ç†å™¨" class="headerlink" title="é¢„å¤„ç†å™¨"></a>é¢„å¤„ç†å™¨</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.less/,</div><div class="line">        // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader</div><div class="line">        use: ExtractTextPlugin.extract(&#123;</div><div class="line">          fallback: &apos;style-loader&apos;,</div><div class="line">          use: [&apos;css-loader&apos;, &apos;less-loader&apos;],</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash]</div><div class="line">    new ExtractTextPlugin(&apos;[name].css&apos;)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h6 id="å›¾ç‰‡"><a href="#å›¾ç‰‡" class="headerlink" title="å›¾ç‰‡"></a>å›¾ç‰‡</h6><p>webpackæ— æ³•å¤„ç†å›¾ç‰‡æ ¼å¼ï¼Œæˆ‘ä»¬é€‰æ‹©file-loaderï¼Œå®ƒä¸ä»…å¯ä»¥å¤„ç†å›¾ç‰‡æ ¼å¼ï¼Œè¿˜å¯ç”¨äºå¤„ç†å…¶å®ƒå¾ˆå¤šç±»å‹çš„æ–‡ä»¶ã€‚ç›´æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå°†æ„å»ºåçš„æ–‡ä»¶è·¯å¾„è¿”å›ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.(png|jpg|gif)$/,</div><div class="line">        use: &apos;file-loader&apos;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h6 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h6><p>Babelæ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ES6ã€ES7ç­‰æ–°æ ‡å‡†æ¥ç¼–å†™JSçš„ç¼–è¯‘å·¥å…·ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.jsx?/,</div><div class="line">        loader: &apos;babel-loader&apos;</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h4 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h4><p>æ’ä»¶æ˜¯webpackçš„æ”¯æŸ±åŠŸèƒ½ï¼Œåœ¨äºè§£å†³loaderæ— æ³•å®ç°çš„å…¶ä»–äº‹æƒ…ã€‚</p><p>ç”¨æ³•ï¼šplugin</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">const UglifyPlugin = require(&apos;uglifyjs-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  plugins: [new UglifyPlugin()]</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h5 id="å¸¸è§webpack-pluginä½¿ç”¨"><a href="#å¸¸è§webpack-pluginä½¿ç”¨" class="headerlink" title="å¸¸è§webpack pluginä½¿ç”¨"></a>å¸¸è§webpack pluginä½¿ç”¨</h5><h6 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h6><p>webpacké»˜è®¤ä»ä½œä¸ºå…¥å£çš„JSæ–‡ä»¶è¿›è¡Œæ„å»ºï¼Œä½†é€šå¸¸ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½æ˜¯ä»ä¸€ä¸ªé¡µé¢(HTML)å‡ºå‘çš„ã€‚é€šå¸¸æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œä½¿ç”¨scriptæ ‡ç­¾ç›´æ¥å¼•å…¥æ„å»ºå¥½çš„jsæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;./dist/bundle.js&quot;&gt;&lt;/script&gt;</div></pre></td></tr></table></figure><p>ç„¶è€Œï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶åæˆ–è€…è·¯å¾„å˜åŒ–ï¼Œæ¯æ¬¡æ„å»ºå®Œæˆåï¼Œæˆ‘ä»¬è¦æ‰‹åŠ¨å»ä¿®æ”¹HTMLæ–‡ä»¶ä¸­çš„jsè·¯å¾„?</p><p>å¦‚æœèƒ½å°†HTMLå¼•ç”¨è·¯å¾„å’Œæˆ‘ä»¬çš„webpackæ„å»ºç»“æœå…³è”èµ·æ¥å°±å¥½äº†ã€‚</p><p>html-webpack-pluginå°±å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">npm i html-webpack-plugin -D</div><div class="line"></div><div class="line">or</div><div class="line"></div><div class="line">yarn add html-webpack-plugin -D</div></pre></td></tr></table></figure><p>ç„¶ååœ¨webpacké…ç½®ä¸­ï¼Œå°†html-webpack-pluginæ·»åŠ åˆ°pluginsåˆ—è¡¨ä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  plugins: [</div><div class="line">    new HtmlWebpackPlugin(),</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é…ç½®å¥½ä¹‹åï¼Œæ„å»ºæ—¶html-webpack-pluginä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œå…¶ä¸­ä¼šå¼•ç”¨æ„å»ºå‡ºæ¥çš„JSæ–‡ä»¶ã€‚</p><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨html-webpack-pluginä¸­ä¼ é€’æˆ‘ä»¬è‡ªå·±å†™å¥½çš„HTMLæ¨¡æ¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  plugins: [</div><div class="line">    new HtmlWebpackPlugin(&#123;</div><div class="line">      filename: &quot;index.html&quot;,</div><div class="line">      template: &quot;assets/index.html&quot;</div><div class="line">    &#125;),</div><div class="line">  ],</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h6 id="DefinePlugin"><a href="#DefinePlugin" class="headerlink" title="DefinePlugin"></a>DefinePlugin</h6><p>DefinePluginæ˜¯webpackçš„å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡webpack.DefinePluginç›´æ¥å¼•ç”¨ã€‚</p><p>ä¸»è¦ç”¨äºåˆ›å»ºä¸€äº›åœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å˜é‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  plugins: [</div><div class="line">    new webpack.DefinePlugin(&#123;</div><div class="line">      VERSION: JSON.stringfy(&apos;v1.1.0&apos;), // const VERSION = &apos;v1.1.0&apos;</div><div class="line">      TWO: &apos;1 + 1&apos;, // const TWO = 2</div><div class="line">      BROWSER_SUPPORT: true, // const BROWSER_SUPPORT = &apos;true&apos;</div><div class="line">      CONSTANTS: &#123;</div><div class="line">        APP_VERSION: JSON.stringfy(&apos;1.1.1&apos;)</div><div class="line">      &#125; // const CONSTANTS = &#123; APP_VERSION: &apos;1.1.1&apos;&#125;</div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>é…ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åº”ç”¨ä»£ç ä¸­ï¼Œè®¿é—®é…ç½®å¥½çš„å˜é‡äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">console.log(VERSION)</div></pre></td></tr></table></figure><p>æœ‰å…³é…ç½®çš„å€¼ï¼Œç®€è¿°ä¸€ä¸‹é…ç½®è§„åˆ™ï¼š</p><ul><li><p>å¦‚æœé…ç½®çš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²ä¼šè¢«å½“åšä»£ç ç‰‡æ®µæ¥æ‰§è¡Œï¼Œå…¶ç»“æœå°†ä½œä¸ºæœ€ç»ˆé…ç½®çš„å€¼ã€‚</p></li><li><p>å¦‚æœé…ç½®çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯å¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p></li><li><p>å¦‚æœé…ç½®çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æ‰€æœ‰keyä¼šä»¥åŒæ ·çš„æ–¹å¼å»å®šä¹‰ã€‚</p></li></ul><hr><h6 id="CopyWebpackPlugin"><a href="#CopyWebpackPlugin" class="headerlink" title="CopyWebpackPlugin"></a>CopyWebpackPlugin</h6><p>é€šå¸¸æˆ‘ä»¬ä¼šæŠŠæºç å’Œèµ„æºæ–‡ä»¶æ”¾åœ¨é¡¹ç›®çš„srcç›®å½•ä¸‹ï¼Œæ„å»ºå®Œæˆåä¼šæœ‰ä¸€ä¸ªdistç›®å½•ï¼Œæˆ‘ä»¬ä¼šç›´æ¥æ‹¿distç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥å‘å¸ƒã€‚æœ‰äº›æ–‡ä»¶æ²¡æœ‰ç»è¿‡webpackå¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å®ƒä»¬ä¹Ÿèƒ½å‡ºç°åœ¨distç›®å½•ä¸‹ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨CopyWebpackPluginæ¥å¤„ç†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">const CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  plugins: [</div><div class="line">    new CopyWebpackPlugin([</div><div class="line">       &#123; from: &apos;src/*.txt&apos;, to: &apos;dist/*.txt&apos; &#125; // from: é…ç½®æ¥æºï¼›to: é…ç½®ç›®æ ‡</div><div class="line">    ])</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr><h6 id="ExtractTextWebpackPlugin"><a href="#ExtractTextWebpackPlugin" class="headerlink" title="ExtractTextWebpackPlugin"></a>ExtractTextWebpackPlugin</h6><p>é€šå¸¸CSSç»è¿‡ç›¸åº”çš„loaderå¤„ç†åï¼Œä¼šè½¬æ¢ä¸ºJSï¼Œå’Œindex.jsä¸€èµ·æ‰“åŒ…ã€‚å¦‚æœéœ€è¦å•ç‹¬æŠŠCSSæ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œå°±éœ€è¦ä½¿ç”¨extract-text-webpack-pluginæ’ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">const ExtractTextWebpackPlugin = require(&apos;extract-text-webpack-plugin&apos;)</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.css$/,</div><div class="line">        use: ExtractTextWebpackPlugin.extract(&#123;</div><div class="line">          fallback: &apos;style-loader&apos;,</div><div class="line">          use: &apos;css-loader&apos;</div><div class="line">        &#125;)</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  plugins: [</div><div class="line">    //  style.css ä½œä¸ºå•ç‹¬åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶å</div><div class="line">    new ExtractTextWebpackPlugin(&apos;style.css&apos;)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å®ƒè¿˜å¯ä»¥ä¸ºæ¯ä¸€ä¸ªå…¥å£åˆ›å»ºå•ç‹¬åˆ†ç¦»çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œæœ€å¥½è¿™æ ·é…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">plugins: [</div><div class="line">  new ExtractTextPlugin(&apos;[name].css&apos;),</div><div class="line">]</div></pre></td></tr></table></figure><hr><h6 id="ProvidePlugin"><a href="#ProvidePlugin" class="headerlink" title="ProvidePlugin"></a>ProvidePlugin</h6><p>ProvidePluginæ˜¯webpackçš„å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡webpack.ProvidePluginç›´æ¥å¼•ç”¨ã€‚</p><p>ä¸»è¦ç”¨äºè‡ªåŠ¨åŠ è½½æ¨¡å—ï¼Œä¸å¿…åˆ°å¤„importæˆ–require</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">new webpack.ProvidePlugin(&#123;</div><div class="line">  identifier: &apos;module&apos;,</div><div class="line">  // ...</div><div class="line">&#125;)</div><div class="line"></div><div class="line">or</div><div class="line"></div><div class="line">new webpack.ProvidePlugin(&#123;</div><div class="line">  identifier: [&apos;module&apos;, &apos;property&apos;], // å³å¼•ç”¨ module ä¸‹çš„ propertyï¼Œç±»ä¼¼ import &#123; property &#125; from &apos;module&apos;</div><div class="line">  // ...</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>ä»»ä½•æ—¶å€™ï¼Œå½“identifierè¢«å½“ä½œæœªèµ‹å€¼çš„å˜é‡æ—¶ï¼Œmoduleå°±ä¼šè‡ªåŠ¨è¢«åŠ è½½ï¼Œå¹¶ä¸”identifierä¼šè¢«è¿™ä¸ªmoduleè¾“å‡ºçš„å†…å®¹æ‰€èµ‹å€¼ã€‚</p><p>æ³¨ï¼šå¦‚æœæ˜¯ESçš„default exportï¼Œé‚£ä¹ˆä½ éœ€è¦æŒ‡å®šæ¨¡å—çš„defaultå±æ€§ï¼šidentifier: [â€˜moduleâ€™, â€˜defaultâ€™]ã€‚</p><hr><h6 id="IgnorePlugin"><a href="#IgnorePlugin" class="headerlink" title="IgnorePlugin"></a>IgnorePlugin</h6><p>IgnorePluginæ˜¯webpackçš„å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡webpack.IgnorePluginç›´æ¥å¼•ç”¨ã€‚</p><p>ä¸»è¦ç”¨äºå¿½ç•¥æŸäº›ç‰¹å®šçš„æ¨¡å—ï¼Œè®©webpackä¸æŠŠè¿™äº›æŒ‡å®šçš„æ¨¡å—æ‰“åŒ…è¿›å»ã€‚</p><p>é…ç½®å‚æ•°ï¼šåŒ¹é…å¼•å…¥æ¨¡å—è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ¨¡å—çš„ä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  // ...</div><div class="line">  plugins: [</div><div class="line">    new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure><hr>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;å¯¼è¯­&quot;&gt;&lt;a href=&quot;#å¯¼è¯­&quot; class=&quot;headerlink&quot; title=&quot;å¯¼è¯­&quot;&gt;&lt;/a&gt;å¯¼è¯­&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="å‰ç«¯" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="Webpack" scheme="http://yoursite.com/tags/Webpack/"/>
    
  </entry>
  
</feed>
