{"meta":{"title":"W | ä¸ªäººåšå®¢ | webå‰ç«¯","subtitle":"wangxiaobai","description":"å‰ç«¯","author":"wangxiaobai","url":"http://yoursite.com"},"pages":[{"title":"categories","date":"2018-04-11T08:28:54.000Z","updated":"2018-04-11T08:29:04.000Z","comments":false,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-04-11T08:28:32.000Z","updated":"2018-04-11T08:28:44.000Z","comments":false,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€","slug":"é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€","date":"2019-11-25T01:46:52.000Z","updated":"2019-11-25T08:08:23.863Z","comments":true,"path":"2019/11/25/é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€/","link":"","permalink":"http://yoursite.com/2019/11/25/é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€/","excerpt":"","text":"å¯¼è¯­æœ¬ç³»åˆ—æ—¨åœ¨æ•´ç† JS å¸¸è§é¢è¯•é¢˜ï¼Œå¸®åŠ©æ¢³ç† JS åŸºç¡€çŸ¥è¯†ç‚¹ã€‚ ğŸŒ° [â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡ºç»“æœparseIntè§£æä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šåŸºæ•°çš„æ•´æ•°ã€‚ 1const intValue = parseInt(string[, radix]); string è¦è¢«è§£æçš„å€¼ã€‚å¦‚æœå‚æ•°ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½ç¬¦ä¼šè¢«å¿½ç•¥ã€‚ radix ä¸€ä¸ªä»‹äº 2~36ä¹‹é—´çš„æ•´æ•°ï¼Œè¡¨ç¤ºä¸Šè¿°å­—ç¬¦ä¸²çš„åŸºæ•°ï¼Œé»˜è®¤å€¼ä¸º 10ã€‚ parseInt è¿”å›ä¸€ä¸ªæ•´æ•°æˆ– NaNã€‚ 123parseInt(100); // 100parseInt(100, 10); // 1*10*10 + 0*10*1 + 0*10*0 = 100parseInt(100, 2); // 1*2*2 + 0*2*1 + 0*2*0 = 4 åœ¨ radix ä¸º undefined ï¼Œæˆ– radix ä¸º 0 æˆ–æ²¡æœ‰æŒ‡å®šçš„æƒ…å†µä¸‹ï¼ŒJS ä½œå¦‚ä¸‹å¤„ç†ï¼š string ä»¥ â€˜0xâ€™ æˆ– â€˜0Xâ€™ å¼€å¤´ï¼Œåˆ™ radix ä¸º 16ã€‚ string ä»¥ â€˜0â€™ å¼€å¤´ï¼Œradix ä¸º 8 æˆ–è€… 10ï¼Œå…·ä½“å“ªä¸ªåŸºæ•°ç”±å®ç°ç¯å¢ƒå†³å®šã€‚ string ä»¥å…¶å®ƒä»»ä½•å€¼å¼€å¤´ï¼Œåˆ™ radix ä¸º 10ã€‚ mapåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚ 123var new_array = arr.map(function callback(currentValue[,index[, array]]) &#123; // Return element for new_array &#125;[, thisArg]) callback å›è°ƒå‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º currentValue(æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„å€¼)ã€index(æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•)ã€array(map æ–¹æ³•ä¸­è¢«è°ƒç”¨çš„æ•°ç»„)ã€‚ 12const arr = [1, 2, 3]arr.map(num =&gt; num * 2) // [2, 4, 6] [â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡ºå¯¹äºæ¯ä¸ªè¿­ä»£ mapï¼ŒparseInt() ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²å’ŒåŸºæ•°ã€‚æ‰€ä»¥å®é™…æ‰§è¡Œçš„ä»£ç ä¸ºï¼š 1['1', '2', '3'].map(parseInt((item, index) =&gt; parseInt(item, index)) æ‰§è¡Œæ­¥éª¤ä¸ºï¼š 123parseInt('1', 0); // 1 (10 è¿›åˆ¶)parseInt('2', 1); // NaN radix(2-36)parseInt('3', 2); // NaN ä¸ç¬¦åˆ2è¿›åˆ¶ä½æ•°å–å€¼(0-1) æ‰€ä»¥ï¼š 1['1', '2', '3'].map(parseInt) // [1, NaN, NaN] ğŸŒ° ä»€ä¹ˆæ˜¯èŠ‚æµå’Œé˜²æŠ–ï¼ŸåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿé˜²æŠ–åŠ¨ä½œç»‘å®šäº‹ä»¶ï¼ŒåŠ¨ä½œå‘ç”Ÿåä¸€å®šæ—¶é—´å†…è§¦å‘æ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¦‚æœè¯¥åŠ¨ä½œåˆå‘ç”Ÿï¼Œåˆ™é‡æ–°ç­‰å¾…ä¸€å®šæ—¶é—´å†è§¦å‘äº‹ä»¶ã€‚ 12345678910111213141516171819/** * é˜²æŠ– debounce å®šæ—¶å™¨ * @param fn &#123;function&#125; å›è°ƒå‡½æ•° * @param wait &#123;number&#125; æ—¶é—´é—´éš” * @author wangxiaobai */export function debounce (fn, wait) &#123; let timer = null return () =&gt; &#123; // æ¸…é™¤ä¸Šæ¬¡æ‰§è¡Œå¾—å®šæ—¶å™¨ if (timer) &#123; clearTimeout(timer) &#125; // è®¾ç«‹æ–°å®šæ—¶å™¨ timer = setTimeout(() =&gt; &#123; fn.apply(this, arguments) &#125;, wait) &#125;&#125; èŠ‚æµåŠ¨ä½œç»‘å®šäº‹ä»¶ï¼ŒåŠ¨ä½œå‘ç”Ÿåä¸€å®šæ—¶é—´å†…è§¦å‘äº‹ä»¶ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¦‚æœè¯¥åŠ¨ä½œåˆå‘ç”Ÿï¼Œåˆ™æ— è§†è¯¥åŠ¨ä½œï¼Œç›´åˆ°äº‹ä»¶æ‰§è¡Œå®Œåï¼Œæ‰èƒ½é‡æ–°è§¦å‘ã€‚ 1234567891011121314151617/** * èŠ‚æµ throttle å®šæ—¶å™¨ * @param fn &#123;function&#125; å›è°ƒå‡½æ•° * @param wait &#123;number&#125; æ—¶é—´é—´éš” * @author wangxiaobai */export function throttle (fn, wait) &#123; // ä¸Šä¸€æ¬¡å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ let activeTime = 0 return () =&gt; &#123; let currentTime = +new Date() if (currentTime - activeTime &gt; wait) &#123; fn.apply(this, arguments) activeTime = currentTime &#125; &#125;&#125;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://yoursite.com/tags/é¢è¯•é¢˜/"}]},{"title":"CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC","slug":"CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC","date":"2019-08-26T08:24:52.000Z","updated":"2019-08-29T08:28:46.000Z","comments":true,"path":"2019/08/26/CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC/","link":"","permalink":"http://yoursite.com/2019/08/26/CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC/","excerpt":"","text":"å¯¼è¯­ BFC (Block Formatting Context) å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œé¡µé¢çš„å¯è§†åŒ– CSS æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œå—å†…çš„å­å…ƒç´ å¸ƒå±€ä¸å—å¤–çš„å…ƒç´ äº’ä¸å¹²æ‰°ã€‚ BFC è§£å†³çš„é—®é¢˜ æµ®åŠ¨å®šä½ æ¶ˆé™¤å¤–è¾¹è·æŠ˜å  æ¸…é™¤æµ®åŠ¨ è‡ªé€‚åº”å¤šæ å¸ƒå±€â€¦ BFC çš„åˆ›å»º bodyæ ¹å…ƒç´  æµ®åŠ¨: float é™¤ none ä»¥å¤–çš„å€¼ ç»å¯¹å®šä½: position (absolute, fixed) overflow å€¼ä¸ä¸º visible å¼¹æ€§å¸ƒå±€æˆ–ç½‘æ ¼å¸ƒå±€ BFC çš„çº¦æŸè§„åˆ™ å±äºåŒä¸€ä¸ª BFC ä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„ Box çš„ margin ä¼šå‘ç”ŸæŠ˜å ã€‚ æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹è·ä¸åŒ…å«å—çš„å·¦è¾¹ç•Œç›¸æ¥è§¦ï¼Œå³ä½¿æµ®åŠ¨å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ BFC çš„åŒºåŸŸä¸ä¼šä¸ float çš„å…ƒç´ åŒºåŸŸé‡å  è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®— BFC çš„åº”ç”¨é˜²æ­¢ margin é‡å 1234567891011121314&lt;body&gt; &lt;p&gt;top&lt;/p&gt; &lt;p&gt;bottom&lt;/p&gt;&lt;/body&gt;&lt;style&gt; p &#123; width: 100px; height: 100px; background: yellow; line-height: 100px; margin: 10px; text-align: center &#125;&lt;/style&gt; å±•ç¤ºæ•ˆæœï¼š ä¸¤ä¸ª box ä¸­é—´çš„é—´è·ä¸º 10pxï¼Œè€Œä¸æ˜¯ 20pxï¼Œå› ä¸ºå®ƒä»¬å¤„äºåŒä¸€ä¸ª BFC ä¸­(body)ã€‚ è§£å†³æ–¹æ¡ˆä¸ºç»™ç¬¬äºŒä¸ª box åŒ…ä¸€å±‚ divï¼Œè®¾ç½®å…¶ overflow å±æ€§ï¼Œä½¿å®ƒä»¬å¤„äºä¸åŒçš„ BFCã€‚ 12345678910111213141516171819&lt;body&gt; &lt;p&gt;top&lt;/p&gt; &lt;div&gt; &lt;p&gt;bottom&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;style&gt; p &#123; width: 100px; height: 100px; background: yellow; line-height: 100px; margin: 10px; text-align: center &#125; div &#123; overflow: hidden; &#125;&lt;/style&gt; å±•ç¤ºæ•ˆæœï¼š è®©æµ®åŠ¨å†…å®¹ä¸å‘¨å›´å†…å®¹ç­‰é«˜123456789101112131415161718&lt;div class=\"box\"&gt; &lt;div class=\"float\"&gt;æµ®åŠ¨å…ƒç´ &lt;/div&gt; &lt;p&gt;æœªæµ®åŠ¨å…ƒç´ &lt;/p&gt;&lt;/div&gt;&lt;style&gt;.box &#123; background-color: rgb(224, 206, 247); border: 5px solid rebeccapurple;&#125;.float &#123; float: left; width: 200px; height: 150px; background-color: white; border:1px solid black; padding: 10px;&#125; &lt;/style&gt; å±•ç¤ºæ•ˆæœï¼š ç”±äºæµ®åŠ¨ï¼Œä½¿å¾—æµ®åŠ¨å…ƒç´ çš„é«˜åº¦é«˜äºæ—è¾¹çš„å…ƒç´ ï¼Œè§£å†³æ–¹å¼ä¸ºä½¿çˆ¶ box ç”Ÿæˆä¸€ä¸ª BFCï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617181920&lt;div class=\"box\"&gt; &lt;div class=\"float\"&gt;æµ®åŠ¨å…ƒç´ &lt;/div&gt; &lt;p&gt;æœªæµ®åŠ¨å…ƒç´ &lt;/p&gt;&lt;/div&gt;&lt;style&gt;.box &#123; background-color: rgb(224, 206, 247); border: 5px solid rebeccapurple; overflow: auto;&#125;.float &#123; float: left; width: 200px; height: 150px; background-color: white; border:1px solid black; padding: 10px;&#125; &lt;/style&gt; å±•ç¤ºæ•ˆæœï¼š é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–12345678910111213141516&lt;div class=\"float\"&gt;æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ &lt;/div&gt;&lt;div class=\"box\"&gt;æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ &lt;/div&gt;&lt;style&gt;.float &#123; width: 100px; height: 100px; background: #eee; float: left;&#125;.box &#123; width: 200px; height: 200px; background: yellow;&#125;&lt;/style&gt; å±•ç¤ºæ•ˆæœï¼š ç¬¬äºŒä¸ªå…ƒç´ æœ‰éƒ¨åˆ†è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–ï¼Œæ­¤æ—¶å¯è§¦å‘ç¬¬äºŒä¸ªå…ƒç´ çš„ BFC ç‰¹æ€§ï¼Œåœ¨ç¬¬äºŒä¸ªå…ƒç´ ä¸­åŠ å…¥ overflow: hiddenã€‚ 1234567891011121314151617&lt;div class=\"float\"&gt;æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ &lt;/div&gt;&lt;div class=\"box\"&gt;æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ &lt;/div&gt;&lt;style&gt; .float &#123; width: 100px; height: 100px; background: #eee; float: left; &#125; .box &#123; overflow: hidden; width: 200px; height: 200px; background: yellow; &#125;&lt;/style&gt; å±•ç¤ºæ•ˆæœï¼š æ­¤æ–¹æ³•å¯ç”¨æ¥å®ç°ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€ å‚è€ƒ BFCåŸç†è§£æ 10 åˆ†é’Ÿç†è§£ BFC åŸç†","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://yoursite.com/tags/CSS/"}]},{"title":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹","slug":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹","date":"2019-08-18T10:34:52.000Z","updated":"2019-08-17T17:13:30.468Z","comments":true,"path":"2019/08/18/Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹/","link":"","permalink":"http://yoursite.com/2019/08/18/Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹/","excerpt":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£","text":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£ ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹ä»çŠ¶æ€ç”ŸæˆDOMï¼Œå†è¾“å‡ºåˆ°ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ä¸€æ•´å¥—æµç¨‹å«åšæ¸²æŸ“ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ä¼šä¸æ–­åœ°é‡æ–°æ¸²æŸ“ã€‚å“åº”å¼ç³»ç»Ÿèµ‹äºˆæ¡†æ¶é‡æ–°æ¸²æŸ“çš„èƒ½åŠ›ï¼Œå…¶é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å˜åŒ–ä¾¦æµ‹ã€‚ ç®€å•æ¥è¯´ï¼Œå˜åŒ–ä¾¦æµ‹çš„ä½œç”¨å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥è§†å›¾è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚ Vue.js 2.0 å¼•å…¥äº†è™šæ‹Ÿ DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ– (ç»„ä»¶å®ä¾‹) ï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ã€‚ å¦‚ä½•è¿½è¸ªå˜åŒ–é¦–å…ˆï¼Œåœ¨ JS ä¸­ï¼Œé€šè¿‡ Object.defineProperty ä¾¦æµ‹å¯¹è±¡å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å“åº”å¼æœ€æ ¹æœ¬çš„ä¾èµ–ã€‚ 123456789101112131415function defineReactive (data, key, val) &#123; Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; return val &#125;, set: function(newVal) &#123; if (val === newVal) &#123; return &#125; val = newVal &#125; &#125;)&#125; æ­¤å¤„ç”¨ defineReactive å¯¹ Object.defineProperty è¿›è¡Œå°è£…ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å¯¹è±¡è¿›è¡Œå˜åŒ–è¿½è¸ªã€‚å°è£…å¥½ä¹‹åï¼Œæ¯å½“ä» data çš„ key ä¸­è¯»å–æ•°æ®æ—¶ï¼Œgetter å‡½æ•°è¢«è§¦å‘ï¼›æ¯å½“åœ¨ data çš„ key ä¸­è®¾ç½®æ–°æ•°æ®æ—¶ï¼Œ setter å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚ ç”±æ­¤å¯è§ï¼ŒObject.defineProperty æ˜¯å¯¹å·²æœ‰å±æ€§è¿›è¡Œçš„åŠ«æŒæ“ä½œï¼Œæ‰€ä»¥ Vue æ‰è¦æ±‚äº‹å…ˆå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨ data ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•å“åº”å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚è¢«åŠ«æŒçš„å±æ€§ä¼šæœ‰ç›¸åº”çš„ getã€set æ–¹æ³•ã€‚ å¦‚ä½•æ”¶é›†ä¾èµ–æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š 12345678910111213141516171819let globalObj = &#123; text1: 'text1'&#125;;let o1 = new Vue(&#123; template: `&lt;div&gt; &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; &lt;div&gt;`, data: globalObj&#125;);let o2 = new Vue(&#123; template: `&lt;div&gt; &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; &lt;div&gt;`, data: globalObj&#125;); è¯¥æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªvmå®ä¾‹ä½¿ç”¨äº†text1ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å‘ä½¿ç”¨äº†å®ƒçš„åœ°æ–¹å‘é€é€šçŸ¥æ¥æ›´æ–°è§†å›¾ï¼Ÿ å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼Œå³æŠŠç”¨åˆ°äº†æ•°æ® text1 çš„åœ°æ–¹æ”¶é›†èµ·æ¥ï¼Œç„¶åå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠä¹‹å‰æ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘æ›´æ–°ä¸€éã€‚ å³ï¼šåœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–ã€‚ ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰ æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ã€‚æˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œç”¨å®ƒæ¥ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€é€šçŸ¥ç­‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536export default class Dep &#123; constructor () &#123; this.subs = [] // è§‚å¯Ÿè€…é›†åˆ &#125; // æ·»åŠ è§‚å¯Ÿè€… addSub (sub) &#123; this.subs.push(sub) &#125; // ç§»é™¤è§‚å¯Ÿè€… removeSub (sub) &#123; remove(this.subs, sub) &#125; depend () &#123; // å¦‚æœå­˜åœ¨ Dep.targetï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†æ“ä½œ if (Dep.target) &#123; this.addSub(Dep.target) &#125; &#125; notify () &#123; const subs = this.subs.slice() // é¿å…æ±¡æŸ“åŸæ¥çš„é›†åˆ for (let i = 0, l = subs.length; i &lt; l; i++) &#123; subs[i].update() // æ›´æ–° &#125; &#125;&#125;function remove(arr, item) &#123; if (arr.length) &#123; const index = arr.indexOf(item) if (index &gt; -1) &#123; return arr.splice(index, 1) &#125; &#125;&#125; æ”¹é€  defineReactive 123456789101112131415161718function defineReactive (data, key, val) &#123; let dep = new Dep() Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; dep.depend() return val &#125;, set: function(newVal) &#123; if (val === newVal) &#123; return &#125; val = newVal dep.notify() &#125; &#125;)&#125; ä»€ä¹ˆæ˜¯ä¾èµ–å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬è¦é€šçŸ¥ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç”¨åˆ°æ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ã€ä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·å†™çš„å‡½æ•°ç­‰ç­‰ï¼Œè¿™æ—¶éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›æƒ…å†µçš„ç±»ã€‚ ç„¶åï¼Œæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥å•Šï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åï¼Œå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ æ”¶é›†è°ï¼ŸWatcher! ä»€ä¹ˆæ˜¯ WatcherWatcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®ƒï¼Œå®ƒå†é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ 123vm.$watch('a.b.c', function(newVal, oldVal) &#123; // do something&#125;) è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å‡½æ•°ã€‚ æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c å±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ã€‚ç„¶åï¼Œå½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥ watcherã€‚æ¥ç€ï¼Œwatcher åœ¨æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚ 1234567891011121314151617181920212223242526export default class Watcher &#123; // ... constructor ( vm: Component, // ç»„ä»¶å®ä¾‹ expOrFn: string | Function, // è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œæˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦èƒ½è§¦å‘å–å€¼æ“ä½œ cb: Function // è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ ) &#123; this.vm = vm // Watcheræœ‰ä¸€ä¸ª vm å±æ€§ï¼Œè¡¨æ˜å®ƒæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„ this.cb = cb // å›è°ƒ this.getter = parsePath(expOrFn) this.value = this.get() &#125; get () &#123; // è§¦å‘å–å€¼æ“ä½œï¼Œè¿›è€Œè§¦å‘å±æ€§çš„getter Dep.target = this let value = this.getter.call(this.vm, this.vm) Dep.target = null return value &#125; update () &#123; // æ›´æ–° const oldValue = this.value this.value = this.get() this.cb.call(this.vm, this.value, oldValue) &#125;&#125; è¿™æ®µä»£ç å¯ä»¥å°†è‡ªå·±ä¸»åŠ¨æ·»åŠ åˆ° data.a.b.c çš„ Dep ä¸­ã€‚ åœ¨ get æ–¹æ³•ä¸­å…ˆæŠŠ Dep.target è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰ watcher å®ä¾‹ï¼Œç„¶åå†è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ï¼Œè¿™å°±ä¼šè§¦å‘ getterï¼Œè§¦å‘äº† getterï¼Œå°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„é€»è¾‘ã€‚ åªè¦ç°åœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åå†è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨æ·»åŠ åˆ° keypath çš„ Dep ä¸­ã€‚ ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­åï¼Œæ¯å½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè®©ä¾èµ–åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ã€‚ ä¸ç®¡ç”¨æˆ·æ‰§è¡Œçš„æ˜¯ vm.$watch(â€˜a.b.câ€™, (value, oldValue) =&gt; {})ï¼Œè¿˜æ˜¯æ¨¡æ¿ä¸­çš„ dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å˜åŒ–ã€‚ parsePathå‡½æ•°ï¼š 123456789101112131415const bailRE = /[^\\w.$]/export function parsePath(path) &#123; if (bailRE.test(path)) &#123; return &#125; const segments = path.split('.') return function(obj) &#123; for (let i = 0; i &lt; segments.length; i++) &#123; if (!obj) return obj = obj[segments[i]] &#125; return obj &#125;&#125; é€’å½’ä¾¦æµ‹æ‰€æœ‰Keyå‰é¢çš„å®ä¾‹ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ•°æ®ä¸­çš„æ‰€æœ‰å±æ€§éƒ½ä¾¦æµ‹åˆ°ï¼Œæ‰€ä»¥è¦å°è£…ä¸€ä¸ªObserverç±»ã€‚Observerçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®å†…çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬å­å±æ€§ï¼‰éƒ½è½¬æ¢æˆ getter/setter çš„å½¢å¼ï¼Œç„¶åå»è¿½è¸ªå®ƒä»¬çš„å˜åŒ–ï¼š 123456789101112131415161718192021222324252627282930313233343536export class Observer &#123; constructor (value) &#123; this.value = value if (!Array.isArray(value)) &#123; this.walk(value) &#125; &#125; walk (obj) &#123; const keys = Object.keys(obj) for (let i = 0; i &lt; keys.length; i++) &#123; defineReactive (obj, keys[i], obj[keys[i]]) &#125; &#125;&#125;function defineReactive(data, key, val) &#123; if (typeof val === 'object') &#123; new Observer(val) &#125; let dep = new Dep() Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; dep.depend() return val &#125;, set: function(newVal) &#123; if (val === newVal) &#123; return &#125; val = newVal dep.notify() &#125; &#125;)&#125; Observer ç±»ï¼Œç”¨äºå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢æˆè¢«ä¾¦æµ‹çš„ objectã€‚ åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼Œåªæœ‰ Object ç±»å‹çš„æ•°æ®æ‰ä¼šè°ƒç”¨ walk å°†æ¯ä¸€ä¸ªå±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ æœ€åï¼Œåœ¨ defineReactive ä¸­æ–°å¢ new Observer(val) æ¥é€’å½’å­å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ data ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ å½“ data ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å±æ€§å¯¹åº”çš„ä¾èµ–å°±ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚ æ€»ç»“å˜åŒ–ä¾¦æµ‹å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦èƒ½ä¾¦æµ‹åˆ°å¹¶å‘å‡ºé€šçŸ¥ã€‚ Object å¯ä»¥é€šè¿‡ Object.defineProperty å°†å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œè¯»å–æ•°æ®æ—¶ä¼šè§¦å‘ getterï¼Œä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ setterã€‚ æˆ‘ä»¬éœ€è¦åœ¨ getter ä¸­æ”¶é›†æœ‰å“ªäº›ä¾èµ–ä½¿ç”¨äº†æ•°æ®ã€‚å½“ setter è¢«è§¦å‘æ—¶ï¼Œå»é€šçŸ¥ getter ä¸­æ”¶é›†çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ æ”¶é›†ä¾èµ–éœ€è¦ä¸ºä¾èµ–æ‰¾ä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼Œä¸ºæ­¤åˆ›å»ºäº† Depï¼Œå®ƒç”¨æ¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯ç­‰ã€‚ æ‰€è°“çš„ä¾èµ–ï¼Œå…¶å®å°±æ˜¯ Watcherã€‚æŠŠ Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚ Watcher çš„åŸç†æ˜¯å…ˆæŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€å”¯ä¸€çš„æŒ‡å®šä½ç½® (Dep.target)ï¼Œç„¶åè¯»å–è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¯»å–äº†è¿™ä¸ªæ•°æ®ï¼Œå› æ­¤ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getter ã€‚æ¥ç€ï¼Œåœ¨ getter ä¸­å°±ä¼šä»å…¨å±€å”¯ä¸€çš„ä½ç½®è¯»å–æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­å»ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒWatcher å¯ä»¥ä¸»åŠ¨å»è®¢é˜…ä»»æ„ä¸€ä¸ªæ•°æ®çš„å˜åŒ–ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† Observer ç±»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ª object ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å­æ•°æ®ï¼‰éƒ½è½¬æ¢æˆå“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼šä¾¦æµ‹ object ä¸­æ‰€æœ‰æ•°æ®çš„å˜åŒ–ã€‚ åœ¨ Vue ä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§æˆ–åˆ é™¤å±æ€§éƒ½æ— æ³•è¢«ä¾¦æµ‹åˆ°ã€‚ Object é€šè¿‡ Observer è½¬æ¢æˆäº† getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ã€‚ å½“å¤–ç•Œé€šè¿‡ Watcher è¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ getter ä»è€Œå°† Watcher æ·»åŠ åˆ° Dep ä¸­ã€‚ å½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ setterï¼Œä»è€Œå‘ Dep ä¸­çš„ä¾èµ–å‘é€é€šçŸ¥ã€‚ Watcher æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šåƒå¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://yoursite.com/tags/Vue/"}]},{"title":"JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ","slug":"JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ","date":"2019-07-26T07:18:52.000Z","updated":"2019-07-26T07:28:37.956Z","comments":true,"path":"2019/07/26/JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ/","link":"","permalink":"http://yoursite.com/2019/07/26/JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ/","excerpt":"å¯¼è¯­ æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚","text":"å¯¼è¯­ æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ ç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹æ‰§è¡Œä¸Šä¸‹æ–‡æ€»å…±æœ‰ä¸‰ç§ç±»å‹ï¼š å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šåªæœ‰ä¸€ä¸ªï¼Œæµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡å°±æ˜¯ window å¯¹è±¡ï¼Œthis ä¼šæŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šå­˜åœ¨æ— æ•°ä¸ªï¼Œåªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šè¿è¡Œåœ¨ Eval å‡½æ•°ä¸­çš„ä»£ç ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ¥ä¸‹æ¥é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å†™äº†é‚£ä¹ˆå¤šå‡½æ•°ï¼Œå¦‚ä½•ç®¡ç†åˆ›å»ºçš„é‚£ä¹ˆå¤šæ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ Javascript åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œä¹Ÿå«è°ƒç”¨æ ˆï¼Œæ¥ç®¡ç†åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ é¦–æ¬¡è¿è¡Œ Javascript ä»£ç æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ Push åˆ°å½“å‰çš„æ‰§è¡Œæ ˆä¸­ã€‚æ¯å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨ï¼Œå¼•æ“éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ Push åˆ°å½“å‰æ‰§è¡Œæ ˆçš„æ ˆé¡¶ã€‚ æ ¹æ®æ‰§è¡Œæ ˆ LIFO è§„åˆ™ï¼Œå½“æ ˆé¡¶å‡½æ•°è¿è¡Œå®Œæˆåï¼Œå…¶å¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°†ä¼šä»æ ˆä¸­ Pop å‡ºï¼Œä¸Šä¸‹æ–‡æ§åˆ¶æƒå°†ä¼šç§»åˆ°å½“å‰æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ 1234567891011121314var a = 'Hello World!';function first() &#123; console.log('Inside first function'); second(); console.log('Again inside first function'); &#125;function second() &#123; console.log('Inside second function'); &#125;first(); console.log('Inside Global Execution Context'); æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µåˆ›å»ºï¼š1ï¼‰ åˆ›å»ºé˜¶æ®µ 2ï¼‰æ‰§è¡Œé˜¶æ®µ åˆ›å»ºé˜¶æ®µ ç¡®å®š this çš„å€¼ï¼Œä¹Ÿè¢«ç§°ä¸º This Binding LexicalEnvironment-è¯æ³•ç¯å¢ƒç»„ä»¶è¢«åˆ›å»º VariableEnvironment-å˜é‡ç¯å¢ƒç»„ä»¶è¢«åˆ›å»º 12345ExecutionContext = &#123; ThisBinding: &lt;this value&gt;, // ç¡®å®š this LexicalEnvironment: &#123;...&#125;, // è¯æ³•ç¯å¢ƒ VariableEnvironment: &#123;...&#125; // å˜é‡ç¯å¢ƒ&#125; This Binding å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­ this çš„å€¼æŒ‡å‘ window å¯¹è±¡ï¼Œè€Œåœ¨ nodejs ä¸­æŒ‡å‘è¿™ä¸ªæ–‡ä»¶çš„ module å¯¹è±¡ã€‚ å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis çš„å€¼å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚å…·ä½“æœ‰ï¼šé»˜è®¤ç»‘å®šã€éšå¼ç»‘å®šã€æ˜¾ç¤ºç»‘å®šã€new ç»‘å®šç­‰ã€‚ è¯æ³•ç¯å¢ƒè¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š ç¯å¢ƒè®°å½•ï¼šå­˜å‚¨å˜é‡å’Œå‡½æ•°å£°æ˜çš„å®é™…ä½ç½® å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ï¼šå¯ä»¥è®¿é—®å…¶å¤–éƒ¨è¯æ³•ç¯å¢ƒ è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹ï¼š å…¨å±€ç¯å¢ƒï¼šæ˜¯ä¸€ä¸ªæ²¡æœ‰å¤–éƒ¨ç¯å¢ƒçš„è¯æ³•ç¯å¢ƒï¼Œå…¶å¤–éƒ¨ç¯å¢ƒå¼•ç”¨ä¸º nullã€‚æ‹¥æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰åŠå…¶å…³è”çš„æ–¹æ³•å’Œå±æ€§ä»¥åŠä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰çš„å…¨å±€å˜é‡ï¼Œ this çš„å€¼æŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ å‡½æ•°ç¯å¢ƒï¼šç”¨æˆ·åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡è¢«å­˜å‚¨åœ¨ç¯å¢ƒè®°å½•ä¸­ï¼ŒåŒ…å«äº† arguments å¯¹è±¡ã€‚å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨å¯ä»¥æ˜¯å…¨å±€ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ…å«å†…éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°ç¯å¢ƒï¼Œ 1234567891011121314151617GlobalExectionContext = &#123; // å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ LexicalEnvironment: &#123; // è¯æ³•ç¯å¢ƒ EnvironmentRecord: &#123; // ç¯å¢ƒè®°å½• Type: \"Object\", // å…¨å±€ç¯å¢ƒ // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ outer: &lt;null&gt; // å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ &#125; &#125;FunctionExectionContext = &#123; // å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ LexicalEnvironment: &#123; // è¯æ³•ç¯å¢ƒ EnvironmentRecord: &#123; // ç¯å¢ƒè®°å½• Type: \"Declarative\", // å‡½æ•°ç¯å¢ƒ // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ // å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ outer: &lt;Global or outer function environment reference&gt; &#125; &#125; å˜é‡ç¯å¢ƒ å˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå› æ­¤å®ƒå…·æœ‰ä¸Šé¢å®šä¹‰çš„è¯æ³•ç¯å¢ƒçš„æ‰€æœ‰å±æ€§ã€‚ åœ¨ES6ä¸­ï¼Œè¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒçš„åŒºåˆ«åœ¨äºå‰è€…ç”¨äºå­˜å‚¨å‡½æ•°å£°æ˜å’Œå˜é‡(let const)ç»‘å®šï¼Œåè€…ä»…ç”¨äºå­˜å‚¨å˜é‡(var)ç»‘å®šã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647GlobalExectionContext = &#123; ThisBinding: &lt;Global Object&gt;, LexicalEnvironment: &#123; EnvironmentRecord: &#123; Type: \"Object\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ a: &lt; uninitialized &gt;, b: &lt; uninitialized &gt;, multiply: &lt; func &gt; &#125; outer: &lt;null&gt; &#125;, VariableEnvironment: &#123; EnvironmentRecord: &#123; Type: \"Object\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ c: undefined, &#125; outer: &lt;null&gt; &#125; &#125;FunctionExectionContext = &#123; ThisBinding: &lt;Global Object&gt;, LexicalEnvironment: &#123; EnvironmentRecord: &#123; Type: \"Declarative\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ Arguments: &#123;0: 20, 1: 30, length: 2&#125;, &#125;, outer: &lt;GlobalLexicalEnvironment&gt; &#125;, VariableEnvironment: &#123; EnvironmentRecord: &#123; Type: \"Declarative\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ g: undefined &#125;, outer: &lt;GlobalLexicalEnvironment&gt; &#125; &#125; å˜é‡æå‡çš„åŸå› ï¼šåœ¨åˆ›å»ºé˜¶æ®µï¼Œå‡½æ•°å£°æ˜å­˜å‚¨åœ¨ç¯å¢ƒä¸­ï¼Œè€Œå˜é‡ä¼šè¢«è®¾ç½®ä¸º undefined (var æƒ…å†µä¸‹) æˆ–ä¿æŒæœªåˆå§‹åŒ– (letã€const æƒ…å†µä¸‹)ã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥åœ¨å£°æ˜ä¹‹å‰è®¿é—® var å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœåœ¨å£°æ˜ä¹‹å‰è®¿é—® let å’Œ const å®šä¹‰çš„å˜é‡ä¼šæç¤ºå¼•ç”¨é”™è¯¯çš„åŸå› ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å˜é‡æå‡ã€‚ æ‰§è¡Œé˜¶æ®µ æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼š è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡ ä»£ç æ‰§è¡Œ è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ­¤æ—¶çš„å˜é‡å¯¹è±¡åŒ…æ‹¬ï¼ˆå¦‚ä¸‹é¡ºåºåˆå§‹åŒ–ï¼‰ï¼š å‡½æ•°æ‰€æœ‰çš„å½¢å‚ï¼šæ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸º undefinedã€‚ å‡½æ•°å£°æ˜ï¼šå¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§ã€‚ å˜é‡å£°æ˜ï¼šå¦‚æœå˜é‡åç§°ä¸å·²ç»å£°æ˜çš„å½¢å‚æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ã€‚ 123456789function foo(a) &#123; var b = 2; function c() &#123;&#125; var d = function() &#123;&#125;; b = 3;&#125;foo(1); 12345678910AO = &#123; arguments: &#123; 0: 1, length: 1 &#125;, a: 1, b: undefined, c: reference to function c()&#123;&#125;, d: undefined&#125; å½¢å‚ arguments å·²ç»æœ‰å€¼äº†ï¼Œä½†æ˜¯å˜é‡è¿˜æ˜¯ undefinedï¼Œåªæ˜¯åˆå§‹åŒ–çš„å€¼ã€‚ ä»£ç æ‰§è¡Œ è¿™ä¸ªé˜¶æ®µä¼šé¡ºåºæ‰§è¡Œä»£ç ï¼Œå¹¶ä¿®æ”¹å˜é‡çš„å€¼ã€‚ 12345678910AO = &#123; arguments: &#123; 0: 1, length: 1 &#125;, a: 1, b: 3, c: reference to function c()&#123;&#125;, d: reference to FunctionExpression \"d\"&#125; æ€»ç»“å¦‚ä¸‹ï¼š å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–æ˜¯å…¨å±€å¯¹è±¡ã€‚ å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–åªåŒ…æ‹¬ arguments å¯¹è±¡ã€‚ åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼ã€‚ åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼ã€‚ æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆJS æ˜¯å•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ‰§è¡Œé¡ºåºæ˜¯é¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯ JS å¼•æ“å¹¶ä¸æ˜¯ä¸€è¡Œä¸€è¡Œåœ°åˆ†æå’Œæ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µåœ°åˆ†æå’Œæ‰§è¡Œï¼Œå…ˆè¿›è¡Œç¼–è¯‘ç„¶åæ‰æ˜¯æ‰§è¡Œã€‚ æœ‰å¦‚ä¸‹ä¸¤æ®µä»£ç ï¼Œæ‰§è¡Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸¤æ®µä»£ç ç©¶ç«Ÿæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ 123456789var scope = \"global scope\";function checkscope()&#123; var scope = \"local scope\"; function f()&#123; return scope; &#125; return f();&#125;checkscope(); 123456789var scope = \"global scope\";function checkscope()&#123; var scope = \"local scope\"; function f()&#123; return scope; &#125; return f;&#125;checkscope()(); ç­”æ¡ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„å˜åŒ–ä¸ä¸€æ ·ã€‚ ç¬¬ä¸€æ®µä»£ç ï¼š 1234ECStack.push(&lt;checkscope&gt; functionContext);ECStack.push(&lt;f&gt; functionContext);ECStack.pop();ECStack.pop(); ç¬¬äºŒæ®µä»£ç ï¼š 1234ECStack.push(&lt;checkscope&gt; functionContext);ECStack.pop();ECStack.push(&lt;f&gt; functionContext);ECStack.pop(); å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨æ´»åŠ¨å¯¹è±¡æ¥è¡¨ç¤ºå˜é‡å¯¹è±¡ã€‚ æ´»åŠ¨å¯¹è±¡å’Œå˜é‡å¯¹è±¡çš„åŒºåˆ«åœ¨äºï¼š å˜é‡å¯¹è±¡æ˜¯è§„èŒƒä¸Šæˆ– JS å¼•æ“ä¸Šå®ç°çš„ï¼Œå¹¶ä¸èƒ½åœ¨ JS ç¯å¢ƒä¸­ç›´æ¥è®¿é—®ã€‚ å½“è¿›å…¥åˆ°ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åï¼Œè¿™ä¸ªå˜é‡å¯¹è±¡ä¼šè¢«æ¿€æ´»ï¼Œæ‰€ä»¥å«æ´»åŠ¨å¯¹è±¡ï¼Œè¿™æ—¶æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±æ€§æ‰èƒ½è¢«è®¿é—®ã€‚ è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºå…¶åˆ›å»ºä¸€ä¸ª arguments å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å±€éƒ¨å˜é‡ argumentsã€‚æ‰€æœ‰ä½œä¸ºå‚æ•°ä¼ å…¥çš„å€¼éƒ½ä¼šæˆä¸º arguments å¯¹è±¡çš„æ•°ç»„å…ƒç´ ã€‚ å‚è€ƒ ç†è§£JavaScript ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå’Œå˜é‡å¯¹è±¡","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†","slug":"Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†","date":"2019-06-26T15:11:52.000Z","updated":"2019-07-07T11:26:33.333Z","comments":true,"path":"2019/06/26/Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†/","link":"","permalink":"http://yoursite.com/2019/06/26/Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†/","excerpt":"å¯¼è¯­ æˆªæ­¢ä»Šå¤©ï¼Œåƒè°·æ­Œã€äºšé©¬é€Šç­‰å…¨çƒ Top 10 äº’è”ç½‘å¤§å…¬å¸ï¼Œéƒ½æ—©å·²å…¥å‘ Nodeâ€¦","text":"å¯¼è¯­ æˆªæ­¢ä»Šå¤©ï¼Œåƒè°·æ­Œã€äºšé©¬é€Šç­‰å…¨çƒ Top 10 äº’è”ç½‘å¤§å…¬å¸ï¼Œéƒ½æ—©å·²å…¥å‘ Nodeâ€¦ Nodejs æ¦‚è¿°Nodejs æ˜¯åŸºäº Chrome V8 å¼•æ“æ„å»ºçš„ï¼Œç”±äº‹ä»¶å¾ªç¯åˆ†å¸ƒ I/O ä»»åŠ¡ï¼Œæœ€ç»ˆå·¥ä½œçº¿ç¨‹ä¼šå°†ä»»åŠ¡æ”¾åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œè€Œäº‹ä»¶å¾ªç¯ç­‰å¾…æ‰§è¡Œç»“æœå°±å¯ä»¥äº†ã€‚ Nodejs æ˜¯ Javascript çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚ Nodejs æ„å»ºåœ¨ Chrome V8 è¿™ä¸ªè‘—åçš„ Javascript å¼•æ“ä¸Šã€‚ Nodejs æ¯ä¸ªå‡½æ•°éƒ½æ˜¯åŒæ­¥çš„ï¼Œè€Œ I/O æ“ä½œæ˜¯å¼‚æ­¥çš„ã€‚ Nodejs ä½¿ç”¨ npm ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚ Nodejs å®‰è£…Nodejs æ”¯æŒ macOSã€Linux ä»¥åŠ Windows ç­‰å¤šä¸ªä¸»æµæ“ä½œç³»ç»Ÿã€‚ 3m å®‰è£…æ³• nvm å¼€æºçš„ Nodejs ç‰ˆæœ¬ç®¡ç†å™¨ npm Nodejs åŒ…ç®¡ç†ç«¯ nrm è§£å†³ npm é•œåƒè®¿é—®æ…¢çš„é—®é¢˜ã€‚ nvmå®‰è£… nvmé¦–å…ˆï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash æ„æ€æ˜¯é€šè¿‡ curl å‘½ä»¤ä¸‹è½½ install.sh è„šæœ¬å¹¶æ‰§è¡Œã€‚æ‰§è¡Œå®Œæˆåï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œ 1vi ~/.zshrc æŠŠ nvm å‘½ä»¤çš„æ‰§è¡Œè·¯å¾„æ”¾åˆ° ~/.zshrc æ–‡ä»¶ä¸‹ï¼š 12export NVM_DIR=\"$HOME/.nvm\"[ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; . \"$NVM_DIR/nvm.sh\" æ‰§è¡Œ source å‘½ä»¤ï¼Œä½¿ç³»ç»Ÿç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š 1source ~/.zshrc è¾“å…¥ï¼š 123nvm --version0.33.1 æŸ¥çœ‹å¯å®‰è£…çš„ Nodejs ç‰ˆæœ¬å®‰è£… Node ä¹‹å‰ï¼Œéœ€è¦äº†è§£é€šè¿‡ nvm å¯ä»¥å®‰è£…å“ªäº›ç‰ˆæœ¬çš„ Nodeã€‚ 1nvm ls-remote LTS ç‰ˆæœ¬æ˜¯æŒ‡é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œæ¨èç»™å¤§éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ Current ç‰ˆæœ¬æ˜¯æŒ‡å½“å‰æ­£åœ¨å¼€å‘çš„å°é²œç‰ˆæœ¬ï¼Œä¸å®Œå…¨ç‰ˆæœ¬ï¼Œéœ€è¦ç»è¿‡ä¸€æ®µæ—¶é—´çš„æµ‹è¯•ã€å¼€å‘å’Œä¿®å¤ bug ç­‰æ‰èƒ½å˜ä¸º LTS ç‰ˆæœ¬ï¼Œä¸€èˆ¬ä¾›å¼€å‘è€…å­¦ä¹ ã€‚ å®‰è£… Node1nvm install 10.15.3 é€šè¿‡ nvm å®‰è£…çš„ Node ä½äºç”¨æˆ·ç›®å½•ä¸‹ï¼Œè€Œéç³»ç»Ÿç›®å½•ä¸‹ã€‚ 12which node/Users/wangqian/.nvm/versions/node/v10.15.3/bin/node é»˜è®¤ä½¿ç”¨æŸä¸ª Node ç‰ˆæœ¬æ¥ç¼–è¯‘ä»£ç ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ª default åˆ«åã€‚ 12nvm alias default nodedefault -&gt; node (-&gt; v10.15.3) æ­¤æ—¶ï¼Œè¾“å…¥ node -vï¼Œä»¥ååœ¨ç»ˆç«¯çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„é»˜è®¤ç‰ˆæœ¬éƒ½ä¼šæ˜¯ä½ è®¾ç½®çš„ç‰ˆæœ¬ã€‚ 12node -vv10.15.3 å¦‚ä½•ä½¿ç”¨ nvm åˆ‡æ¢ Node ç‰ˆæœ¬ï¼Ÿé¦–å…ˆå®‰è£… Node 8.x 1nvm install 8 åˆ‡æ¢åˆ° 8.x ç‰ˆæœ¬ï¼š 1234nvm use 8Now using node v8.16.0 (npm v6.4.1)node -vv8.16.0 å¦‚ä½•çŸ¥é“æœ¬æœºé€šè¿‡ nvm å®‰è£…äº†å“ªäº› Node ç‰ˆæœ¬å‘¢ï¼Ÿ 123456789101112nvm ls-&gt; v8.16.0 v10.15.3default -&gt; node (-&gt; v10.15.3)node -&gt; stable (-&gt; v10.15.3) (default)stable -&gt; 10.15 (-&gt; v10.15.3) (default)iojs -&gt; N/A (default)lts/* -&gt; lts/dubnium (-&gt; N/A)lts/argon -&gt; v4.9.1 (-&gt; N/A)lts/boron -&gt; v6.17.1 (-&gt; N/A)lts/carbon -&gt; v8.16.0lts/dubnium -&gt; v10.16.0 (-&gt; N/A) è‹¥è¦ç»å¸¸åˆ‡æ¢ Node ç‰ˆæœ¬ï¼Œæœ€ç—›è‹¦çš„è«è¿‡äºå…¨å±€æ¨¡å—éœ€è¦é‡æ–°å®‰è£…ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œnvm æä¾›äº†ä¸€ä¸ªå¾ˆè´´å¿ƒçš„ä¸€é”®å®‰è£…å…¨å±€æ¨¡å—çš„ nvm reinstall-packageså‘½ä»¤ã€‚ 1nvm reinstall-packages 6 nvm é»˜è®¤è¿œç«¯ä¸‹è½½åœ°å€æ˜¯ https://nodejs.org/distï¼Œå¦‚æœæƒ³å®‰è£…è‡ªå®šä¹‰çš„ Node ç‰ˆæœ¬ï¼Œå¯ä»¥æŒ‡å®š nvm çš„è¿œç«¯ä¸‹è½½åœ°å€ã€‚ 1NVM_NODEJS_ORG_MIRROR=https://nodejs.org/download/chakracore-nightly å¯¹äºä¸€äº›æ­£åœ¨æµ‹è¯•çš„å°é²œç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ä¸‹é¢çš„åœ°å€ä¸‹è½½ã€‚ 1NVM_NODEJS_ORG_MIRROR=https://nodejs.org/download/test","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"Node","slug":"Node","permalink":"http://yoursite.com/tags/Node/"}]},{"title":"JS-thisã€callã€apply","slug":"JS-thisã€callã€apply","date":"2019-06-13T05:00:52.000Z","updated":"2019-06-16T09:51:28.472Z","comments":true,"path":"2019/06/13/JS-thisã€callã€apply/","link":"","permalink":"http://yoursite.com/2019/06/13/JS-thisã€callã€apply/","excerpt":"å¯¼è¯­ åœ¨ Javascript ç¼–ç¨‹ä¸­ï¼Œthisã€Function.prototype.callã€Function.prototype.apply æœ‰ç€å¹¿æ³›çš„è¿ç”¨ï¼Œç†è§£å®ƒä»¬çš„ç”¨æ³•è‡³å…³é‡è¦ã€‚","text":"å¯¼è¯­ åœ¨ Javascript ç¼–ç¨‹ä¸­ï¼Œthisã€Function.prototype.callã€Function.prototype.apply æœ‰ç€å¹¿æ³›çš„è¿ç”¨ï¼Œç†è§£å®ƒä»¬çš„ç”¨æ³•è‡³å…³é‡è¦ã€‚ thisJavascript ä¸­çš„ this æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå…·ä½“æŒ‡å‘å“ªä¸ªå¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒåŠ¨æ€ç»‘å®šçš„ã€‚ this çš„æŒ‡å‘åœ¨å…·ä½“å®é™…åº”ç”¨ä¸­ï¼Œthis çš„æŒ‡å‘é€šå¸¸å¯åˆ†ä¸ºä»¥ä¸‹4ç§: ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ ä½œä¸ºæ„é€ å™¨è°ƒç”¨ Function.prototype.callã€Function.prototype.apply ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å½“å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘è¯¥å¯¹è±¡ï¼š 12345678910var obj = &#123; a: 1, getA: function () &#123; console.log(this.a) &#125;&#125;obj.getA()// 1 ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œæ­¤æ—¶çš„ this æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œè¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯ window å¯¹è±¡ã€‚ 12345678var a = 1var getName = function () &#123; console.log(this.a)&#125;getName()// 1 ä½œä¸ºæ„é€ å™¨è°ƒç”¨å½“ç”¨ new è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ„é€ å™¨é‡Œçš„ this å°±æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡ã€‚ 1234567var MyClass = function () &#123; this.name = 'sven'&#125;var obj = new MyClass()console.log(obj.name)// 'sven' å¦‚æœæ„é€ å™¨æ˜¾å¼åœ°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ¬¡è¿ç®—ç»“æœæœ€ç»ˆä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰æœŸå¾…çš„ thisã€‚ 12345678910var MyClass = function () &#123; this.name = 'sven' return &#123; name: 'wang' &#125;&#125;var obj = new MyClass()console.log(obj.name)// wang å¦‚æœæ„é€ å™¨ä¸æ˜¾å¼åœ°è¿”å›ä»»ä½•æ•°æ®ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªéå¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œå°±ä¸ä¼šé€ æˆä¸Šè¿°é—®é¢˜ã€‚ 12345678var MyClass = function () &#123; this.name = 'sven' return 'wang'&#125;var obj = nconsole.log(obj.name)// 'sven' Function.prototype.callã€Function.prototype.applyç”¨ Function.prototype.callã€Function.prototype.apply å¯ä»¥åŠ¨æ€æ”¹å˜ä¼ å…¥å‡½æ•°çš„ thisã€‚ 12345678910111213141516var obj1 = &#123; name: 'wang', getName: function () &#123; console.log(this.name) &#125;&#125;var obj2 = &#123; name: 'zhang'&#125;obj1.getName()obj1.getName.call(obj2)// 'wang'// 'zhang' ä¸¢å¤±çš„ thisä¸¾ä¸ªä¾‹å­ï¼š 12345678910111213var obj = &#123; name: 'wang', getName: function () &#123; console.log(this.name) &#125;&#125;obj.getName()getName = obj.getNamegetName()// 'wang'// undefined å½“è°ƒç”¨ obj.getName æ—¶ï¼Œæ­¤æ—¶ this æŒ‡å‘ obj å¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡º â€˜wangâ€™ã€‚ å½“ç”¨å¦å¤–ä¸€ä¸ªå˜é‡ getName æ¥å¼•ç”¨ obj.getNameï¼Œå¹¶ä¸”è°ƒç”¨æ—¶ï¼Œå®ƒæ˜¯è¢«å½“ä½œæ™®é€šå‡½æ•°æ¥è°ƒç”¨ï¼Œæ­¤æ—¶ this æŒ‡å‘ window å¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡º undefinedã€‚ call å’Œ applyåœ¨å®é™…å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å‡½æ•°å¼é£æ ¼çš„ä»£ç ç¼–å†™ä¸­ï¼Œcall å’Œ apply æ–¹æ³•å°¤ä¸ºé‡è¦ã€‚ åŒºåˆ«call å’Œ apply ä½œç”¨ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºä¼ å…¥å‚æ•°å½¢å¼çš„ä¸åŒã€‚ apply æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†…çš„ this å¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ã€‚ call ä¼ å…¥çš„å‚æ•°æ•°é‡ä¸å›ºå®šï¼Œè·Ÿ apply ä¸åŒçš„æ˜¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä»£è¡¨å‡½æ•°ä½“å†… this å¯¹è±¡çš„æŒ‡å‘ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œæ¯ä¸ªå‚æ•°ä¾æ­¤ä¼ å…¥å‡½æ•°ã€‚ å½“ä½¿ç”¨ call æˆ–è€… apply æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œåˆ™å‡½æ•°ä½“å†…çš„ this ä¼šæŒ‡å‘é»˜è®¤çš„å®¿ä¸»å¯¹è±¡ã€‚ ä½†å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°ä½“å†…çš„ this è¿˜æ˜¯ä¸º nullã€‚ call å’Œ apply çš„ç”¨é€”ä¸‹é¢å°†è¯¦ç»†ä»‹ç» call å’Œ apply åœ¨å®é™…å¼€å‘ä¸­çš„ç”¨é€”ã€‚ æ”¹å˜ this æŒ‡å‘1234567891011121314151617var obj1 = &#123; name: 'wang'&#125;var obj2 = &#123; name: 'zhang'&#125;var name = 'qian'var getName = function () &#123; console.log(this.name)&#125;getName () // 'qian'getName.call(obj1) // 'wang'getName.call(obj2) // 'zhang' Function.prototype.bindå¤§éƒ¨åˆ†é«˜çº§æµè§ˆå™¨éƒ½å®ç°äº†å†…ç½®çš„ Function.prototype.bindï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚å³ä½¿æ²¡æœ‰åŸç”Ÿçš„ Function.prototype.bind ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ¥æ¨¡æ‹Ÿï¼š 1234567891011121314151617Function.prototype.bind = function (context) &#123; let self = this // ä¿å­˜åŸå‡½æ•° console.log(this) return function () &#123; // è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° return self.apply(context, arguments) // æ‰§è¡Œæ–°çš„å‡½æ•°æ—¶ï¼Œä¼šæŠŠä¹‹å‰ä¼ å…¥çš„ context å½“ä½œæ–°å‡½æ•°ä½“å†…çš„ this &#125;&#125;var obj = &#123; name: 'seven'&#125;var func = function () &#123; console.log(this.name)&#125;.bind(obj)func() ä¸Šè¿°ä¸ºä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Function.prototype.bind å®ç°ï¼Œé€šå¸¸æˆ‘ä»¬è¿˜ä¼šæŠŠå®ƒå®ç°å¾—ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½¿å¾—å¯ä»¥åœ¨ func å‡½æ•°ä¸­é¢„å…ˆå¡«å…¥ä¸€äº›å‚æ•°ï¼š 123456789101112131415161718192021Function.prototype.bind = function () &#123; console.log(arguments) var self = this, // ä¿å­˜åŸå‡½æ•° context = [].shift.call(arguments), // éœ€è¦ç»‘å®šçš„ this ä¸Šä¸‹æ–‡ args = [].slice.call(arguments) // å‰©ä½™çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„ console.log(context) console.log(args) return function () &#123; // è¿”å›ä¸€ä¸ªæ–°éŸ©æ·‘ return self.apply(context, [].concat(args, [].slice.call(arguments))) // æ‰§è¡Œæ–°çš„å‡½æ•°æ—¶ï¼ŒæŠŠä¹‹å‰ä¼ å…¥çš„ context å½“ä½œæ–°å‡½æ•°ä½“å†…çš„ thisï¼Œå¹¶ä¸”ç»„åˆä¸¤æ¬¡åˆ†åˆ«ä¼ å…¥çš„å‚æ•°ï¼Œä½œä¸ºæ–°å‡½æ•°çš„å‚æ•° &#125;&#125;var obj = &#123; name: 'seven'&#125;var func = function (a, b, c, d) &#123; console.log(this.name) console.log([a, b, c, d])&#125;.bind(obj, 1, 2)func(3, 4) å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•å€Ÿç”¨æ–¹æ³•çš„ç¬¬ä¸€ç§åœºæ™¯æ˜¯â€å€Ÿç”¨æ„é€ å‡½æ•°â€œï¼Œé€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œå¯ä»¥å®ç°ä¸€äº›ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š 123456789101112131415var A = function (name) &#123; this.name = name&#125;var B = function () &#123; A.apply(this, arguments)&#125;B.prototype.getName = function () &#123; return this.name&#125;var b = new B('wang')console.log(b.getName()) // 'wang' é™„ï¼š å‡½æ•°çš„å‚æ•°åˆ—è¡¨ arguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ å¦‚æœæƒ³åœ¨ arguments ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.push å¦‚æœæƒ³æŠŠ arguments è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.slice å¦‚æœæƒ³æˆªå– arguments ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.shift","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹","slug":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹","date":"2019-05-16T10:34:52.000Z","updated":"2019-08-17T17:08:47.848Z","comments":true,"path":"2019/05/16/Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹/","link":"","permalink":"http://yoursite.com/2019/05/16/Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹/","excerpt":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£","text":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£ ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹ä»çŠ¶æ€ç”ŸæˆDOMï¼Œå†è¾“å‡ºåˆ°ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ä¸€æ•´å¥—æµç¨‹å«åšæ¸²æŸ“ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ä¼šä¸æ–­åœ°é‡æ–°æ¸²æŸ“ã€‚å“åº”å¼ç³»ç»Ÿèµ‹äºˆæ¡†æ¶é‡æ–°æ¸²æŸ“çš„èƒ½åŠ›ï¼Œå…¶é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å˜åŒ–ä¾¦æµ‹ã€‚ ç®€å•æ¥è¯´ï¼Œå˜åŒ–ä¾¦æµ‹çš„ä½œç”¨å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥è§†å›¾è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚ Vue.js 2.0 å¼•å…¥äº†è™šæ‹Ÿ DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ– (ç»„ä»¶å®ä¾‹) ï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ã€‚ å¦‚ä½•è¿½è¸ªå˜åŒ–é¦–å…ˆï¼Œåœ¨ JS ä¸­ï¼Œé€šè¿‡ Object.defineProperty ä¾¦æµ‹å¯¹è±¡å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å“åº”å¼æœ€æ ¹æœ¬çš„ä¾èµ–ã€‚ 123456789101112131415function defineReactive (data, key, val) &#123; Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; return val &#125;, set: function(newVal) &#123; if (val === newVal) &#123; return &#125; val = newVal &#125; &#125;)&#125; æ­¤å¤„ç”¨ defineReactive å¯¹ Object.defineProperty è¿›è¡Œå°è£…ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å¯¹è±¡è¿›è¡Œå˜åŒ–è¿½è¸ªã€‚å°è£…å¥½ä¹‹åï¼Œæ¯å½“ä» data çš„ key ä¸­è¯»å–æ•°æ®æ—¶ï¼Œgetter å‡½æ•°è¢«è§¦å‘ï¼›æ¯å½“åœ¨ data çš„ key ä¸­è®¾ç½®æ–°æ•°æ®æ—¶ï¼Œ setter å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚ ç”±æ­¤å¯è§ï¼ŒObject.defineProperty æ˜¯å¯¹å·²æœ‰å±æ€§è¿›è¡Œçš„åŠ«æŒæ“ä½œï¼Œæ‰€ä»¥ Vue æ‰è¦æ±‚äº‹å…ˆå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨ data ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•å“åº”å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚è¢«åŠ«æŒçš„å±æ€§ä¼šæœ‰ç›¸åº”çš„ getã€set æ–¹æ³•ã€‚ å¦‚ä½•æ”¶é›†ä¾èµ–æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š 12345678910111213141516171819let globalObj = &#123; text1: 'text1'&#125;;let o1 = new Vue(&#123; template: `&lt;div&gt; &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; &lt;div&gt;`, data: globalObj&#125;);let o2 = new Vue(&#123; template: `&lt;div&gt; &lt;span&gt;&#123;&#123;text1&#125;&#125;&lt;/span&gt; &lt;div&gt;`, data: globalObj&#125;); è¯¥æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªvmå®ä¾‹ä½¿ç”¨äº†text1ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å‘ä½¿ç”¨äº†å®ƒçš„åœ°æ–¹å‘é€é€šçŸ¥æ¥æ›´æ–°è§†å›¾ï¼Ÿ å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼Œå³æŠŠç”¨åˆ°äº†æ•°æ® text1 çš„åœ°æ–¹æ”¶é›†èµ·æ¥ï¼Œç„¶åå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠä¹‹å‰æ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘æ›´æ–°ä¸€éã€‚ å³ï¼šåœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–ã€‚ ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰ æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ã€‚æˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œç”¨å®ƒæ¥ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€é€šçŸ¥ç­‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536export default class Dep &#123; constructor () &#123; this.subs = [] // è§‚å¯Ÿè€…é›†åˆ &#125; // æ·»åŠ è§‚å¯Ÿè€… addSub (sub) &#123; this.subs.push(sub) &#125; // ç§»é™¤è§‚å¯Ÿè€… removeSub (sub) &#123; remove(this.subs, sub) &#125; depend () &#123; // å¦‚æœå­˜åœ¨ Dep.targetï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†æ“ä½œ if (Dep.target) &#123; this.addSub(Dep.target) &#125; &#125; notify () &#123; const subs = this.subs.slice() // é¿å…æ±¡æŸ“åŸæ¥çš„é›†åˆ for (let i = 0, l = subs.length; i &lt; l; i++) &#123; subs[i].update() // æ›´æ–° &#125; &#125;&#125;function remove(arr, item) &#123; if (arr.length) &#123; const index = arr.indexOf(item) if (index &gt; -1) &#123; return arr.splice(index, 1) &#125; &#125;&#125; æ”¹é€  defineReactive 123456789101112131415161718function defineReactive (data, key, val) &#123; let dep = new Dep() Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; dep.depend() return val &#125;, set: function(newVal) &#123; if (val === newVal) &#123; return &#125; val = newVal dep.notify() &#125; &#125;)&#125; ä»€ä¹ˆæ˜¯ä¾èµ–å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬è¦é€šçŸ¥ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç”¨åˆ°æ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ã€ä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·å†™çš„å‡½æ•°ç­‰ç­‰ï¼Œè¿™æ—¶éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›æƒ…å†µçš„ç±»ã€‚ ç„¶åï¼Œæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥å•Šï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åï¼Œå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ æ”¶é›†è°ï¼ŸWatcher! ä»€ä¹ˆæ˜¯ WatcherWatcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®ƒï¼Œå®ƒå†é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ 123vm.$watch('a.b.c', function(newVal, oldVal) &#123; // do something&#125;) è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å‡½æ•°ã€‚ æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c å±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ã€‚ç„¶åï¼Œå½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥ watcherã€‚æ¥ç€ï¼Œwatcher åœ¨æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚ 1234567891011121314151617181920212223242526export default class Watcher &#123; // ... constructor ( vm: Component, // ç»„ä»¶å®ä¾‹ expOrFn: string | Function, // è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œæˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦èƒ½è§¦å‘å–å€¼æ“ä½œ cb: Function // è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ ) &#123; this.vm = vm // Watcheræœ‰ä¸€ä¸ª vm å±æ€§ï¼Œè¡¨æ˜å®ƒæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„ this.cb = cb // å›è°ƒ this.getter = parsePath(expOrFn) this.value = this.get() &#125; get () &#123; // è§¦å‘å–å€¼æ“ä½œï¼Œè¿›è€Œè§¦å‘å±æ€§çš„getter Dep.target = this let value = this.getter.call(this.vm, this.vm) Dep.target = null return value &#125; update () &#123; // æ›´æ–° const oldValue = this.value this.value = this.get() this.cb.call(this.vm, this.value, oldValue) &#125;&#125; è¿™æ®µä»£ç å¯ä»¥å°†è‡ªå·±ä¸»åŠ¨æ·»åŠ åˆ° data.a.b.c çš„ Dep ä¸­ã€‚ åœ¨ get æ–¹æ³•ä¸­å…ˆæŠŠ Dep.target è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰ watcher å®ä¾‹ï¼Œç„¶åå†è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ï¼Œè¿™å°±ä¼šè§¦å‘ getterï¼Œè§¦å‘äº† getterï¼Œå°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„é€»è¾‘ã€‚ åªè¦ç°åœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åå†è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨æ·»åŠ åˆ° keypath çš„ Dep ä¸­ã€‚ ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­åï¼Œæ¯å½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè®©ä¾èµ–åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ã€‚ ä¸ç®¡ç”¨æˆ·æ‰§è¡Œçš„æ˜¯ vm.$watch(â€˜a.b.câ€™, (value, oldValue) =&gt; {})ï¼Œè¿˜æ˜¯æ¨¡æ¿ä¸­çš„ dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å˜åŒ–ã€‚ parsePathå‡½æ•°ï¼š 123456789101112131415const bailRE = /[^\\w.$]/export function parsePath(path) &#123; if (bailRE.test(path)) &#123; return &#125; const segments = path.split('.') return function(obj) &#123; for (let i = 0; i &lt; segments.length; i++) &#123; if (!obj) return obj = obj[segments[i]] &#125; return obj &#125;&#125; é€’å½’ä¾¦æµ‹æ‰€æœ‰Keyå‰é¢çš„å®ä¾‹ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ•°æ®ä¸­çš„æ‰€æœ‰å±æ€§éƒ½ä¾¦æµ‹åˆ°ï¼Œæ‰€ä»¥è¦å°è£…ä¸€ä¸ªObserverç±»ã€‚Observerçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®å†…çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬å­å±æ€§ï¼‰éƒ½è½¬æ¢æˆ getter/setter çš„å½¢å¼ï¼Œç„¶åå»è¿½è¸ªå®ƒä»¬çš„å˜åŒ–ï¼š 123456789101112131415161718192021222324252627282930313233343536export class Observer &#123; constructor (value) &#123; this.value = value if (!Array.isArray(value)) &#123; this.walk(value) &#125; &#125; walk (obj) &#123; const keys = Object.keys(obj) for (let i = 0; i &lt; keys.length; i++) &#123; defineReactive (obj, keys[i], obj[keys[i]]) &#125; &#125;&#125;function defineReactive(data, key, val) &#123; if (typeof val === 'object') &#123; new Observer(val) &#125; let dep = new Dep() Object.defineProperty(data, key, &#123; enumerable: true, configurable: true, get: function() &#123; dep.depend() return val &#125;, set: function(newVal) &#123; if (val === newVal) &#123; return &#125; val = newVal dep.notify() &#125; &#125;)&#125; Observer ç±»ï¼Œç”¨äºå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢æˆè¢«ä¾¦æµ‹çš„ objectã€‚ åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼Œåªæœ‰ Object ç±»å‹çš„æ•°æ®æ‰ä¼šè°ƒç”¨ walk å°†æ¯ä¸€ä¸ªå±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ æœ€åï¼Œåœ¨ defineReactive ä¸­æ–°å¢ new Observer(val) æ¥é€’å½’å­å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ data ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ å½“ data ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å±æ€§å¯¹åº”çš„ä¾èµ–å°±ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚ æ€»ç»“å˜åŒ–ä¾¦æµ‹å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦èƒ½ä¾¦æµ‹åˆ°å¹¶å‘å‡ºé€šçŸ¥ã€‚ Object å¯ä»¥é€šè¿‡ Object.defineProperty å°†å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œè¯»å–æ•°æ®æ—¶ä¼šè§¦å‘ getterï¼Œä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ setterã€‚ æˆ‘ä»¬éœ€è¦åœ¨ getter ä¸­æ”¶é›†æœ‰å“ªäº›ä¾èµ–ä½¿ç”¨äº†æ•°æ®ã€‚å½“ setter è¢«è§¦å‘æ—¶ï¼Œå»é€šçŸ¥ getter ä¸­æ”¶é›†çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ æ”¶é›†ä¾èµ–éœ€è¦ä¸ºä¾èµ–æ‰¾ä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼Œä¸ºæ­¤åˆ›å»ºäº† Depï¼Œå®ƒç”¨æ¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯ç­‰ã€‚ æ‰€è°“çš„ä¾èµ–ï¼Œå…¶å®å°±æ˜¯ Watcherã€‚æŠŠ Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚ Watcher çš„åŸç†æ˜¯å…ˆæŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€å”¯ä¸€çš„æŒ‡å®šä½ç½® (Dep.target)ï¼Œç„¶åè¯»å–è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¯»å–äº†è¿™ä¸ªæ•°æ®ï¼Œå› æ­¤ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getter ã€‚æ¥ç€ï¼Œåœ¨ getter ä¸­å°±ä¼šä»å…¨å±€å”¯ä¸€çš„ä½ç½®è¯»å–æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­å»ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒWatcher å¯ä»¥ä¸»åŠ¨å»è®¢é˜…ä»»æ„ä¸€ä¸ªæ•°æ®çš„å˜åŒ–ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† Observer ç±»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ª object ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å­æ•°æ®ï¼‰éƒ½è½¬æ¢æˆå“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼šä¾¦æµ‹ object ä¸­æ‰€æœ‰æ•°æ®çš„å˜åŒ–ã€‚ åœ¨ Vue ä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§æˆ–åˆ é™¤å±æ€§éƒ½æ— æ³•è¢«ä¾¦æµ‹åˆ°ã€‚ Object é€šè¿‡ Observer è½¬æ¢æˆäº† getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ã€‚ å½“å¤–ç•Œé€šè¿‡ Watcher è¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ getter ä»è€Œå°† Watcher æ·»åŠ åˆ° Dep ä¸­ã€‚ å½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ setterï¼Œä»è€Œå‘ Dep ä¸­çš„ä¾èµ–å‘é€é€šçŸ¥ã€‚ Watcher æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šåƒå¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://yoursite.com/tags/Vue/"}]},{"title":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨","slug":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨","date":"2019-03-25T12:57:52.000Z","updated":"2019-03-25T12:24:33.483Z","comments":true,"path":"2019/03/25/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨/","link":"","permalink":"http://yoursite.com/2019/03/25/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨/","excerpt":"å¯¼è¯­ ä½¿ç”¨åˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œåº•å±‚å‚¨å­˜æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚ç„¶è€Œï¼Œæ•°ç»„å¹¶ä¸æ€»æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚","text":"å¯¼è¯­ ä½¿ç”¨åˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œåº•å±‚å‚¨å­˜æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚ç„¶è€Œï¼Œæ•°ç»„å¹¶ä¸æ€»æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚ æ•°ç»„çš„ç¼ºç‚¹æ•°ç»„ä¸æ€»æ˜¯ç»„ç»‡æ•°æ®çš„æœ€ä½³æ•°æ®ç»“æ„ï¼ŒåŸå› å¦‚ä¸‹ï¼šåœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å½“æ•°ç»„å·²è¢«æ•°æ®å¡«æ»¡æ—¶ï¼Œå†éœ€è¦åŠ å…¥æ–°çš„å…ƒç´ å°±ä¼šéå¸¸å›°éš¾ã€‚ åœ¨æ•°ç»„ä¸­ï¼Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ ä¹Ÿå¾ˆéº»çƒ¦ï¼Œéœ€è¦å°†æ•°ç»„ä¸­çš„å…¶å®ƒå…ƒç´ å‘å‰æˆ–å‘åç§»åŠ¨ï¼Œä»¥åæ˜ æ•°ç»„åˆšåˆšè¿›è¡Œäº†æ·»åŠ æˆ–åˆ é™¤æ“ä½œã€‚ å¦‚æœä½ å‘ç°æ•°ç»„åœ¨å®é™…ä½¿ç”¨æ—¶å¾ˆæ…¢ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨é“¾è¡¨æ¥æ›¿ä»£å®ƒã€‚é™¤äº†å¯¹æ•°æ®çš„éšæœºè®¿é—®ï¼Œ","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—","slug":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—","date":"2019-03-16T12:57:52.000Z","updated":"2019-03-23T09:33:40.176Z","comments":true,"path":"2019/03/16/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—/","link":"","permalink":"http://yoursite.com/2019/03/16/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—/","excerpt":"å¯¼è¯­ é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—åªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºã€‚","text":"å¯¼è¯­ é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—åªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºã€‚ å¯¹é˜Ÿåˆ—çš„æ“ä½œé˜Ÿåˆ—çš„ä¸¤ç§ä¸»è¦æ“ä½œæ˜¯ï¼šå‘é˜Ÿåˆ—ä¸­æ’å…¥æ–°å…ƒç´ å’Œåˆ é™¤é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚æ’å…¥æ“ä½œä¹Ÿå«åšå…¥é˜Ÿï¼Œåˆ é™¤æ“ä½œä¹Ÿå«åšå‡ºé˜Ÿã€‚å…¥é˜Ÿæ“ä½œåœ¨é˜Ÿå°¾æ’å…¥æ–°å…ƒç´ ï¼Œå‡ºé˜Ÿæ“ä½œåˆ é™¤é˜Ÿå¤´çš„å…ƒç´ ã€‚ é˜Ÿåˆ—çš„å¦ä¸€é¡¹é‡è¦æ“ä½œæ˜¯è¯»å–é˜Ÿå¤´çš„å…ƒç´ ï¼Œè¿™ä¸ªæ“ä½œå« peek() ã€‚è¯¥æ“ä½œè¿”å›é˜Ÿå¤´å…ƒç´ ï¼Œä½†ä¸æŠŠå®ƒä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚é™¤äº†è¯»å–é˜Ÿå¤´å…ƒç´ ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ length å±æ€§æ¥çŸ¥é“é˜Ÿåˆ—ä¸­å­˜å‚¨äº†å¤šå°‘å…ƒç´ ï¼Œç”¨ clear() æ–¹æ³•æ¥æ¸…ç©ºé˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚ ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—ä½¿ç”¨æ•°ç»„æ¥å®ç°é˜Ÿåˆ—çœ‹èµ·æ¥é¡ºç†æˆç« ã€‚æ•°ç»„çš„ push() æ–¹æ³•å¯ä»¥åœ¨æ•°ç»„æœ«å°¾åŠ å…¥å…ƒç´ ï¼Œshift() æ–¹æ³•åˆ™å¯ä»¥åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ push() æ–¹æ³•å°†å®ƒçš„å‚æ•°æ’å…¥æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¼€æ”¾çš„ä½ç½®ï¼Œè¯¥ä½ç½®æ€»åœ¨æ•°ç»„çš„æœ«å°¾ï¼Œå³ä½¿æ˜¯ä¸ªç©ºæ•°ç»„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ å‡†å¤‡å¼€å§‹å®ç° Queue ç±»ï¼Œå…ˆä»æ„é€ å‡½æ•°å¼€å§‹ï¼š 123456789function Queue () &#123; this.dataStore = [] this.enqueue = enqueue this.dequeue = dequeue this.front = front this.back = back this.toString = toString this.empty = empty&#125; enqueue() æ–¹æ³•å‘é˜Ÿå°¾æ·»åŠ ä¸€ä¸ªå…ƒç´  123function enqueue (element) &#123; this.dataStore.push(element)&#125; dequeue() æ–¹æ³•åˆ é™¤é˜Ÿé¦–çš„å…ƒç´  123function dequeue () &#123; return this.dataStore.shift()&#125; ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•è¯»å–é˜Ÿé¦–å’Œé˜Ÿå°¾çš„å…ƒç´  1234567function front () &#123; return this.dataStore[0]&#125;function back () &#123; return this.dataStore[this.dataStore.length -1]&#125; toString() æ–¹æ³•æ˜¾ç¤ºé˜Ÿåˆ—å†…çš„æ‰€æœ‰å…ƒç´  1234567function toString () &#123; var retStr = '' for (var i = 0; i &lt; this.dataStore.length; i++) &#123; retStr += this.dataStore[i] + ' ' &#125; return retStr&#125; empty() æ–¹æ³•åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º 123function empty () &#123; return this.dataStore.length === 0&#125; ä½¿ç”¨é˜Ÿåˆ—ï¼šæ–¹å—èˆçš„èˆä¼´åˆ†é…é—®é¢˜ç”·ç”·å¥³å¥³æ¥åˆ°èˆæ± ï¼Œä»–ä»¬æŒ‰ç…§è‡ªå·±çš„æ€§åˆ«æ’æˆä¸¤é˜Ÿã€‚å½“èˆæ± ä¸­æœ‰åœ°æ–¹ç©ºå‡ºæ¥æ—¶ï¼Œé€‰ä¸¤ä¸ªé˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªäººç»„æˆèˆä¼´ã€‚ä»–ä»¬èº«åçš„äººå„è‡ªå‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå˜æˆæ–°çš„é˜Ÿé¦–ã€‚å½“ä¸€å¯¹èˆä¼´è¿ˆå…¥èˆæ± æ—¶ï¼Œä¸»æŒäººä¼šå¤§å£°å–Šå‡ºä»–ä»¬çš„åå­—ã€‚å½“ä¸€é˜Ÿèˆä¼´èµ°å‡ºèˆæ± ï¼Œä¸”ä¸¤æ’é˜Ÿä¼ä¸­æœ‰ä»»æ„ä¸€é˜Ÿæ²¡äººæ—¶ï¼Œä¸»æŒäººä¹Ÿä¼šæŠŠè¿™ä¸ªæƒ…å†µå‘Šè¯‰å¤§å®¶ã€‚ ä¸ºäº†æ¨¡æ‹Ÿè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æŠŠè·³æ–¹å—èˆçš„ç”·ç”·å¥³å¥³çš„å§“åå‚¨å­˜åœ¨ dancers å˜é‡ä¸­ï¼š 1var dancers = 'F Allison \\n M Frank \\n M Mason \\n M Clayton \\n F Cheryl \\n M Raymond \\n F Jennifer \\n M Bryan \\n M David \\n M Danny \\n F Aurora' æ¯ä¸ªèˆè€…çš„ä¿¡æ¯éƒ½è¢«å­˜å‚¨åœ¨ä¸€ä¸ª Dancer å¯¹è±¡ä¸­ï¼š 1234function Dancer (name, sex) &#123; this.name = name this.sex = sex&#125; ä¸‹é¢æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œå°†èˆè€…ä¿¡æ¯è¯»åˆ°ç¨‹åºä¸­ï¼š 12345678910111213141516function getDancers (maleDancers, femaleDancers) &#123; var names = dancers.split('\\n') for (var i = 0; i &lt; names.length; i++) &#123; names[i] = names[i].trim() &#125; for (var i = 0; i &lt; names.length; i++) &#123; var dancer = names[i].split(' ') var sex = dancer[0] var name = dancer[1] if (sex === 'F') &#123; femaleDancers.enqueue(new Dancer(name, sex)) &#125; else &#123; maleDancers.enqueue(new Dancer(name, sex)) &#125; &#125;&#125; èˆè€…çš„å§“åè¢«ä»å˜é‡ dancers ä¸­è¯»å…¥æ•°ç»„ã€‚ç„¶å trim() å‡½æ•°é™¤å»äº†æ¯è¡Œå­—ç¬¦ä¸²çš„ç©ºæ ¼ã€‚ç¬¬äºŒä¸ªå¾ªç¯å°†æ¯è¡Œå­—ç¬¦ä¸²æŒ‰å§“åå’Œæ€§åˆ«åˆ†æˆä¸¤éƒ¨åˆ†å­˜å…¥ä¸€ä¸ªæ•°ç»„ã€‚ç„¶åæ ¹æ®æ€§åˆ«ï¼Œå°†èˆè€…åŠ å…¥ä¸åŒçš„é˜Ÿåˆ—ã€‚ ä¸‹ä¸€ä¸ªå‡½æ•°å°†ç”·æ€§å’Œå¥³æ€§ç»„æˆèˆä¼´ï¼Œå¹¶ä¸”å®£å¸ƒé…å¯¹ç»“æœã€‚ 12345678910function dance (females, males) &#123; console.log('the dance partners are: ') let person while (!females.empty() &amp;&amp; !males.empty()) &#123; person = females.dequeue() console.log('female dancer is ', person) person = males.dequeue() console.log('and male dancer is ', person) &#125;&#125; ä½¿ç”¨é˜Ÿåˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºé˜Ÿåˆ—ä¸ä»…ç”¨äºæ‰§è¡Œç°å®ç”Ÿæ´»ä¸­ä¸æ’é˜Ÿæœ‰å…³çš„æ“ä½œï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ’åºã€‚å¯¹äº0 ~99 çš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºåŸºæ•°æ’åºå¯¹æ•°æ®æ‰«æä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡æŒ‰ä¸ªä½ä¸Šçš„æ•°å­—è¿›è¡Œæ’åºï¼Œç¬¬äºŒæ¬¡æŒ‰åä½ä¸Šçš„æ•°å­—è¿›è¡Œæ’åºã€‚æ¯ä¸ªæ•°å­—æ ¹æ®å¯¹åº”ä½ä¸Šçš„æ•°å€¼è¢«åˆ†åœ¨ä¸åŒçš„ç›’å­ä¸Šã€‚å‡è®¾æœ‰ä»¥ä¸‹æ•°å­—ï¼š 191, 46, 85, 15, 92, 35, 31, 22 ç»è¿‡åŸºæ•°æ’åºç¬¬ä¸€æ¬¡æ‰«æä¹‹åï¼Œæ•°å­—è¢«åˆ†é…åˆ°å¦‚ä¸‹çš„ç›’å­é‡Œï¼š 12345678910Bin 0:Bin 1: 91, 31Bin 2: 92, 22Bin 3:Bin 4:Bin 5: 85, 15, 35Bin 6: 46Bin 7:Bin 8:Bin 9: æ ¹æ®ç›’å­çš„é¡ºåºï¼Œç¬¬ä¸€æ¬¡æ’åºçš„ç»“æœå¦‚ä¸‹ï¼š 191, 31, 92, 22, 85, 15, 35, 46 ç„¶åæ ¹æ®åä½ä¸Šçš„æ•°å€¼å†æ¬¡å°†ä¸Šè¿°æ’åºçš„ç»“æœåˆ†é…åˆ°ä¸åŒçš„ç›’å­é‡Œï¼š 12345678910Bin 0:Bin 1: 15Bin 2: 22Bin 3: 31, 35Bin 4: 46Bin 5: Bin 6: Bin 7: Bin 8: 85Bin 9: 91, 92 æœ€åï¼Œå°†ç›’å­ä¸­çš„æ•°å­—å–å‡ºï¼Œç»„æˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å³ä¸ºæ’å¥½åºçš„æ•°å­—ï¼š 115ï¼Œ 22ï¼Œ 31ï¼Œ 35ï¼Œ 46ï¼Œ 85ï¼Œ 91ï¼Œ 92 ä½¿ç”¨é˜Ÿåˆ—ä»£è¡¨ç›’å­ï¼Œå¯ä»¥å®ç°è¿™ä¸ªç®—æ³•ã€‚æˆ‘ä»¬éœ€è¦ä¹ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªå¯¹åº”ä¸€ä¸ªæ•°å­—ï¼Œå°†æ‰€æœ‰é˜Ÿåˆ—ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½¿ç”¨å–ä½™å’Œé™¤æ³•æ“ä½œå†³å®šä¸ªä½å’Œåä½ã€‚ç®—æ³•çš„å‰©ä½™éƒ¨åˆ†å°†æ•°å­—åŠ å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼Œæ ¹æ®ä¸ªä½æ•°å€¼å¯¹å…¶é‡æ–°æ’åºï¼Œç„¶åå†æ ¹æ®åä½ä¸Šçš„æ•°å€¼è¿›è¡Œæ’åºï¼Œç»“æœå³ä¸ºæ’å¥½åºçš„æ•°å­—ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788function Queue () &#123; this.dataStore = [] this.enqueue = enqueue this.dequeue = dequeue this.front = front this.back = back this.toString = toString this.count = count this.empty = empty&#125;function enqueue (element) &#123; this.dataStore.push(element)&#125;function dequeue () &#123; return this.dataStore.shift()&#125;function front () &#123; return this.dataStore[0]&#125;function back () &#123; return this.dataStore[this.dataStore.length -1]&#125;function toString () &#123; var retStr = '' for (var i = 0; i &lt; this.dataStore.length; i++) &#123; retStr += this.dataStore[i] + ' ' &#125; return retStr&#125;function count () &#123; return this.dataStore.length&#125;function empty () &#123; return this.dataStore.length === 0&#125;//åŸºæ•°æ’åºvar queues = [] //å®šä¹‰é˜Ÿåˆ—æ•°ç»„var nums = [] //å®šä¹‰æ•°å­—æ•°ç»„//é€‰åä¸ª0~99çš„éšæœºæ•°è¿›è¡Œæ’åºfor (var i = 0; i &lt; 10; i ++)&#123; queues[i] = new Queue() nums[i] = Math.floor( Math.random() * 101 )&#125;//æ’åºä¹‹å‰console.log( 'before radix sort: ' + nums )//åŸºæ•°æ’åºdistribution(nums, queues , 10 , 1)collect(queues, nums)distribution(nums, queues , 10 , 10)collect(queues, nums)//æ’åºä¹‹åconsole.info('after radix sort: ' + nums)//æ ¹æ®ç›¸åº”çš„ï¼ˆä¸ªä½å’Œåä½ï¼‰æ•°å€¼ï¼Œå°†æ•°å­—åˆ†é…åˆ°ç›¸åº”é˜Ÿåˆ—function distribution (nums, queues, n, digit) &#123; //digitè¡¨ç¤ºä¸ªä½æˆ–è€…åä½çš„å€¼ for(var i = 0; i &lt; n; i++)&#123; if(digit == 1)&#123; queues[nums[i] % 10].enqueue(nums[i]) &#125;else&#123; queues[Math.floor(nums[i] / 10)].enqueue(nums[i]) &#125; &#125; console.log(queues.toString())&#125;//ä»é˜Ÿåˆ—ä¸­æ”¶é›†æ•°å­—function collect (queues, nums) &#123; var i = 0 for (var digit = 0; digit &lt; 10 ; digit++ )&#123; while (!queues[digit].empty())&#123; nums[i++] = queues[digit].dequeue() &#125; &#125;&#125; ä¼˜å…ˆé˜Ÿåˆ—ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä»é˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ ï¼Œä¸€å®šæ˜¯æœ€æ–°å…¥é˜Ÿçš„å…ƒç´ ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä½¿ç”¨é˜Ÿåˆ—çš„åº”ç”¨ï¼Œåœ¨åˆ é™¤å…ƒç´ æ—¶ä¸å¿…éµå¾ªå…ˆè¿›å…ˆå‡ºçš„çº¦å®šã€‚è¿™ç§åº”ç”¨ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå«åšä¼˜å…ˆé˜Ÿåˆ—çš„æ•°æ®ç»“æ„æ¥è¿›è¡Œæ¨¡æ‹Ÿã€‚ ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦è€ƒè™‘ä¼˜å…ˆæƒçš„é™åˆ¶ã€‚ å…ˆæ¥å®šä¹‰å­˜å‚¨é˜Ÿåˆ—å…ƒç´ çš„å¯¹è±¡ï¼Œç„¶ååœ¨æ„å»ºæˆ‘ä»¬çš„ä¼˜å…ˆé˜Ÿåˆ—ç³»ç»Ÿï¼š 1234function Patient (name, code) &#123; this.name = name this.code = code&#125; å˜é‡ code æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§ã€‚ ç°åœ¨éœ€è¦é‡æ–°å®šä¹‰ dequeue() æ–¹æ³•ï¼Œä½¿å…¶åˆ é™¤é˜Ÿåˆ—ä¸­æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚æˆ‘ä»¬è§„å®šï¼Œä¼˜å…ˆç çš„å€¼æœ€å°ï¼Œä»£è¡¨ä¼˜å…ˆçº§æœ€é«˜ã€‚æ–°çš„ dequeue() æ–¹æ³•éå†é˜Ÿåˆ—çš„åº•å±‚å­˜å‚¨æ•°ç»„ï¼Œä»ä¸­æ‰¾å‡ºä¼˜å…ˆç å€¼æœ€å°çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨æ•°ç»„çš„ splice() æ–¹æ³•åˆ é™¤ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚æ–°çš„ dequeue() æ–¹æ³•å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789function dequeue () &#123; var entry = 0 for (var i = 1; i &lt; this.dataStore.length; ++i) &#123; if (this.dataStore[i].code &lt; this.dataStore[entry].code) &#123; entry = i &#125; &#125; return this.dataStore.splice(entry, 1)&#125; ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879function Queue () &#123; this.dataStore = [] this.enqueue = enqueue this.dequeue = dequeue this.front = front this.back = back this.toString = toString this.count = count this.empty = empty&#125;function enqueue (element) &#123; this.dataStore.push(element)&#125;function dequeue () &#123; var entry = 0 for (var i = 1; i &lt; this.dataStore.length; ++i) &#123; if (this.dataStore[i].code &lt; this.dataStore[entry].code) &#123; entry = i &#125; &#125; return this.dataStore.splice(entry, 1)&#125;function front () &#123; return this.dataStore[0]&#125;function back () &#123; return this.dataStore[this.dataStore.length -1]&#125;function toString () &#123; var retStr = '' for (var i = 0; i &lt; this.dataStore.length; i++) &#123; retStr += this.dataStore[i].name + ' code:' + this.dataStore[i].code + ' ' &#125; return retStr&#125;function count () &#123; return this.dataStore.length&#125;function empty () &#123; return this.dataStore.length === 0&#125;function Patient (name, code) &#123; this.name = name this.code = code&#125;var p = new Patient('smith', 5)var ed = new Queue()ed.enqueue(p)p = new Patient('Jones', 4)ed.enqueue(p)p = new Patient('Wang', 6)ed.enqueue(p)p = new Patient('Qian', 1)ed.enqueue(p)p = new Patient('Brown', 1)ed.enqueue(p)var seen = ed.dequeue()console.log('Patient being treated: ' + seen[0].name)console.log('Patients watting to be seen:')console.log(ed.toString())seen = ed.dequeue()console.log('Patient being treated: ' + seen[0].name)console.log('Patients watting to be seen:')console.log(ed.toString())seen = ed.dequeue()console.log('Patient being treated: ' + seen[0].name)console.log('Patients watting to be seen:')console.log(ed.toString())","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ","slug":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ","date":"2019-03-15T12:57:52.000Z","updated":"2019-03-18T12:55:26.303Z","comments":true,"path":"2019/03/15/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ/","link":"","permalink":"http://yoursite.com/2019/03/15/JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ/","excerpt":"å¯¼è¯­ æ ˆæ˜¯å’Œåˆ—è¡¨ç±»ä¼¼çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥è§£å†³è®¡ç®—æœºä¸–ç•Œé‡Œçš„å¾ˆå¤šé—®é¢˜ã€‚","text":"å¯¼è¯­ æ ˆæ˜¯å’Œåˆ—è¡¨ç±»ä¼¼çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥è§£å†³è®¡ç®—æœºä¸–ç•Œé‡Œçš„å¾ˆå¤šé—®é¢˜ã€‚ å¯¹æ ˆçš„æ“ä½œæ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„åˆ—è¡¨ï¼Œæ ˆå†…çš„å…ƒç´ åªèƒ½é€šè¿‡åˆ—è¡¨çš„ä¸€ç«¯è®¿é—®ï¼Œè¿™ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶ã€‚æ ˆè¢«ç§°ä¸ºä¸€ç§åå…¥å…ˆå‡º (LIFOï¼Œlast-in-first-out) çš„æ•°æ®ç»“æ„ã€‚ ç”±äºæ ˆå…·æœ‰åå…¥å…ˆå‡ºçš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ä»»ä½•ä¸åœ¨æ ˆé¡¶çš„å…ƒç´ éƒ½æ— æ³•è®¿é—®ã€‚ä¸ºäº†å¾—åˆ°æ ˆåº•çš„å…ƒç´ ï¼Œå¿…é¡»å…ˆæ‹¿æ‰ä¸Šé¢çš„å…ƒç´ ã€‚ å¯¹æ ˆçš„ä¸¤ç§ä¸»è¦æ“ä½œæ˜¯å°†ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆå’Œå°†ä¸€ä¸ªå…ƒç´ å¼¹å‡ºæ ˆã€‚å…¥æ ˆä½¿ç”¨ push() æ–¹æ³•ï¼Œå‡ºæ ˆä½¿ç”¨ pop() æ–¹æ³•ã€‚ å¦ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œå°±æ˜¯é¢„è§ˆæ ˆé¡¶çš„å…ƒç´ ã€‚ pop() æ–¹æ³•è™½ç„¶å¯ä»¥è®¿é—®åˆ°æ ˆé¡¶çš„å…ƒç´ ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¹Ÿå°†æ ˆé¡¶å…ƒç´ æ°¸ä¹…æ€§åœ°åˆ é™¤äº†ã€‚peek() æ–¹æ³•åˆ™åªè¿”å›æ ˆé¡¶å…ƒç´ ï¼Œè€Œä¸åˆ é™¤å®ƒã€‚ ä¸ºäº†è®°å½•æ ˆé¡¶çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†å“ªé‡Œå¯ä»¥åŠ å…¥æ–°å…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡ top ã€‚å½“å‘æ ˆå†…å‹å…¥å…ƒç´ æ—¶ï¼Œè¯¥å˜é‡å¢å¤§ã€‚å½“ä»æ ˆå†…å¼¹å‡ºå…ƒç´ æ—¶ï¼Œè¯¥å˜é‡å‡å°ã€‚ push()ã€pop()ã€peek() æ˜¯æ ˆçš„3ä¸ªä¸»è¦æ–¹æ³•ï¼Œä½†æ˜¯æ ˆè¿˜æœ‰å…¶å®ƒæ–¹æ³•å’Œå±æ€§ã€‚clear() æ¸…é™¤æ ˆå†…æ‰€æœ‰å…ƒç´ ï¼Œlength å±æ€§è®°å½•æ ˆå†…å…ƒç´ çš„ä¸ªæ•°ï¼Œempty å±æ€§ï¼Œç”¨ä»¥è¡¨ç¤ºæ ˆå†…æ˜¯å¦æœ‰å…ƒç´ ã€‚ æ ˆçš„å®ç°å®ç°ä¸€ä¸ªæ ˆï¼Œé¦–å…ˆæ˜¯è¦å†³å®šå­˜å‚¨æ•°æ®çš„åº•å±‚æ•°æ®ç»“æ„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€‰ç”¨æ•°ç»„ã€‚ æˆ‘ä»¬ä»å®ç°ä»¥å®šä¹‰ Stack ç±»çš„æ„é€ å‡½æ•°å¼€å§‹ï¼š 123456789function Stack () &#123; this.dataStore = [] this.top = 0 this.push = push this.pop = pop this.peek = peek this.clear = clear this.length = length&#125; æˆ‘ä»¬ç”¨æ•°ç»„ dataStore æ¥ä¿å­˜æ ˆå†…çš„å…ƒç´ ï¼Œæ„é€ å‡½æ•°å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºæ•°ç»„ã€‚å˜é‡ top è®°å½•æ ˆé¡¶ä½ç½®ï¼Œè¢«æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸º 0 ï¼Œè¡¨ç¤ºæ ˆé¡¶å¯¹åº”æ•°ç»„çš„èµ·å§‹ä½ç½® 0 ã€‚å¦‚æœæœ‰å…ƒç´ è¢«å‹å…¥æ ˆå†…ï¼Œè¯¥å˜é‡çš„å€¼å°†éšä¹‹å˜åŒ–ã€‚ push() æ–¹æ³• â€“ å½“å‘æ ˆå†…å‹å…¥ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œéœ€è¦å°†å…¶ä¿å­˜åœ¨æ•°ç»„ä¸­å˜é‡ top æ‰€å¯¹åº”çš„ä½ç½®ï¼Œç„¶åå°† top å€¼åŠ  1ï¼Œè®©å…¶æŒ‡å‘æ•°ç»„ä¸­ä¸‹ä¸€ä¸ªç©ºä½å€¼ã€‚ 123function push (element) &#123; this.dataStore[this.top++] = element&#125; è¿™é‡Œéœ€è¦æ³¨æ„ ++ æ“ä½œç¬¦çš„ä½ç½®ï¼Œå®ƒæ”¾åœ¨ this.top çš„åé¢ï¼Œè¿™æ ·æ–°å…¥æ ˆçš„å…ƒç´ å°±ä¼šè¢«æ”¾åœ¨ top çš„å½“å‰å€¼æŒ‡å‘çš„ä½ç½®ï¼Œç„¶åå†å°† top çš„å€¼åŠ  1 ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®ã€‚ pop() æ–¹æ³• â€“ è¿”å›æ ˆé¡¶å…ƒç´ ï¼ŒåŒæ—¶å°†å˜é‡ top çš„å€¼å‡ 1 ã€‚ 123function pop () &#123; return this.dataStore[--this.top]&#125; peek() æ–¹æ³• â€“ è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œå³å°†å˜é‡ top çš„å€¼å‡ 1 ã€‚ 123function peek () &#123; return this.dataStore[this.top - 1]&#125; å¦‚æœå¯¹ä¸€ä¸ªç©ºæ ˆè°ƒç”¨ peek() æ–¹æ³•ï¼Œç»“æœä¸º undefined ã€‚ length() æ–¹æ³• â€“ é€šè¿‡è¿”å›å˜é‡ top å€¼å¾—æ–¹å¼æ¥è·å–æ ˆå†…å­˜å‚¨äº†å¤šå°‘å…ƒç´ ã€‚ clear() â€“ å°†å˜é‡ top çš„å€¼è®¾ä¸º 0 ï¼Œè½»æ¾æ¸…ç©ºä¸€ä¸ªæ ˆã€‚ 123function clear () &#123; this.top = 0&#125; ä½¿ç”¨ Stack ç±»åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›é—®é¢˜ç‰¹åˆ«é€‚åˆç”¨æ ˆæ¥è§£å†³ï¼š æ•°åˆ¶é—´çš„ç›¸äº’è½¬æ¢å¯ä»¥åˆ©ç”¨æ ˆå®ç°ä¸€ä¸ªæ•°å­—ä»ä¸€ç§æ•°åˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§æ•°åˆ¶ã€‚å‡è®¾æƒ³å°†æ•°å­— n è½¬æ¢ä¸ºä»¥ b ä¸ºåŸºæ•°çš„æ•°å­—ï¼Œå®ç°è½¬æ¢çš„ç®—æ³•å¦‚ä¸‹(æ³¨ï¼šæ­¤ç®—æ³•åªé’ˆå¯¹åŸºæ•°ä¸º2â€”9çš„æƒ…å†µ)ï¼š (1) æœ€é«˜ä½ä¸º n % bï¼Œå°†æ­¤ä½å‹å…¥æ ˆã€‚(2) ä½¿ç”¨ n / b ä»£æ›¿ n ã€‚(3) é‡å¤æ­¥éª¤ 1 å’Œ 2 ï¼Œç›´åˆ° n ç­‰äº 0 ï¼Œä¸”æ²¡æœ‰ä½™æ•°ã€‚(4) æŒç»­å°†æ ˆå†…å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ°æ ˆä¸ºç©ºï¼Œä¾æ¬¡å°†è¿™äº›å…ƒç´ æ’åˆ—ï¼Œå°±å¾—åˆ°è½¬æ¢åæ•°å­—çš„å­—ç¬¦ä¸²å½¢å¼ã€‚ 123456789101112function mulBase (num, base) &#123; var s = new Stack() do &#123; s.push(num % base) num = Math.floor(num /= base) &#125; while (num &gt; 0) var converted = '' while (s.length() &gt; 0) &#123; converted += s.pop() &#125; return converted&#125; å›æ–‡å›æ–‡æ˜¯æŒ‡è¿™æ ·ä¸€ç§ç°è±¡ï¼šä¸€ä¸ªå•è¯ã€çŸ­è¯­æˆ–æ•°å­—ï¼Œä»å‰å¾€åå†™å’Œä»åå¾€å‰å†™éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ï¼šå•è¯ â€˜dadâ€™ , â€˜racecarâ€™ å°±æ˜¯å›æ–‡ã€‚ ä½¿ç”¨æ ˆï¼Œå¯ä»¥è½»æ¾åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚æˆ‘ä»¬å°†æ‹¿åˆ°çš„å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ä»å·¦åˆ°å³çš„é¡ºåºå‹å…¥æ ˆã€‚å½“å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦éƒ½å…¥æ ˆåï¼Œæ ˆå†…å°±ä¿å­˜äº†ä¸€ä¸ªåè½¬åçš„å­—ç¬¦ä¸²ï¼Œæœ€åçš„å­—ç¬¦åœ¨æ ˆé¡¶ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨æ ˆåº•ã€‚ å­—ç¬¦ä¸²å®Œæ•´å‹å…¥æ ˆå†…åï¼Œé€šè¿‡æŒç»­å¼¹å‡ºæ ˆä¸­çš„æ¯ä¸ªå­—æ¯å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åˆšå¥½ä¸åŸæ¥çš„å­—ç¬¦ä¸²é¡ºåºç›¸åã€‚æˆ‘ä»¬åªéœ€æ¯”è¾ƒè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å³å¯ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œå°±æ˜¯ä¸€ä¸ªå›æ–‡ã€‚ 1234567891011function isPalindrome (word) &#123; var s = new Stack() for (let i of word) &#123; s.push(i) &#125; var rWord = '' while (s.length() &gt; 0) &#123; rWord += s.pop() &#125; return rWord == word&#125; é€’å½’æ¼”ç¤ºä¸ºäº†æ¼”ç¤ºå¦‚ä½•ç”¨æ ˆå®ç°é€’å½’ï¼Œè€ƒè™‘ä¸€ä¸‹æ±‚é˜¶ä¹˜å‡½æ•°çš„é€’å½’å®šä¹‰ï¼Œé¦–å…ˆçœ‹çœ‹ 5 çš„é˜¶ä¹˜æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š 123456function factorial (n) &#123; if (n === 0) &#123; return 1 &#125; return n * factorial(n - 1)&#125; ä½¿ç”¨æ ˆæ¨¡æ‹Ÿé€’å½’çš„è¿‡ç¨‹ 123456789101112function fact (n) &#123; var s = new Stack() while (n &gt; 1) &#123; s.push(n--) &#125; var product = 1 console.log(s.length()) while (s.length() &gt; 0) &#123; product *= s.pop() &#125; return product&#125;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²","slug":"Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²","date":"2018-11-27T04:19:00.000Z","updated":"2019-06-04T02:56:38.236Z","comments":true,"path":"2018/11/27/Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²/","link":"","permalink":"http://yoursite.com/2018/11/27/Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²/","excerpt":"å¯¼è¯­ åŒ11æŠ¢è´­äº†ä¸€å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¶å·¥ä½œä¸å¿™ï¼Œæäº†ä¸€ä¸ªç®€å•çš„nodeé¡¹ç›®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†nodeé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECSï¼Ÿ","text":"å¯¼è¯­ åŒ11æŠ¢è´­äº†ä¸€å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¶å·¥ä½œä¸å¿™ï¼Œæäº†ä¸€ä¸ªç®€å•çš„nodeé¡¹ç›®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†nodeé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECSï¼Ÿ æ­¤æ•™ç¨‹ä»…ä¾›æ–°æ‰‹å€Ÿé‰´ï¼Œå¤šå°‘æœ‰äº›ç¼ºé™·ï¼Œæœ‰é—®é¢˜è¿˜æœ›å„ä½å¤§ä½¬æŒ‡æ­£ã€‚ å‡†å¤‡å·¥ä½œ ä¸€ä¸ªåŸŸå é˜¿é‡Œäº‘ECS(å®ä¾‹é•œåƒï¼šCentOS7.4) å¦‚æœä½¿ç”¨Windowsï¼Œæ¨èxshellã€‚å¦‚æœæ˜¯Macï¼Œæ¨èiTerm2 (æ³¨ï¼šå› æœ¬äººä½¿ç”¨Macï¼Œä»¥ä¸‹å‡å·²Macä¸ºä¸») ç»ˆç«¯è¿æ¥æœåŠ¡å™¨ æ‰“å¼€iTerm2ï¼Œè¾“å…¥è¿æ¥å‘½ä»¤ssh username@ipå…¬ç½‘åœ°å€ï¼Œå›è½¦ï¼Œè¾“å…¥ä½ åœ¨è´­ä¹°æœåŠ¡å™¨æ—¶è®¾ç½®çš„å¯†ç ã€‚ å¯†ç è¾“å…¥æ­£ç¡®ï¼Œè¿›å…¥æœåŠ¡å™¨ã€‚ cd / è¿›å…¥æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½• mkdir softï¼Œç”¨æ¥æ”¾æˆ‘ä»¬çš„å®‰è£…åŒ…ã€‚ å®‰è£…Nodeä¸‹è½½nodeåŒ…ã€‚ 1wget https://nodejs.org/dist/v8.9.4/node-v8.9.4.tar.gz ä¸‹è½½å®Œæˆåï¼Œè¿›è¡Œå‹ç¼©åŒ…è§£å‹ã€‚ 1tar -zxvf v8.9.4.tar.gz è¿›å…¥è§£å‹å¥½çš„ç›®å½•å¹¶æ‰§è¡Œconfigé…ç½®å‘½ä»¤ã€‚ 1cd node-v8.9.4 &amp;&amp; ./configure æ‰§è¡Œç¼–è¯‘åŠå®‰è£…å‘½ä»¤ã€‚ 1make &amp;&amp; make install ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ä¹‹åï¼Œä¸€ä¸ªnodeç¯å¢ƒå°±å®‰è£…å¥½äº†ã€‚å¯ä»¥é€šè¿‡node -v æˆ–è€… npm -væ¥æ£€æŸ¥å½“å‰node/npmæ˜¯å¦å®‰è£…æˆåŠŸã€‚ å¦‚æœä½ éœ€è¦å‡çº§nodeå’Œnpmç‰ˆæœ¬ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚ 12npm i -g nn stable å®‰è£…nrmå’Œpm2nrmæ˜¯ä¸€ä¸ªç®¡ç†npmæºçš„æ’ä»¶ï¼Œæ–¹ä¾¿åˆ‡æ¢å›½å†…å¤–ä»¥åŠç§äººnpmåº“ã€‚ pm2æ˜¯nodeæœåŠ¡å™¨çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œæ–¹ä¾¿ç®¡ç†å½“å‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æœåŠ¡ã€‚ è¿™é‡Œè¯´ä¸€ä¸‹cnpmï¼Œå¦‚æœå®‰è£…ä¾èµ–åŒ…å¾ˆæ…¢æˆ–è€…æ ¹æœ¬æ²¡è¿›åº¦ï¼Œè¾“å…¥å‘½ä»¤ 1npm install -g cnpm --registry=https://registry.npm.taobao.org ç„¶åä½¿ç”¨cnpmä»£æ›¿npmå®‰è£…ã€‚ å›åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„softç›®å½•ã€‚ nrmå®‰è£…nrmã€‚ 1npm install -g nrm å¸¸ç”¨å‘½ä»¤ï¼š nrm add name address æ·»åŠ æ–°çš„æº nrm use name åˆ‡æ¢åˆ°æº nrm ls æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æº pm2å®‰è£…pm2ã€‚ 1npm install -g pm2 å¸¸ç”¨å‘½ä»¤ï¼š pm2 list æŸ¥çœ‹pm2å®ˆæŠ¤æœåŠ¡ pm2 start index.js å¯åŠ¨ä¸€ä¸ªpm2å®ˆæŠ¤è¿›ç¨‹å‘½ä»¤ pm2 restart id/name é‡å¯ä¸€ä¸ªpm2å®ˆæŠ¤è¿›ç¨‹å‘½ä»¤ pm2 delete id/name åˆ é™¤ä¸€ä¸ªæ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹ pm2 delete all åˆ é™¤æ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹ pm2 monit æŸ¥çœ‹pm2çš„æ¶ˆè€— å®‰è£…mysqlå¸è½½å·²æœ‰çš„mysqlã€‚ 12rpm -qa|grep -i mysqlyum remove &apos;mysql&apos; ä¸‹è½½mysqlæºã€‚ 12// 5.7.24wget http://repo.mysql.com//mysql57-community-release-el7-7.noarch.rpm å®‰è£…ä¸‹è½½çš„æºã€‚ 1rpm -ivh mysql57-community-release-el7-7.noarch.rpm ä¸‹è½½å®‰è£…mysqlã€‚ 123yum install mysql-serveryum install mysql-develyum install mysql å¯åŠ¨mysqlã€‚ 1service mysqld start å¸¸ç”¨å‘½ä»¤ï¼š service mysqld status æŸ¥çœ‹mysqlå½“å‰çš„çŠ¶æ€ service mysqld stop åœæ­¢mysql service mysqld restart é‡å¯mysql service mysqld start å¯åŠ¨mysql å¦‚æœé‡åˆ°é”™è¯¯ï¼šERROR 2002 (HY000): Canâ€™t connect to local MySQL server through socket /var/lib/mysql/mysql.sockâ€™ï¼Œè¯·åœ¨tmpä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼š 1ln -s /tmp/mysql.sock /var/lib/mysql æ‰“å¼€my.cnfå¹¶ä¿®æ”¹ã€‚ 1vi /etc/my.cnf é‡å¯æ•°æ®åº“ã€‚ 1service mysqld restart ç™»å½•(é»˜è®¤rootæ˜¯æ²¡æœ‰å¯†ç çš„)ã€‚ 1mysql -u root è¿™æ—¶å‡ºç°ERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password: NO)ï¼Œç™»å½•rootå¸å·éœ€è¦å¯†ç ï¼Œç°åœ¨æˆ‘ä»¬æ²¡æœ‰è®¾ç½®å¯†ç ï¼Œå“ªæ¥çš„å¯†ç ã€‚ äºæ˜¯æˆ‘ä»¬å¼€å§‹å¿˜è®°å¯†ç çš„æ“ä½œ ç¬¬ä¸€æ­¥ï¼Œåœ¨/etc/my.cnfæ–‡ä»¶ä¸­æ·»åŠ skip-grant-tablesç¬¬äºŒæ­¥ï¼Œé‡å¯mysqlï¼Œservice mysqld restartç¬¬ä¸‰æ­¥ï¼Œç™»å½•mysqlï¼Œmysql -u rootç¬¬å››æ­¥ï¼Œä¿®æ”¹å¯†ç ï¼š 1234mysql&gt;use mysql;mysql&gt;update mysql.user set authentication_string=password(&apos;your password&apos;) where user=&apos;root&apos;;mysql&gt;flush privileges;mysql&gt;exit; ç¬¬äº”æ­¥ï¼Œæ¢å¤/etc/my.cnfï¼Œå°†skip-grant-tablesåˆ é™¤æˆ–è€…æ³¨é‡Šæ‰ç¬¬å…­æ­¥ï¼Œé‡å¯mysqlï¼Œservice mysqld restart åˆ†é…ç”¨æˆ· hostæŒ‡å®šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ï¼Œæ­¤å¤„çš„â€localhostâ€ï¼Œæ˜¯æŒ‡è¯¥ç”¨æˆ·åªèƒ½åœ¨æœ¬åœ°ç™»å½•ï¼Œä¸èƒ½åœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šè¿œç¨‹ç™»å½•ï¼Œå¦‚æœæƒ³è¿œç¨‹ç™»å½•çš„è¯ï¼Œå°†â€localhostâ€æ”¹ä¸ºâ€%â€ï¼Œè¡¨ç¤ºåœ¨ä»»ä½•ä¸€å°ç”µè„‘ä¸Šéƒ½å¯ä»¥ç™»å½•;ä¹Ÿå¯ä»¥æŒ‡å®šæŸå°æœºå™¨å¯ä»¥è¿œç¨‹ç™»å½•ã€‚ 12CREATE USER &apos;username&apos;@&apos;host&apos; IDENTIFIED BY &apos;password&apos;;CREATE USER &apos;test&apos;@&apos;%&apos; IDENTIFIED BY &apos;password&apos;; ç»™åˆ›å»ºçš„ç”¨æˆ·æƒé™ privileges ç”¨æˆ·çš„æ“ä½œæƒé™,å¦‚SELECTï¼ŒINSERTï¼ŒUPDATEç­‰.å¦‚æœè¦æˆäºˆæ‰€çš„æƒé™åˆ™ä½¿ç”¨ALL databasename æ•°æ®åº“å tablename è¡¨å,å¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œæƒé™åˆ™å¯ç”¨è¡¨ç¤º, å¦‚.*. 1GRANT privileges ON databasename.tablename TO &apos;username&apos;@&apos;host&apos; å®‰è£…RedisRedisæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æ•°æ®ä»“åº“ï¼Œæ—¢å¯ä»¥åšnosqlæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥åšç¼“å­˜æ•°æ®åº“ã€‚ ä¸‹è½½å®‰è£…åŒ…ã€‚ 1wget http://download.redis.io/releases/redis-4.0.6.tar.gz è§£å‹å¹¶è¿›å…¥è§£å‹ä¹‹åçš„æ–‡ä»¶å¤¹ã€‚ 1tar -zxvf redis-4.0.6.tar.gz &amp;&amp;cd redis-4.0.6 ç¼–è¯‘å¹¶å®‰è£…ã€‚ 1make &amp;&amp; make install å¯åŠ¨redisæœåŠ¡ã€‚ 1redis-server redis.conf æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œä¸èƒ½å†è¾“å…¥ä»»ä½•å‘½ä»¤ï¼Œå› ä¸ºredis-serverå·²ç»å ç”¨äº†è¿™ä¸ªå‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚æˆ‘ä»¬éœ€è¦å†æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å¹¶è¿æ¥æœåŠ¡å™¨ã€‚ ä½¿ç”¨rediså®¢æˆ·ç«¯è¿æ¥RedisæœåŠ¡ï¼Œæ‰§è¡ŒRedisæ–‡ä»¶å¤¹ä¸‹çš„redis-cliæ–‡ä»¶redis-cliï¼Œè¾“å…¥å‡ ä¸ªå‘½ä»¤æµ‹è¯•ä¸€ä¸‹ç®€å•çš„set/getï¼š å…³æ‰å®¢æˆ·ç«¯ï¼ŒredisæœåŠ¡ä¹Ÿä¼šåœæ­¢ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹redis.confæ–‡ä»¶ï¼Œå°†daemonizedeçš„å€¼æ”¹ä¸ºyesã€‚ å†æ¬¡è¿è¡ŒRedisçš„å¯åŠ¨å‘½ä»¤redis-server redis.confï¼Œè¿™æ¬¡å°±ä¸ä¼šå ç”¨å‘½ä»¤è¡Œäº†ï¼Œå¯ä»¥ç»§ç»­æ“ä½œå…¶ä»–çš„ï¼ŒRedisæœåŠ¡ä¹Ÿä¸ä¼šåœæ­¢ã€‚ nginxnginxåœ¨è½¬å‘è¯·æ±‚ï¼Œè´Ÿè½½å‡è¡¡ç­‰æ–¹é¢éå¸¸æœ‰ç”¨ã€‚å®ƒå¯ä»¥å°†å‡ ä¸ªä¸åŒçš„æœåŠ¡é›†ä¸­åœ¨ä¸€ä¸ª80ç«¯å£ä¸‹ï¼Œæ ¹æ®åŸŸåæˆ–è€…è¯·æ±‚è·¯å¾„æ¥åŒºåˆ†ã€‚ åœ¨å®‰è£…nginxä¹‹å‰ï¼Œå…ˆè¦å®‰è£…å‡ ä¸ªä¾èµ–æ’ä»¶ã€‚ 12yum install -y pcre pcre-develyum install -y zlib zlib-devel å®‰è£…opensslã€‚ 1yum install -y openssl openssl-devel ä¸‹è½½nginxåŒ…ã€‚ 1wget https://nginx.org/download/nginx-1.15.6.tar.gz è§£å‹å¹¶è¿›å…¥è§£å‹å¥½çš„ç›®å½•ã€‚ 1tar -zxvf nginx-1.15.6.tar.gz &amp;&amp; cd nginx-1.15.6 æ‰§è¡Œé…ç½®å‘½ä»¤ã€‚ 1./configure ç¼–è¯‘å¹¶å®‰è£…ã€‚ 1make &amp;&amp; make install æŸ¥çœ‹å®‰è£…ç»“æœã€‚ 1whereis nginx è·³è½¬åˆ°å®‰è£…å¥½çš„nginxç›®å½•ä¸‹ï¼Œè¿›å…¥sbinç›®å½•ã€‚ 1cd /usr/local/nginx/sbin å¯åŠ¨nginxã€‚ 1./nginx å¸¸ç”¨å‘½ä»¤ï¼š ./nginx å¯åŠ¨nginx ./nginx -s stop åœæ­¢nginx ./nginx -s quit é€€å‡ºnginx ./nginx -s reload é‡å¯nginx å®‰è£…GitcentOSä¸Šæ²¡æœ‰å®‰è£…gitï¼Œæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚ 12yum install gitgit --version ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®åœ¨æœ¬åœ°æ­å»ºå¹¶æµ‹è¯•å¥½nodeé¡¹ç›®ï¼Œä¸Šä¼ åˆ°GitHubã€‚ç„¶ågit cloneä¸€ä¸‹ã€‚ é…ç½®ECSå®‰å…¨ç»„è§„åˆ™ï¼Œæš´éœ²3000æ¥å£ã€‚ å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨æ•°æ®åº“ï¼Œè¿è¡Œä¹‹å‰è¦å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼Œç„¶åå†è¿è¡Œé¡¹ç›®ï¼Œç™»å½•æ•°æ®åº“æ‰§è¡Œcreate database dabasename; 1234git clone https://github.com/***cd ***cnpm ipm2 start index.js æ³¨ï¼šé¡¹ç›®ç›‘å¬3000ç«¯å£ï¼Œå¦‚æœé¡ºåˆ©çš„è¯ï¼Œé¡¹ç›®å·²ç»è¿è¡Œèµ·æ¥äº†ã€‚ å¯ä»¥ä½¿ç”¨pm2 listæŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨ï¼Œä½¿ç”¨pm2 logæ‰“å°æ—¥å¿—ã€‚ Linuxå¸¸ç”¨æ“ä½œæŒ‡ä»¤åˆ—è¡¨ å‘½ä»¤ è¯´æ˜ ssh username@ip è¿æ¥æœåŠ¡å™¨ cd path è·³è½¬åˆ°è·¯å¾„å¯¹åº”çš„ç›®å½•ä¸‹ rm filename åˆ é™¤æ–‡ä»¶ rm -rf path åˆ é™¤ç›®å½•åŠç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ ls [-a] æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œç›®å½•(-aï¼šæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶) ll æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶è¯¦æƒ…(æ–‡ä»¶æƒé™) pwd æŸ¥çœ‹å½“å‰è·¯å¾„çš„å®Œæ•´è·¯å¾„ which name é»˜è®¤ä½ç½®æŸ¥æ‰¾è¯¥åå­— mkdir dirname åˆ›å»ºç©ºç›®å½• cat path æŸ¥çœ‹æ–‡ä»¶å†…å®¹ cp origin target å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ mv origin target ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ ps -aux æ˜¾ç¤ºå½“å‰è¿›ç¨‹ kill -9 processid ç»“æŸè¿›ç¨‹ tar -zxvf filename è§£å‹æ–‡ä»¶ tar -zcvf filename å‹ç¼©æ–‡ä»¶ vi path è¿›å…¥æ–‡ä»¶ç¼–è¾‘æ¨¡å¼ viç¼–è¾‘æ–‡ä»¶ï¼ŒæŒ‰ä¸‹iè¿›å…¥ç¼–è¾‘æ¨¡å¼ vié€€å‡ºæ–‡ä»¶ï¼Œesc+:wqæˆ–esc+:xä¿å­˜é€€å‡º vié€€å‡ºæ–‡ä»¶ï¼Œesc+:qæˆ–esc+:q!å¼ºåˆ¶é€€å‡º","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"http://yoursite.com/categories/åç«¯/"}],"tags":[{"name":"Node","slug":"Node","permalink":"http://yoursite.com/tags/Node/"}]},{"title":"JS-æ·±æ‹·è´ä¸æµ…æ‹·è´","slug":"JS-æ·±æ‹·è´ä¸æµ…æ‹·è´","date":"2018-10-11T10:11:52.000Z","updated":"2018-12-11T14:03:41.509Z","comments":true,"path":"2018/10/11/JS-æ·±æ‹·è´ä¸æµ…æ‹·è´/","link":"","permalink":"http://yoursite.com/2018/10/11/JS-æ·±æ‹·è´ä¸æµ…æ‹·è´/","excerpt":"å¯¼è¯­ å½“æˆ‘ä»¬åœ¨JSä¸­å¤åˆ¶ä¸€ä¸ªæ•°æ®ï¼Œåœ¨å¤åˆ¶å¦‚stringï¼Œnumberç­‰åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œçœ‹ä¼¼æ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½†æ˜¯å½“å¤åˆ¶å¦‚arrayï¼Œobjectç±»å‹æ—¶ã€‚å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚","text":"å¯¼è¯­ å½“æˆ‘ä»¬åœ¨JSä¸­å¤åˆ¶ä¸€ä¸ªæ•°æ®ï¼Œåœ¨å¤åˆ¶å¦‚stringï¼Œnumberç­‰åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œçœ‹ä¼¼æ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½†æ˜¯å½“å¤åˆ¶å¦‚arrayï¼Œobjectç±»å‹æ—¶ã€‚å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚ å®ä¾‹ğŸŒ°ï¼š 1234var a = &#123;x: 10, y: 10&#125;var b = ab.x = 100b.y = 100 æ‰“å°ä¸€ä¸‹aå’Œbçš„å€¼ï¼š 12console.log(a) // &#123;x: 100, y: 200&#125;console.log(b) // &#123;x: 100, y: 200&#125; å‘ç°æ”¹å˜bçš„å€¼ï¼ŒåŒæ—¶ä¹Ÿæ”¹äº†açš„å€¼ã€‚ ğŸŒ°ï¼š 123var a = 10var b = ab = 20 æ‰“å°ä¸€ä¸‹aå’Œbçš„å€¼ï¼š 12console.log(a) // 10console.log(b) // 20 ??? bçš„å€¼æ”¹å˜å¹¶æ²¡æœ‰å¼•èµ·açš„å€¼æ”¹å˜ã€‚ å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹åœ¨JSä¸­ï¼Œå˜é‡ä¼ é€’æ–¹å¼åˆ†ä¸ºå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚å€¼ç±»å‹åŒ…æ‹¬Stringï¼ŒNumberï¼ŒNullï¼ŒBooleanï¼ŒUndefinedã€‚å¼•ç”¨ç±»å‹åŒ…æ‹¬Objectç±»çš„æ‰€æœ‰ï¼Œå¦‚Dateï¼ŒArrayï¼ŒFunctionã€‚ åœ¨å‚æ•°ä¼ é€’æ–¹å¼ä¸Šï¼Œå€¼ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ã€‚å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«ä¼ é€’(æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä¸¤è€…å¼•ç”¨åŒä¸€ä¸ªå€¼ï¼Œå½“ä¸€è€…æ”¹å˜å€¼ï¼Œå¦ä¸€è€…ä¹Ÿæ”¹å˜)ã€‚ JSè¿™æ ·è®¾è®¡çš„åŸå› åœ¨äºï¼šæŒ‰å€¼ä¼ é€’çš„ç±»å‹ï¼Œå¤åˆ¶ä¸€ä»½å­˜å…¥æ ˆå†…å­˜ï¼Œè¿™ç±»ç±»å‹ä¸€èˆ¬ä¸ä¼šå ç”¨å¤ªå¤šå†…å­˜ï¼Œè€Œä¸”æŒ‰å€¼ä¼ é€’ä¿è¯äº†å…¶è®¿é—®é€Ÿåº¦ã€‚æŒ‰å…±äº«ä¼ é€’çš„ç±»å‹ï¼Œæ˜¯å¤åˆ¶å…¶å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¤åˆ¶å…¶å€¼ï¼Œä¿è¯è¿‡å¤§çš„å¯¹è±¡ç­‰ä¸ä¼šå› ä¸ºä¸åœå¤åˆ¶å†…å®¹è€Œé€ æˆå†…å­˜çš„æµªè´¹ã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨äºæ˜¯å¦çœŸæ­£è·å–äº†ä¸€ä¸ªå¯¹è±¡çš„æ‹·è´å®ä½“ï¼Œè€Œä¸åªæ˜¯å¼•ç”¨ã€‚ æµ…æ‹·è´çš„å®ç°æ–¹å¼ç›´æ¥èµ‹å€¼ğŸŒ°ï¼š 123let obj = &#123;username: &apos;kobe&apos;, age: 39, sex: &#123;option1: &apos;ç”·&apos;, option2: &apos;å¥³&apos;&#125;&#125;let obj1 = objobj1.sex.option1 = &apos;ä¸ç”·ä¸å¥³&apos; // ä¿®æ”¹å¤åˆ¶çš„å¯¹è±¡ä¼šå½±å“åŸå¯¹è±¡ æ‰“å°obj1çš„å€¼ 1console.log(obj1) // &#123;username: &apos;kobe&apos;, age: 39, sex: &#123;option1: &apos;ä¸ç”·ä¸å¥³&apos;, option2: &apos;å¥³&apos;&#125;&#125; Object.assignğŸŒ°ï¼š 12345let obj = &#123; username: &apos;kobe&apos;&#125;;let obj1 = Object.assign(obj)obj1.username = &apos;wang&apos; æ‰“å°objçš„å€¼ 1console.log(obj) // &#123; username: &quot;wang&quot; &#125; Array.prototype.concatğŸŒ°ï¼š 12345let arr = [1, 3, &#123; username: &apos;kobe&apos;&#125;]let arr2=arr.concat()arr2[2].username = &apos;wang&apos; æ‰“å°arrçš„å€¼ 1console.log(arr) // [1, 3, &#123; username: &quot;wade&quot; &#125;] Array.prototype.sliceğŸŒ°ï¼š 12345let arr = [1, 3, &#123; username: &apos;kobe&apos;&#125;]let arr2=arr.slice()arr2[2].username = &apos;wang&apos; æ‰“å°arrçš„å€¼ 1console.log(arr) // [1, 3, &#123; username: &quot;wade&quot; &#125;] Array.prototype.concat vs Array.prototype.sliceå…³äºArrayçš„concatå’Œsliceè¡¥å……è¯´æ˜ï¼šArrayçš„concatå’Œsliceæ–¹æ³•ä¸æ”¹å˜åŸå§‹æ•°ç»„ï¼Œåªæ˜¯è¿”å›äº†ä¸€ä¸ªæµ…å¤åˆ¶åŸæ•°ç»„ä¸­çš„å…ƒç´ çš„ä¸€ä¸ªæ–°æ•°ç»„ã€‚ åŸæ•°ç»„ä¸­çš„å…ƒç´ ä¼šæŒ‰ç…§ä¸‹è¿°è§„åˆ™æ‹·è´ï¼š å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå¼•ç”¨ç±»å‹ï¼Œsliceæˆ–è€…concatä¼šæ‹·è´è¿™ä¸ªå¼•ç”¨åˆ°æ–°çš„æ•°ç»„é‡Œï¼Œä¸¤ä¸ªå¯¹è±¡å¼•ç”¨éƒ½å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœè¢«å¼•ç”¨çš„å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œåˆ™æ–°æ•°ç»„å’ŒåŸæ•°ç»„ä¸­çš„è¿™ä¸ªå…ƒç´ éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚ å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå€¼ç±»å‹ï¼Œsliceæˆ–è€…concatä¼šå¤åˆ¶ä¸€ä»½è¿™äº›å€¼åˆ°æ–°æ•°ç»„é‡Œã€‚åœ¨åˆ«çš„æ•°ç»„é‡Œä¿®æ”¹è¿™äº›å€¼ï¼Œå¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªæ•°ç»„ã€‚ ğŸŒ°ï¼š 123456let arr = [1, 3, &#123; username: &apos;kobe&apos;&#125;];let arr3 = arr.slice();arr3[1] = 2console.log(arr, arr3) æ‰“å°arrå’Œarr3çš„å€¼ 1234console.log(arr, arr3)// ---result// [1, 3, &#123; username: &quot;kobe&quot; &#125;]// [1, 2, &#123; username: &quot;kobe&quot; &#125;] æ·±æ‹·è´çš„å®ç°æ–¹å¼Object.assignObject.assignå¯ä»¥è¿›è¡Œä¸€å±‚æ·±åº¦æ‹·è´ ğŸŒ°ï¼š 12345678910var obj = &#123; name: &apos;wang&apos;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;&#125; &#125;;var obj1 = Object.assign(&#123;&#125;, obj1)obj1.age = 24console.log(obj, obj1) æ‰“å°objå’Œobj1çš„å€¼ 1234console.log(obj, obj1)// ----result// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; &#125; &#125;// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; &#125;, age: 24 &#125; ç„¶è€Œã€‚ã€‚ã€‚ã€‚ã€‚ ğŸŒ°ï¼š 123456789var obj = &#123; name: &apos;wang&apos;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;&#125; &#125;;var obj1 = Object.assign(&#123;&#125;, obj1)obj1.test4.age = 24 æ‰“å°objå’Œobj1çš„å€¼ 1234console.log(obj, obj1)// ----result// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; age: 24 &#125; &#125;// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; age: 24 &#125; &#125; JSON.parse(JSON.stringfy(obj))è¯´åˆ°æ·±æ‹·è´ï¼Œä½ è‚¯å®šä¼šæƒ³åˆ°JSON.parse(JSON.stringfy(obj))ã€‚ ğŸŒ°ï¼š 12345678var obj = &#123; name: &apos;wang&apos;, test: &#123; name: &apos;test&apos; &#125; &#125;;var obj1 = JSON.parse(JSON.stringify(obj))obj1.test.name = 24 æ‰“å°objå’Œobj1çš„å€¼ 1234console.log(obj, obj1)// ----result// &#123; name: &quot;wang&quot;, test: &#123; name: &quot;test&quot; &#125; &#125;// &#123; name: &quot;wang&quot;, test: &#123; name: 24 &#125; &#125; ç„¶è€Œã€‚ã€‚ã€‚ã€‚ ğŸŒ°ï¼š 12345678var obj = &#123; name: &apos;wang&apos;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;&#125; &#125;;var obj1 = JSON.parse(JSON.stringify(obj)) æ‰“å°objå’Œobj1çš„å€¼ 1234console.log(obj, obj1)// ---result// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123; &#125; &#125;// &#123; name: &quot;wang&quot;, test1: null, test4: &#123; &#125; &#125; ???test2å’Œtest3ä¸è§äº†ã€‚ã€‚ã€‚ã€‚ã€‚ JSON.stringify()æ–¹æ³•æ˜¯å°†ä¸€ä¸ªJavaScriptå€¼(å¯¹è±¡æˆ–è€…æ•°ç»„)è½¬æ¢ä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼Œä¸èƒ½æ¥å—å‡½æ•°ã€‚ æ‰‹å†™é€’å½’æ–¹æ³•1234567891011121314151617181920function deepClone(obj) &#123; let result let toString = Object.prototype.toString if (toString.call(obj) === &apos;[Object Array]&apos;) &#123; result = [] for (var i =0; i&lt;obj.length; i++) &#123; result[i] = deepClone(obj[i]) &#125; &#125; else if (toString.call(obj) === &apos;[Object Object]&apos;) &#123; result = &#123;&#125; for (var key in obj) &#123; if (obj.hasOwnProperty(key)) &#123; result[key] = deepClone(obj[key]) &#125; &#125; &#125; else &#123; return obj &#125; return result&#125; ğŸŒ°ï¼šè°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ 1234567891011var obj = &#123; name: &apos;wang&apos;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;&#125; &#125;;var obj1 = deepClone(obj)console.log(obj, obj21)// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: Object &#123; &#125; &#125;// &#123; name: &quot;wang&quot;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: Object &#123; &#125; &#125; jQueryå®ç°ğŸŒ°ï¼š 12345678var obj1 = &#123; name: &apos;wang&apos;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;&#125; &#125;;var obj2 = $.extend(true, &#123;&#125;, obj1) lodashå®ç°ğŸŒ°ï¼š 12345678var obj1 = &#123; name: &apos;wclimb&apos;, test1: null, test2: undefined, test3: function()&#123;alert(1)&#125;, test4: &#123;&#125; &#125;;var obj2 = _.cloneDeep(obj1)","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://yoursite.com/tags/JavaScript/"}]},{"title":"Webpack-åŸºç¡€ä½¿ç”¨","slug":"Webpack-åŸºç¡€ä½¿ç”¨","date":"2018-09-25T07:15:00.000Z","updated":"2018-12-11T14:03:41.515Z","comments":true,"path":"2018/09/25/Webpack-åŸºç¡€ä½¿ç”¨/","link":"","permalink":"http://yoursite.com/2018/09/25/Webpack-åŸºç¡€ä½¿ç”¨/","excerpt":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚","text":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ å®‰è£…ä½¿ç”¨npmæˆ–è€…yarnæ¥å®‰è£…webpack å…¨å±€å®‰è£…12345$ npm i webpack webpack-cli -gor$ yarn -g add webpack webpack-cli ç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œå°±å¯ä»¥å…¨å±€æ‰§è¡Œwebpackå‘½ä»¤äº†ã€‚æ³¨ï¼šwebpack-cliåœ¨4.xç‰ˆæœ¬ä¹‹åä¸å†ä½œä¸ºwebpackçš„ä¾èµ–äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶éœ€è¦å•ç‹¬å®‰è£…ã€‚ å±€éƒ¨å®‰è£…åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ›´æ¨èå°†webpackä½œä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–æ¥å®‰è£…ä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥æŒ‡å®šé¡¹ç›®ä¸­ä½¿ç”¨çš„webpackç‰ˆæœ¬ã€‚ 12345$ npm i webpack webpack-cli -Dor$ yarn add webpack webpack-cli -D ç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œwebpackä¼šå‡ºç°åœ¨é¡¹ç›®çš„package.jsonæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªnpm scripts: 1234567&quot;scripts&quot;: &#123; &quot;build&quot;: &quot;webpack --mode production&quot;&#125;,&quot;devDependencies&quot;: &#123; &quot;webpack&quot;: &quot;^4.1.1&quot;, &quot;webpack-cli&quot;: &quot;^2.0.12&quot;,&#125; é¡¹ç›®æ ¹ç›®å½•æ–°å»º./src/index.jsï¼Œä»»æ„å†™JSä»£ç ï¼Œä¿å­˜ï¼Œæ‰§è¡Œnpm run buildæˆ–è€…yarn buildå‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šå‘ç°é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å¢äº†ä¸€ä¸ªdistç›®å½•ï¼Œé‡Œé¢å­˜æ”¾äº†webpackæ„å»ºå¥½çš„main.jsæ–‡ä»¶ã€‚ webpack4.xå¯ä»¥é›¶é…ç½®å°±å¼€å§‹æ„å»ºï¼Œä½†æœ‰æ—¶æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦æ›´å¤šçš„åŠŸèƒ½ã€‚ åŸºæœ¬æ¦‚å¿µå…ˆæ”¾ä¸€å¼ ç»å…¸å›¾ï¼š å…¥å£å¦‚ä¸Šå›¾å·¦ä¸Šè§’çš„.jsï¼Œè¿™ä¸ª.jså°±æ˜¯å¤šä¸ªä»£ç æ¨¡å—çš„å…¥å£ï¼Œä¹Ÿæ˜¯webpackæ„å»ºçš„å…¥å£ã€‚webpackä¼šè¯»å–è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä»å®ƒå¼€å§‹è§£æä¾èµ–ï¼Œç„¶åè¿›è¡Œæ‰“åŒ…ã€‚ åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œå¦‚æœæ˜¯å•é¡µåº”ç”¨ï¼Œé‚£ä¹ˆå¯èƒ½å…¥å£åªæœ‰ä¸€ä¸ªã€‚å¦‚æœæ˜¯å¤šé¡µåº”ç”¨ï¼Œé‚£ä¹ˆç»å¸¸æ˜¯ä¸€ä¸ªé¡µé¢å¯¹åº”ä¸€ä¸ªæ„å»ºå…¥å£ã€‚ ç”¨æ³•ï¼šentry å•ä¸ªå…¥å£è¯­æ³•12345678910// ç®€å†™module.exports = &#123; entry: &apos;./src/index&apos;&#125;module.exports = &#123; entry: &#123; main: &apos;./src/index&apos; &#125;&#125; å¤šä¸ªå…¥å£è¯­æ³•123456module.exports = &#123; entry: &#123; foo: &apos;./src/foo&apos;, bar: &apos;./src/bar&apos; &#125;&#125; è¾“å‡ºè¾“å‡ºå³æŒ‡webpackæœ€ç»ˆæ„å»ºå‡ºæ¥çš„é™æ€æ–‡ä»¶ï¼Œæ„å»ºç»“æœçš„æ–‡ä»¶åï¼Œè·¯å¾„ç­‰éƒ½æ˜¯å¯ä»¥é…ç½®çš„ã€‚ ç”¨æ³•ï¼šoutput 12345678910111213141516171819202122module.exports = &#123; output: &#123; path: path.resolve(__dirname, &apos;dist&apos;), filename: &apos;bundle.js&apos; &#125;&#125;// å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒçš„æ–‡ä»¶module.exports = &#123; output: &#123; path: path.resolve(__dirname, &apos;dist&apos;), filename: &apos;[name].js&apos; &#125;&#125;// è·¯å¾„ä¸­ä½¿ç”¨hashï¼Œæ¯æ¬¡æ„å»ºéƒ½æœ‰ä¸€ä¸ªä¸åŒçš„hashå€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜module.exports = &#123; output: &#123; path: path.resolve(__dirname, &apos;dist/[hash]&apos;), filename: &apos;[name].js&apos; &#125;&#125; loaderloaderï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½¬æ¢å™¨ï¼Œè´Ÿè´£æŠŠæŸç§æ–‡ä»¶æ ¼å¼çš„å†…å®¹è½¬æ¢æˆwebpackå¯ä»¥æ”¯æŒæ‰“åŒ…çš„æ¨¡å—ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œwebpackä¼šé»˜è®¤æŠŠæ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆJSæ–‡ä»¶ï¼Œå¦‚æœå…¥å£æ–‡ä»¶ä¾èµ–ä¸€ä¸ª.pugæ¨¡å—æ–‡ä»¶æˆ–è€….scssæ ·å¼æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ç›¸åº”çš„loaderæ¥æŠŠä¸åŒæ ¼å¼çš„æ–‡ä»¶è½¬æ¢ä¸ºJavaScriptï¼Œä»¥ä¾¿æ‰“åŒ…ååœ¨æµè§ˆå™¨è¿è¡Œã€‚ ç”¨æ³•ï¼šmodule.rules 12345678910111213module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.jsx?/, // æ¡ä»¶ include: [ path.resolve(__dirname, &apos;src&apos;) ], // æ¡ä»¶ use: &apos;babel-loader&apos; // è§„åˆ™åº”ç”¨ç»“æœ &#125; // ä¸€ä¸ªObjectå³ä¸€æ¡è§„åˆ™ ] &#125;&#125; loaderåŒ¹é…è§„åˆ™ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªå› ç´ ï¼šåŒ¹é…æ¡ä»¶å’ŒåŒ¹é…è§„åˆ™åçš„åº”ç”¨ã€‚ è§„åˆ™æ¡ä»¶é…ç½®åŒ¹é…æ¡ä»¶é€šå¸¸ä½¿ç”¨è¯·æ±‚èµ„æºæ–‡ä»¶çš„ç»å¯¹è·¯å¾„æ¥è¿›è¡ŒåŒ¹é…ï¼Œå®˜æ–¹æ–‡æ¡£æˆä¸ºresourceã€‚ ä¸Šè¿°ä»£ç ä¸­çš„testå’Œincludeéƒ½ç”¨äºåŒ¹é…resourceè·¯å¾„ï¼Œæ˜¯resource.testå’Œresource.includeçš„ç®€å†™ã€‚ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š 123456789101112131415module.exports = &#123; // ... rules: [ &#123; resource: &#123; // resource çš„åŒ¹é…æ¡ä»¶ test: /\\.jsx?/, include: [ path.resolve(__dirname, &apos;src&apos;), ] &#125;, use: &apos;babel-loader&apos; &#125;, // ... ],&#125; webpackä¸ºloaderæä¾›äº†å¤šç§åŒ¹é…æ¡ä»¶çš„é…ç½®æ–¹å¼ï¼š test: â€¦ åŒ¹é…ç‰¹å®šæ¡ä»¶ include: â€¦ åŒ¹é…ç‰¹å®šè·¯å¾„ exclude: â€¦ æ’é™¤ç‰¹å®šè·¯å¾„ and: [] å¿…é¡»åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶ or: [] åŒ¹é…æ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ªæ¡ä»¶ not: [] æ’é™¤åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶ æ¡ä»¶å€¼ç±»å‹ï¼š å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼ˆç»å¯¹è·¯å¾„ï¼‰ æ­£åˆ™è¡¨è¾¾å¼ æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„ å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶ å‡½æ•°ï¼šè¿”å›trueè¡¨ç¤ºåŒ¹é… è§„åˆ™åº”ç”¨é…ç½®åŒ¹é…è§„åˆ™åçš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨useå­—æ®µï¼š 1234567891011121314151617181920rules: [ &#123; test: /\\.less/, use: [ &apos;style-loader&apos;, &#123; loader: &apos;css-loader&apos;, options: &#123; // ... &#125; &#125;, &#123; loader: &apos;less-loader&apos;, options: &#123; // ... &#125; &#125; ] &#125;] ä½¿ç”¨optionså¯ä»¥ç»™å¯¹åº”çš„loaderä¼ é€’ä¸€äº›é…ç½®é¡¹ã€‚ å¯¹äºä¸Šè¿°çš„lessè§„åˆ™åº”ç”¨é…ç½®ï¼Œä¸€ä¸ªlessæ¨¡å—æ–‡ä»¶å¯ä»¥ç»è¿‡å¤šä¸ªloaderçš„è½¬æ¢å¤„ç†ï¼Œæ‰§è¡Œé¡ºåºä¸ºä»å³åˆ°å·¦ã€‚ å¦‚æœå¤šä¸ªruleåŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œloaderçš„åº”ç”¨é¡ºåºåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ 12345678910rules: [ &#123; test: /\\.js$/, loader: &quot;eslint-loader&quot;, &#125;, &#123; test: /\\.js$/, loader: &quot;babel-loader&quot;, &#125;] eslint-loaderç”¨äºæ£€æŸ¥äººå·¥ç¼–å†™çš„ä»£ç ï¼Œbabel-loaderç”¨äºè½¬æ¢ä»£ç ã€‚æ‰€ä»¥ï¼Œeslint-loaderåº”è¯¥åœ¨babel-loaderä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä¿è¯æ‰§è¡Œé¡ºåºï¼Ÿ webpackä¸ºæ¯ä¸€ä¸ªåŒ¹é…è§„åˆ™æä¾›äº†enforceå­—æ®µæ¥é…ç½®å½“å‰ruleå¾—çš„loaderç±»å‹ã€‚pre(å‰ç½®) &gt; è¡Œå†… &gt; æ™®é€š &gt; åç½®(post)ã€‚ æˆ‘ä»¬è¦ç¡®ä¿eslint-loaderåœ¨babel-loaderä¹‹å‰æ‰§è¡Œï¼Œåªéœ€ç»™ruleè§„åˆ™é¡¹æ·»åŠ enforceå­—æ®µï¼Œå¹¶è®¾ç½®å…¶å€¼ä¸ºpreã€‚ 1234567891011rules: [ &#123; enforce: &apos;pre&apos;, test: /\\.js$/, loader: &quot;eslint-loader&quot;, &#125;, &#123; test: /\\.js$/, loader: &quot;babel-loader&quot;, &#125;] å¸¸ç”¨ruleé…ç½®é¡¹CSS123456789101112131415161718192021const ExtractTextPlugin = require(&apos;extract-text-webpack-plugin&apos;)module.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\\.css$/, // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader use: ExtractTextPlugin.extract(&#123; fallback: &apos;style-loader&apos;, use: &apos;css-loader&apos;, &#125;) &#125; ] &#125;, plugins: [ // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash] new ExtractTextPlugin(&apos;[name].css&apos;), ],&#125; css-loaderï¼šè´Ÿè´£è§£æCSSä»£ç ï¼Œä¸»è¦å¤„ç†CSSä¸­çš„ä¾èµ–ï¼ŒğŸŒ°ï¼š@importã€url()ç­‰ã€‚ style-loaderï¼šå°†css-loaderè§£æçš„ç»“æœè½¬å˜ä¸ºJSä»£ç ï¼Œè¿è¡Œæ—¶åŠ¨æ€æ’å…¥styleæ ‡ç­¾æ¥è®©CSSç”Ÿæ•ˆã€‚ é¢„å¤„ç†å™¨12345678910111213141516171819module.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\\.less/, // å› ä¸ºè¿™ä¸ªæ’ä»¶éœ€è¦å¹²æ¶‰æ¨¡å—è½¬æ¢çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨å®ƒå¯¹åº”çš„ loader use: ExtractTextPlugin.extract(&#123; fallback: &apos;style-loader&apos;, use: [&apos;css-loader&apos;, &apos;less-loader&apos;], &#125;) &#125; ] &#125;, plugins: [ // å¼•å…¥æ’ä»¶ï¼Œé…ç½®æ–‡ä»¶åï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨ [hash] new ExtractTextPlugin(&apos;[name].css&apos;) ]&#125; å›¾ç‰‡webpackæ— æ³•å¤„ç†å›¾ç‰‡æ ¼å¼ï¼Œæˆ‘ä»¬é€‰æ‹©file-loaderï¼Œå®ƒä¸ä»…å¯ä»¥å¤„ç†å›¾ç‰‡æ ¼å¼ï¼Œè¿˜å¯ç”¨äºå¤„ç†å…¶å®ƒå¾ˆå¤šç±»å‹çš„æ–‡ä»¶ã€‚ç›´æ¥è¾“å‡ºæ–‡ä»¶ï¼Œå°†æ„å»ºåçš„æ–‡ä»¶è·¯å¾„è¿”å›ã€‚ 1234567891011module.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\\.(png|jpg|gif)$/, use: &apos;file-loader&apos; &#125; ] &#125;&#125; BabelBabelæ˜¯ä¸€ä¸ªè®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ES6ã€ES7ç­‰æ–°æ ‡å‡†æ¥ç¼–å†™JSçš„ç¼–è¯‘å·¥å…·ã€‚ 1234567891011module.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\\.jsx?/, loader: &apos;babel-loader&apos; &#125; ] &#125;&#125; pluginæ’ä»¶æ˜¯webpackçš„æ”¯æŸ±åŠŸèƒ½ï¼Œåœ¨äºè§£å†³loaderæ— æ³•å®ç°çš„å…¶ä»–äº‹æƒ…ã€‚ ç”¨æ³•ï¼šplugin 12345const UglifyPlugin = require(&apos;uglifyjs-webpack-plugin&apos;)module.exports = &#123; plugins: [new UglifyPlugin()]&#125; å¸¸è§webpack pluginä½¿ç”¨HtmlWebpackPluginwebpacké»˜è®¤ä»ä½œä¸ºå…¥å£çš„JSæ–‡ä»¶è¿›è¡Œæ„å»ºï¼Œä½†é€šå¸¸ä¸€ä¸ªå‰ç«¯é¡¹ç›®éƒ½æ˜¯ä»ä¸€ä¸ªé¡µé¢(HTML)å‡ºå‘çš„ã€‚é€šå¸¸æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œä½¿ç”¨scriptæ ‡ç­¾ç›´æ¥å¼•å…¥æ„å»ºå¥½çš„jsæ–‡ä»¶ã€‚ 1&lt;script src=&quot;./dist/bundle.js&quot;&gt;&lt;/script&gt; ç„¶è€Œï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡ä»¶åæˆ–è€…è·¯å¾„å˜åŒ–ï¼Œæ¯æ¬¡æ„å»ºå®Œæˆåï¼Œæˆ‘ä»¬è¦æ‰‹åŠ¨å»ä¿®æ”¹HTMLæ–‡ä»¶ä¸­çš„jsè·¯å¾„? å¦‚æœèƒ½å°†HTMLå¼•ç”¨è·¯å¾„å’Œæˆ‘ä»¬çš„webpackæ„å»ºç»“æœå…³è”èµ·æ¥å°±å¥½äº†ã€‚ html-webpack-pluginå°±å¯ä»¥å¸®æˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 12345npm i html-webpack-plugin -Doryarn add html-webpack-plugin -D ç„¶ååœ¨webpacké…ç½®ä¸­ï¼Œå°†html-webpack-pluginæ·»åŠ åˆ°pluginsåˆ—è¡¨ä¸­ï¼š 12345678const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)module.exports = &#123; // ... plugins: [ new HtmlWebpackPlugin(), ],&#125; é…ç½®å¥½ä¹‹åï¼Œæ„å»ºæ—¶html-webpack-pluginä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œå…¶ä¸­ä¼šå¼•ç”¨æ„å»ºå‡ºæ¥çš„JSæ–‡ä»¶ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥åœ¨html-webpack-pluginä¸­ä¼ é€’æˆ‘ä»¬è‡ªå·±å†™å¥½çš„HTMLæ¨¡æ¿ï¼š 1234567891011const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;)module.exports = &#123; // ... plugins: [ new HtmlWebpackPlugin(&#123; filename: &quot;index.html&quot;, template: &quot;assets/index.html&quot; &#125;), ],&#125; DefinePluginDefinePluginæ˜¯webpackçš„å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡webpack.DefinePluginç›´æ¥å¼•ç”¨ã€‚ ä¸»è¦ç”¨äºåˆ›å»ºä¸€äº›åœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å˜é‡ã€‚ 12345678910111213module.exports = &#123; // ... plugins: [ new webpack.DefinePlugin(&#123; VERSION: JSON.stringfy(&apos;v1.1.0&apos;), // const VERSION = &apos;v1.1.0&apos; TWO: &apos;1 + 1&apos;, // const TWO = 2 BROWSER_SUPPORT: true, // const BROWSER_SUPPORT = &apos;true&apos; CONSTANTS: &#123; APP_VERSION: JSON.stringfy(&apos;1.1.1&apos;) &#125; // const CONSTANTS = &#123; APP_VERSION: &apos;1.1.1&apos;&#125; &#125;) ]&#125; é…ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åº”ç”¨ä»£ç ä¸­ï¼Œè®¿é—®é…ç½®å¥½çš„å˜é‡äº†ã€‚ 1console.log(VERSION) æœ‰å…³é…ç½®çš„å€¼ï¼Œç®€è¿°ä¸€ä¸‹é…ç½®è§„åˆ™ï¼š å¦‚æœé…ç½®çš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ•´ä¸ªå­—ç¬¦ä¸²ä¼šè¢«å½“åšä»£ç ç‰‡æ®µæ¥æ‰§è¡Œï¼Œå…¶ç»“æœå°†ä½œä¸ºæœ€ç»ˆé…ç½®çš„å€¼ã€‚ å¦‚æœé…ç½®çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸æ˜¯å¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ å¦‚æœé…ç½®çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡çš„æ‰€æœ‰keyä¼šä»¥åŒæ ·çš„æ–¹å¼å»å®šä¹‰ã€‚ CopyWebpackPluginé€šå¸¸æˆ‘ä»¬ä¼šæŠŠæºç å’Œèµ„æºæ–‡ä»¶æ”¾åœ¨é¡¹ç›®çš„srcç›®å½•ä¸‹ï¼Œæ„å»ºå®Œæˆåä¼šæœ‰ä¸€ä¸ªdistç›®å½•ï¼Œæˆ‘ä»¬ä¼šç›´æ¥æ‹¿distç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ¥å‘å¸ƒã€‚æœ‰äº›æ–‡ä»¶æ²¡æœ‰ç»è¿‡webpackå¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å®ƒä»¬ä¹Ÿèƒ½å‡ºç°åœ¨distç›®å½•ä¸‹ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨CopyWebpackPluginæ¥å¤„ç†ã€‚ 12345678910const CopyWebpackPlugin = require(&apos;copy-webpack-plugin&apos;)module.exports = &#123; // ... plugins: [ new CopyWebpackPlugin([ &#123; from: &apos;src/*.txt&apos;, to: &apos;dist/*.txt&apos; &#125; // from: é…ç½®æ¥æºï¼›to: é…ç½®ç›®æ ‡ ]) ]&#125; ExtractTextWebpackPluginé€šå¸¸CSSç»è¿‡ç›¸åº”çš„loaderå¤„ç†åï¼Œä¼šè½¬æ¢ä¸ºJSï¼Œå’Œindex.jsä¸€èµ·æ‰“åŒ…ã€‚å¦‚æœéœ€è¦å•ç‹¬æŠŠCSSæ–‡ä»¶åˆ†ç¦»å‡ºæ¥ï¼Œå°±éœ€è¦ä½¿ç”¨extract-text-webpack-pluginæ’ä»¶ã€‚ 1234567891011121314151617181920const ExtractTextWebpackPlugin = require(&apos;extract-text-webpack-plugin&apos;)module.exports = &#123; // ... module: &#123; rules: [ &#123; test: /\\.css$/, use: ExtractTextWebpackPlugin.extract(&#123; fallback: &apos;style-loader&apos;, use: &apos;css-loader&apos; &#125;) &#125; ] &#125;, plugins: [ // style.css ä½œä¸ºå•ç‹¬åˆ†ç¦»å‡ºæ¥çš„æ–‡ä»¶å new ExtractTextWebpackPlugin(&apos;style.css&apos;) ]&#125; å®ƒè¿˜å¯ä»¥ä¸ºæ¯ä¸€ä¸ªå…¥å£åˆ›å»ºå•ç‹¬åˆ†ç¦»çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œæœ€å¥½è¿™æ ·é…ç½®ï¼š 123plugins: [ new ExtractTextPlugin(&apos;[name].css&apos;),] ProvidePluginProvidePluginæ˜¯webpackçš„å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡webpack.ProvidePluginç›´æ¥å¼•ç”¨ã€‚ ä¸»è¦ç”¨äºè‡ªåŠ¨åŠ è½½æ¨¡å—ï¼Œä¸å¿…åˆ°å¤„importæˆ–require 1234567891011new webpack.ProvidePlugin(&#123; identifier: &apos;module&apos;, // ...&#125;)ornew webpack.ProvidePlugin(&#123; identifier: [&apos;module&apos;, &apos;property&apos;], // å³å¼•ç”¨ module ä¸‹çš„ propertyï¼Œç±»ä¼¼ import &#123; property &#125; from &apos;module&apos; // ...&#125;) ä»»ä½•æ—¶å€™ï¼Œå½“identifierè¢«å½“ä½œæœªèµ‹å€¼çš„å˜é‡æ—¶ï¼Œmoduleå°±ä¼šè‡ªåŠ¨è¢«åŠ è½½ï¼Œå¹¶ä¸”identifierä¼šè¢«è¿™ä¸ªmoduleè¾“å‡ºçš„å†…å®¹æ‰€èµ‹å€¼ã€‚ æ³¨ï¼šå¦‚æœæ˜¯ESçš„default exportï¼Œé‚£ä¹ˆä½ éœ€è¦æŒ‡å®šæ¨¡å—çš„defaultå±æ€§ï¼šidentifier: [â€˜moduleâ€™, â€˜defaultâ€™]ã€‚ IgnorePluginIgnorePluginæ˜¯webpackçš„å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡webpack.IgnorePluginç›´æ¥å¼•ç”¨ã€‚ ä¸»è¦ç”¨äºå¿½ç•¥æŸäº›ç‰¹å®šçš„æ¨¡å—ï¼Œè®©webpackä¸æŠŠè¿™äº›æŒ‡å®šçš„æ¨¡å—æ‰“åŒ…è¿›å»ã€‚ é…ç½®å‚æ•°ï¼šåŒ¹é…å¼•å…¥æ¨¡å—è·¯å¾„çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…æ¨¡å—çš„ä¸Šä¸‹æ–‡ã€‚ 123456module.exports = &#123; // ... plugins: [ new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/) ]&#125;","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/categories/å‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://yoursite.com/tags/Webpack/"}]}]}
