{"meta":{"title":"W | ä¸ªäººåšå®¢ | webå‰ç«¯","subtitle":"wangxiaobai","description":"å‰ç«¯","author":"wangxiaobai","url":"http://qiandream.cn"},"pages":[{"title":"categories","date":"2018-04-11T08:28:54.000Z","updated":"2018-04-11T08:29:04.000Z","comments":false,"path":"categories/index.html","permalink":"http://qiandream.cn/categories/index.html","excerpt":"","text":""},{"title":"friends","date":"2018-12-12T13:25:30.000Z","updated":"2020-02-07T14:06:57.630Z","comments":true,"path":"friends/index.html","permalink":"http://qiandream.cn/friends/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-04-11T08:28:32.000Z","updated":"2018-04-11T08:28:44.000Z","comments":false,"path":"tags/index.html","permalink":"http://qiandream.cn/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Webpack-Webpackç³»åˆ—ä¹‹ç®€ä»‹","slug":"Webpack-Webpackç³»åˆ—ä¹‹ç®€ä»‹","date":"2020-01-14T07:21:00.000Z","updated":"2020-02-07T03:56:32.065Z","comments":true,"path":"2020/01/14/webpack-webpack-xi-lie-zhi-jian-jie/","link":"","permalink":"http://qiandream.cn/2020/01/14/webpack-webpack-xi-lie-zhi-jian-jie/","excerpt":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚","text":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ Webpack ç®€ä»‹Webpackæ˜¯ä»€ä¹ˆWebpackæ˜¯ä¸€ä¸ªå¼€æºçš„JavaScriptæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå…¶æœ€æ ¸å¿ƒçš„åŠŸèƒ½æ˜¯è§£å†³æ¨¡å—ä¹‹é—´çš„ä¾èµ–ï¼ŒæŠŠå„ä¸ªæ¨¡å—æŒ‰ç…§ç‰¹å®šçš„è§„åˆ™å’Œé¡ºåºç»„ç»‡åœ¨ä¸€èµ·ï¼Œæœ€ç»ˆåˆå¹¶ä¸ºä¸€ä¸ªJSæ–‡ä»¶ï¼ˆæœ‰æ—¶ä¼šæœ‰å¤šä¸ªï¼Œè¿™é‡Œè®¨è®ºçš„åªæ˜¯æœ€åŸºæœ¬çš„æƒ…å†µï¼‰ã€‚ æ¨¡å—æ‰“åŒ…å·¥å…·æ¨¡å—æ‰“åŒ…å·¥å…·ï¼ˆmodule bundlerï¼‰çš„ä»»åŠ¡å°±æ˜¯è§£å†³æ¨¡å—é—´çš„ä¾èµ–ï¼Œä½¿å…¶æ‰“åŒ…åçš„ç»“æœèƒ½è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šã€‚å®ƒçš„å·¥ä½œæ–¹å¼ä¸»è¦åˆ†ä¸ºä¸¤ç§ å°†å­˜åœ¨ä¾èµ–å…³ç³»çš„æ¨¡å—æŒ‰ç…§ç‰¹å®šè§„åˆ™åˆå¹¶ä¸ºå•ä¸ªJSæ–‡ä»¶ï¼Œä¸€æ¬¡å…¨éƒ¨åŠ è½½è¿›é¡µé¢ä¸­ã€‚ åœ¨é¡µé¢åˆå§‹æ—¶åŠ è½½ä¸€ä¸ªå…¥å£æ¨¡å—ï¼Œå…¶ä»–æ¨¡å—å¼‚æ­¥åœ°è¿›è¡ŒåŠ è½½ã€‚ Webpack ä¼˜åŠ¿ é»˜è®¤æ”¯æŒå¤šç§æ¨¡å—æ ‡å‡†ï¼ŒåŒ…æ‹¬AMDã€CommonJSï¼Œä»¥åŠæœ€æ–°çš„ES6æ¨¡å—ã€‚ å®Œå¤‡çš„ä»£ç åˆ†å‰²ï¼ˆcode splittingï¼‰è§£å†³æ–¹æ¡ˆï¼Œé¦–å±åªåŠ è½½é‡è¦çš„éƒ¨åˆ†ã€‚ å¯ä»¥å¤„ç†å„ç§ç±»å‹çš„èµ„æºã€‚é™¤äº†JavaScriptä»¥å¤–ï¼ŒWebpackè¿˜å¯ä»¥å¤„ç†æ ·å¼ã€æ¨¡æ¿ï¼Œç”šè‡³å›¾ç‰‡ç­‰ã€‚ æ‹¥æœ‰åºå¤§çš„ç¤¾åŒºæ”¯æŒã€‚ å®‰è£…ä½¿ç”¨npmæˆ–è€…yarnæ¥å®‰è£…webpack å…¨å±€å®‰è£…$ npm i webpack webpack-cli -g or $ yarn -g add webpack webpack-cli ç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œå°±å¯ä»¥å…¨å±€æ‰§è¡Œwebpackå‘½ä»¤äº†ã€‚æ³¨ï¼šwebpack-cliåœ¨4.xç‰ˆæœ¬ä¹‹åä¸å†ä½œä¸ºwebpackçš„ä¾èµ–äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶éœ€è¦å•ç‹¬å®‰è£…ã€‚ å±€éƒ¨å®‰è£…åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ›´æ¨èå°†webpackä½œä¸ºé¡¹ç›®çš„å¼€å‘ä¾èµ–æ¥å®‰è£…ä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥æŒ‡å®šé¡¹ç›®ä¸­ä½¿ç”¨çš„webpackç‰ˆæœ¬ã€‚ $ npm i webpack webpack-cli -D or $ yarn add webpack webpack-cli -D ç­‰å¾…å®‰è£…å®Œæ¯•ï¼Œwebpackä¼šå‡ºç°åœ¨é¡¹ç›®çš„package.jsonæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªnpm scripts: &quot;scripts&quot;: { &quot;build&quot;: &quot;webpack --mode production&quot; }, &quot;devDependencies&quot;: { &quot;webpack&quot;: &quot;^4.1.1&quot;, &quot;webpack-cli&quot;: &quot;^2.0.12&quot;, } webpack-dev-serverwebpack-dev-serverå¯ä»¥çœ‹ä½œä¸€ä¸ªæœåŠ¡è€…ï¼Œå®ƒçš„ä¸»è¦å·¥ä½œå°±æ˜¯æ¥æ”¶æµè§ˆå™¨çš„è¯·æ±‚ï¼Œç„¶åå°†èµ„æºè¿”å›ã€‚å½“æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå…ˆè®©Webpackè¿›è¡Œæ¨¡å—æ‰“åŒ…å¹¶å°†èµ„æºå‡†å¤‡å¥½ï¼ˆåœ¨ç¤ºä¾‹ä¸­å°±æ˜¯bundle.jsï¼‰ã€‚å½“webpack-dev-serveræ¥æ”¶åˆ°æµè§ˆå™¨çš„èµ„æºè¯·æ±‚æ—¶ï¼Œå®ƒä¼šé¦–å…ˆè¿›è¡ŒURLåœ°å€æ ¡éªŒã€‚å¦‚æœè¯¥åœ°å€æ˜¯èµ„æºæœåŠ¡åœ°å€ï¼ˆä¸Šé¢é…ç½®çš„publicPathï¼‰ï¼Œå°±ä¼šä»Webpackçš„æ‰“åŒ…ç»“æœä¸­å¯»æ‰¾è¯¥èµ„æºå¹¶è¿”å›ç»™æµè§ˆå™¨ã€‚åä¹‹ï¼Œå¦‚æœè¯·æ±‚åœ°å€ä¸å±äºèµ„æºæœåŠ¡åœ°å€ï¼Œåˆ™ç›´æ¥è¯»å–ç¡¬ç›˜ä¸­çš„æºæ–‡ä»¶å¹¶å°†å…¶è¿”å›ã€‚ $ npm i webpack-dev-server -D ä¸ºäº†ä¾¿æ·åœ°å¯åŠ¨webpack-dev-serverï¼Œæˆ‘ä»¬åœ¨package.jsonä¸­æ·»åŠ ä¸€ä¸ªdevæŒ‡ä»¤ï¼š \"scripts\": { \"build\": \"webpack\", \"dev\": \"webpack-dev-server\" } æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹webpack-dev-serverè¿›è¡Œé…ç½®ã€‚ç¼–è¾‘webpack.config.jså¦‚ä¸‹ï¼š module.exports = { entry: \"./src/index.js\", output: { filename: \"./bundle.js\" }, mode: \"development\", devServer: { publicPath: \"/dist\" } } è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚ç›´æ¥ç”¨Webpackå¼€å‘å’Œä½¿ç”¨webpack-dev-serveræœ‰ä¸€ä¸ªå¾ˆå¤§çš„åŒºåˆ«ï¼Œå‰è€…æ¯æ¬¡éƒ½ä¼šç”Ÿæˆbudnle.jsï¼Œè€Œwebpack-dev-serveråªæ˜¯å°†æ‰“åŒ…ç»“æœæ”¾åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸ä¼šå†™å…¥å®é™…çš„bundle.jsï¼Œåœ¨æ¯æ¬¡webpack-dev-serveræ¥æ”¶åˆ°è¯·æ±‚æ—¶éƒ½åªæ˜¯å°†å†…å­˜ä¸­çš„æ‰“åŒ…ç»“æœè¿”å›ç»™æµè§ˆå™¨ã€‚ webpack-dev-serverè¿˜æœ‰ä¸€é¡¹å¾ˆä¾¿æ·çš„ç‰¹æ€§å°±æ˜¯live-reloadingï¼ˆè‡ªåŠ¨åˆ·æ–°ï¼‰ã€‚ æ³¨ï¼šå…³äºå†…å®¹è‡ªåŠ¨æ›´æ–°ï¼Œwebpack-dev-server ä¸ hot-module-replacementï¼ˆæ¨¡å—çƒ­æ›¿æ¢ï¼‰çš„åŒºåˆ«åœ¨äºï¼šå‰è€…ä¼šåˆ·æ–°æµè§ˆå™¨ï¼Œåè€…ä¸éœ€è¦åˆ·æ–°æµè§ˆå™¨å°±èƒ½è·å¾—æ›´æ–°ä¹‹åçš„å†…å®¹ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://qiandream.cn/tags/Webpack/"}]},{"title":"Webpack-Webpackç³»åˆ—ä¹‹é¢„å¤„ç†å™¨","slug":"Webpack-Webpackç³»åˆ—ä¹‹æ ·å¼å¤„ç†","date":"2020-01-14T07:21:00.000Z","updated":"2020-02-07T13:50:51.364Z","comments":true,"path":"2020/01/14/webpack-webpack-xi-lie-zhi-yang-shi-chu-li/","link":"","permalink":"http://qiandream.cn/2020/01/14/webpack-webpack-xi-lie-zhi-yang-shi-chu-li/","excerpt":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚","text":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ æ ·å¼å¤„ç†åˆ†ç¦»æ ·å¼æ–‡ä»¶Webpackç¤¾åŒºæœ‰ä¸“é—¨çš„æ’ä»¶ï¼šextract-text-webpack-pluginï¼ˆé€‚ç”¨äºWebpack 4ä¹‹å‰ç‰ˆæœ¬ï¼‰å’Œmini-css-extract-pluginï¼ˆé€‚ç”¨äºWebpack 4åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ï¼Œå®ƒä»¬å°±æ˜¯ä¸“é—¨ç”¨äºæå–æ ·å¼åˆ°CSSæ–‡ä»¶çš„ã€‚ extract-text-webpack-pluginnpm i extract-text-webpack-plugin åœ¨ webpack.config.js ä¸­å¼•å…¥ï¼š const ExtractTextPlugin = require('extract-text-webpack-plugin') module.exports = { // ... module: { rules: [ { test: /\\.css$/, use: ExtractTextPlugin.extract({ fallback: 'style-loader', use: 'css-loader' }) } ]}, plugins: [ new ExtractTextPlugin('bundle.css') ] } å†…éƒ¨çš„fallbackå±æ€§ç”¨äºæŒ‡å®šå½“æ’ä»¶æ— æ³•æå–æ ·å¼æ—¶æ‰€é‡‡ç”¨çš„loaderã€‚ useï¼ˆextractæ–¹æ³•é‡Œé¢çš„ï¼‰ç”¨äºæŒ‡å®šåœ¨æå–æ ·å¼ä¹‹å‰é‡‡ç”¨å“ªäº›loaderæ¥é¢„å…ˆè¿›è¡Œå¤„ç†ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦åœ¨Webpackçš„pluginsé…ç½®ä¸­æ·»åŠ è¯¥æ’ä»¶ï¼Œå¹¶ä¼ å…¥æå–åçš„èµ„æºæ–‡ä»¶åã€‚ å¤šæ ·å¼æ–‡ä»¶å¤„ç†ä¸Šé¢æˆ‘ä»¬å°†bundle.cssä½œä¸ºæ–‡ä»¶åä¼ ç»™äº†extract-text-webpack-pluginï¼Œä½†å½“å·¥ç¨‹æœ‰å¤šä¸ªå…¥å£æ—¶å°±ä¼šå‘ç”Ÿé‡åé—®é¢˜ã€‚å°±åƒåœ¨å‰é¢çš„ç« èŠ‚ä¸­æˆ‘ä»¬é…ç½®åŠ¨æ€çš„output.filenameä¸€æ ·ï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿè¦å¯¹æ’ä»¶æå–çš„CSSæ–‡ä»¶ä½¿ç”¨ç±»ä¼¼æ¨¡æ¿çš„å‘½åæ–¹å¼ã€‚ const ExtractTextPlugin = require('extract-text-webpack-plugin') module.exports = { // ... module: { rules: [ { test: /\\.css$/, use: ExtractTextPlugin.extract({ fallback: 'style-loader', use: 'css-loader' }) } ]}, plugins: [ new ExtractTextPlugin('[name].css') ] } mini-css-extract-pluginè¯´åˆ°mini-css-extract-pluginçš„ç‰¹æ€§ï¼Œæœ€é‡è¦çš„å°±æ˜¯å®ƒæ”¯æŒæŒ‰éœ€åŠ è½½CSSï¼Œä»¥å‰åœ¨ä½¿ç”¨extract-text-webpack-pluginçš„æ—¶å€™æˆ‘ä»¬æ˜¯åšä¸åˆ°è¿™ä¸€ç‚¹çš„ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œa.jsé€šè¿‡import()å‡½æ•°å¼‚æ­¥åŠ è½½äº†b.jsï¼Œb.jsé‡Œé¢åŠ è½½äº†style.cssï¼Œé‚£ä¹ˆstyle.cssæœ€ç»ˆåªèƒ½è¢«åŒæ­¥åŠ è½½ï¼ˆé€šè¿‡HTMLçš„linkæ ‡ç­¾ï¼‰ã€‚ä½†æ˜¯ç°åœ¨mini-css-extract-pluginä¼šå•ç‹¬æ‰“åŒ…å‡ºä¸€ä¸ª0.cssï¼ˆå‡è®¾ä½¿ç”¨é»˜è®¤é…ç½®ï¼‰ï¼Œè¿™ä¸ªCSSæ–‡ä»¶å°†ç”±a.jsé€šè¿‡åŠ¨æ€æ’å…¥linkæ ‡ç­¾çš„æ–¹å¼åŠ è½½ã€‚ åœ¨é…ç½®ä¸Šmini-css-extract-pluginä¸extract-text-webpack-pluginæœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒï¼š loaderè§„åˆ™è®¾ç½®çš„å½¢å¼ä¸åŒï¼Œå¹¶ä¸”mini-css-extract-pluginæ”¯æŒé…ç½®publicPathï¼Œç”¨æ¥æŒ‡å®šå¼‚æ­¥CSSçš„åŠ è½½è·¯å¾„ã€‚ ä¸éœ€è¦è®¾ç½®fallbackã€‚ åœ¨pluginsè®¾ç½®ä¸­ï¼Œé™¤äº†æŒ‡å®šåŒæ­¥åŠ è½½çš„CSSèµ„æºåï¼ˆfilenameï¼‰ï¼Œè¿˜è¦æŒ‡å®šå¼‚æ­¥åŠ è½½çš„CSSèµ„æºåï¼ˆchunkFilenameï¼‰ const MiniCssExtractPlugin = require('mini-css-extract-plugin') module.exports = { // ... module: { rules: [ { test: /\\.css$/, use: [ { loader: MiniCssExtractPlugin.loader, options: { publicPath: '../' } }, 'css-loader' ] } ]}, plugins: [ new MiniCssExtractPlugin({ filename: '[name].css', chunkFilename: '[id].css' }) ] } æ ·å¼é¢„å¤„ç†æ ·å¼é¢„å¤„ç†æŒ‡çš„æ˜¯åœ¨å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨ä¸€äº›æ ·å¼é¢„ç¼–è¯‘è¯­è¨€ï¼Œå¦‚SCSSã€Lessç­‰ï¼Œåœ¨é¡¹ç›®æ‰“åŒ…è¿‡ç¨‹ä¸­å†å°†è¿™äº›é¢„ç¼–è¯‘è¯­è¨€è½¬æ¢ä¸ºCSSã€‚ Sass ä¸ Scsssass-loaderå°±æ˜¯å°†SCSSè¯­æ³•ç¼–è¯‘ä¸ºCSSï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶é€šå¸¸è¿˜è¦æ­é…css-loaderå’Œstyle-loaderã€‚ç±»ä¼¼äºæˆ‘ä»¬è£…babel-loaderæ—¶è¿˜è¦å®‰è£…babel-coreï¼Œloaderæœ¬èº«åªæ˜¯ç¼–è¯‘æ ¸å¿ƒåº“ä¸Webpackçš„è¿æ¥å™¨ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬é™¤äº†sass-loaderä»¥å¤–è¿˜è¦å®‰è£…node-sassï¼Œnode-sassæ˜¯çœŸæ­£ç”¨æ¥ç¼–è¯‘SCSSçš„ï¼Œè€Œsass-loaderåªæ˜¯èµ·åˆ°é»åˆçš„ä½œç”¨ã€‚ npm i sass-loader node-sass module.exports = { // ... module: { rules: [ { test: /\\.scss$/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;sass-loader&#39;] } ] } } Lessnpm i less-loader less module.exports = { // ... module: { rules: [ { test: /\\.less/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;less-loader&#39;] } ] } } PostCssPostCSSå¹¶ä¸èƒ½ç®—æ˜¯ä¸€ä¸ªCSSçš„é¢„ç¼–è¯‘å™¨ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç¼–è¯‘æ’ä»¶çš„å®¹å™¨ã€‚å®ƒçš„å·¥ä½œæ¨¡å¼æ˜¯æ¥æ”¶æ ·å¼æºä»£ç å¹¶äº¤ç”±ç¼–è¯‘æ’ä»¶å¤„ç†ï¼Œæœ€åè¾“å‡ºCSSã€‚ PostCss ä¸ Webpackä½¿ç”¨postcss-loaderå¯ä»¥è½»æ¾åœ°å°†PostCSSä¸Webpackè¿æ¥èµ·æ¥ã€‚ä½¿ç”¨npmè¿›è¡Œå®‰è£…ã€‚ npm i postcss-loader module.exports = { // ... module: { rules: [ { test: /\\.css/, use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;postcss-loader&#39;] } ] } } postcss-loaderå¯ä»¥ç»“åˆcss-loaderä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸é…ç½®css-loaderä¹Ÿå¯ä»¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œå•ç‹¬ä½¿ç”¨postcss-loaderæ—¶ä¸å»ºè®®ä½¿ç”¨CSSä¸­çš„@importè¯­å¥ï¼Œå¦åˆ™ä¼šäº§ç”Ÿå†—ä½™ä»£ç ã€‚ é™¤æ­¤ä¹‹å¤–ï¼ŒPostCSSè¦æ±‚å¿…é¡»æœ‰ä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªpostcss.config.jsã€‚ module.exports = { // ... module: {} } è‡ªåŠ¨å‰ç¼€Autoprefixeræ˜¯ä¸€ä¸ªæ ·å¼å·¥å…·ï¼Œå¯ä»¥æ ¹æ®caniuse.comä¸Šçš„æ•°æ®ï¼Œè‡ªåŠ¨å†³å®šæ˜¯å¦è¦ä¸ºæŸä¸€ç‰¹æ€§æ·»åŠ å‚å•†å‰ç¼€ï¼Œå¹¶ä¸”å¯ä»¥ç”±å¼€å‘è€…ä¸ºå…¶æŒ‡å®šæ”¯æŒæµè§ˆå™¨çš„èŒƒå›´ã€‚ npm i autoprefixer åœ¨postcss.config.jsä¸­æ·»åŠ autoprefixerã€‚ const autoprefixer = require(&#39;autoprefixer&#39;) module.exports = { // ... plugins: [ autoprefixer({ grid: true, browsers: [ &#39;&gt; 1%&#39;, &#39;last 3 versions&#39;, &#39;android 4.2&#39;, &#39;ie 8&#39; ] }) ] } stylelintstylelintæ˜¯ä¸€ä¸ªCSSçš„è´¨é‡æ£€æµ‹å·¥å…·ï¼Œå°±åƒeslintä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æ·»åŠ å„ç§è§„åˆ™ï¼Œæ¥ç»Ÿä¸€é¡¹ç›®çš„ä»£ç é£æ ¼ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚ npm i stylelint åœ¨postcss.config.jsä¸­æ·»åŠ ç›¸åº”é…ç½®ã€‚ const autoprefixer = require(&#39;autoprefixer&#39;) module.exports = { // ... plugins: [ stylelint({ config: { rules: { &#39;declaration-no-important&#39;: true } } }) ] } è¿™é‡Œæˆ‘ä»¬æ·»åŠ äº†declaration-no-importantè¿™æ ·ä¸€æ¡è§„åˆ™ï¼Œå½“æˆ‘ä»¬çš„ä»£ç ä¸­å‡ºç°äº†â€œï¼importantâ€æ—¶å°±ä¼šç»™å‡ºè­¦å‘Šã€‚ ä½¿ç”¨stylelintå¯ä»¥æ£€æµ‹å‡ºä»£ç ä¸­çš„æ ·å¼é—®é¢˜ï¼ˆè¯­æ³•é”™è¯¯ã€é‡å¤çš„å±æ€§ç­‰ï¼‰ï¼Œå¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´åŠ å®‰å…¨å¹¶ä¸”é£æ ¼æ›´åŠ ä¸€è‡´çš„ä»£ç ã€‚ CssNextPostCSSå¯ä»¥ä¸CSSNextç»“åˆä½¿ç”¨ï¼Œè®©æˆ‘ä»¬åœ¨åº”ç”¨ä¸­ä½¿ç”¨æœ€æ–°çš„CSSè¯­æ³•ç‰¹æ€§ã€‚ npm i postcss-cssnext åœ¨postcss.config.jsä¸­æ·»åŠ ç›¸åº”é…ç½®ã€‚ const postcssCssnext = require(&#39;postcss-cssnext&#39;) module.exports = { // ... plugins: [ postcssCssnext({ browsers: [ &#39;&gt; 1%&#39;, &#39;last 2 versions&#39;, ] }) ] } æŒ‡å®šå¥½éœ€è¦æ”¯æŒçš„æµè§ˆå™¨ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥é¡ºç•…åœ°ä½¿ç”¨CSSNextçš„ç‰¹æ€§äº†ã€‚ Css ModulesCSS Modulesæ˜¯è¿‘å¹´æ¥æ¯”è¾ƒæµè¡Œçš„ä¸€ç§å¼€å‘æ¨¡å¼ï¼Œå…¶ç†å¿µå°±æ˜¯æŠŠCSSæ¨¡å—åŒ–ï¼Œè®©CSSä¹Ÿæ‹¥æœ‰æ¨¡å—çš„ç‰¹ç‚¹: æ¯ä¸ªCSSæ–‡ä»¶ä¸­çš„æ ·å¼éƒ½æ‹¥æœ‰å•ç‹¬çš„ä½œç”¨åŸŸï¼Œä¸ä¼šå’Œå¤–ç•Œå‘ç”Ÿå‘½åå†²çªã€‚ å¯¹CSSè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œå¯ä»¥é€šè¿‡ç›¸å¯¹è·¯å¾„å¼•å…¥CSSæ–‡ä»¶ã€‚ å¯ä»¥é€šè¿‡composesè½»æ¾å¤ç”¨å…¶ä»–CSSæ¨¡å— ä½¿ç”¨CSS Modulesä¸éœ€è¦é¢å¤–å®‰è£…æ¨¡å—ï¼Œåªè¦å¼€å¯css-loaderä¸­çš„modulesé…ç½®é¡¹å³å¯ã€‚ module.exports = { // ... module: { rules: [ { test: /\\.css$/, use: [ 'style-loader', { loader: 'css-loader', options: { modules: true, localIdentName: '[name]__[local]__[hash:base64:5]' } } ] } ]}, } è¿™é‡Œæ¯”è¾ƒå€¼å¾—ä¸€æçš„æ˜¯localIdentNameé…ç½®é¡¹ï¼Œå®ƒç”¨äºæŒ‡æ˜CSSä»£ç ä¸­çš„ç±»åä¼šå¦‚ä½•æ¥ç¼–è¯‘ã€‚ ä¾‹ï¼š /* style.css */ .title { color: #fff; } ç»è¿‡ç¼–è¯‘åå¯èƒ½å°†æˆä¸º.styletitle1CFy6ã€‚ [name]æŒ‡ä»£çš„æ˜¯æ¨¡å—åï¼Œè¿™é‡Œè¢«æ›¿æ¢ä¸ºstyleã€‚ [local]æŒ‡ä»£çš„æ˜¯åŸæœ¬çš„é€‰æ‹©å™¨æ ‡è¯†ç¬¦ï¼Œè¿™é‡Œè¢«æ›¿æ¢ä¸ºtitleã€‚ [hashï¼šbase64ï¼š5]æŒ‡ä»£çš„æ˜¯ä¸€ä¸ª5ä½çš„hashå€¼ï¼Œè¿™ä¸ªhashå€¼æ˜¯æ ¹æ®æ¨¡å—åå’Œæ ‡è¯†ç¬¦è®¡ç®—çš„ï¼Œå› æ­¤ä¸åŒæ¨¡å—ä¸­ç›¸åŒçš„æ ‡è¯†ç¬¦ä¹Ÿä¸ä¼šé€ æˆæ ·å¼å†²çªã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://qiandream.cn/tags/Webpack/"}]},{"title":"Webpack-Webpackç³»åˆ—ä¹‹é¢„å¤„ç†å™¨","slug":"Webpack-Webpackç³»åˆ—ä¹‹é¢„å¤„ç†å™¨","date":"2020-01-14T07:21:00.000Z","updated":"2020-02-07T04:01:19.330Z","comments":true,"path":"2020/01/14/webpack-webpack-xi-lie-zhi-yu-chu-li-qi/","link":"","permalink":"http://qiandream.cn/2020/01/14/webpack-webpack-xi-lie-zhi-yu-chu-li-qi/","excerpt":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚","text":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ é¢„å¤„ç†å™¨ï¼ˆloaderï¼‰æ¯ä¸ªloaderæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚åœ¨Webpack 4ä¹‹å‰ï¼Œå‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºéƒ½å¿…é¡»ä¸ºå­—ç¬¦ä¸²ï¼›åœ¨Webpack 4ä¹‹åï¼Œloaderä¹ŸåŒæ—¶æ”¯æŒæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰çš„ä¼ é€’ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•æ¥å‡å°‘é‡å¤çš„ä»£ç è§£æã€‚ç”¨å…¬å¼è¡¨è¾¾loaderçš„æœ¬è´¨åˆ™ä¸ºä»¥ä¸‹å½¢å¼ï¼š output=loader(input) è¿™é‡Œçš„inputå¯èƒ½æ˜¯å·¥ç¨‹æºæ–‡ä»¶çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸Šä¸€ä¸ªloaderè½¬åŒ–åçš„ç»“æœï¼ŒåŒ…æ‹¬è½¬åŒ–åçš„ç»“æœï¼ˆä¹Ÿæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼‰ã€source mapï¼Œä»¥åŠASTå¯¹è±¡ï¼›outputåŒæ ·åŒ…å«è¿™å‡ ç§ä¿¡æ¯ï¼Œè½¬åŒ–åçš„æ–‡ä»¶å­—ç¬¦ä¸²ã€source mapï¼Œä»¥åŠASTã€‚å¦‚æœè¿™æ˜¯æœ€åä¸€ä¸ªloaderï¼Œç»“æœå°†ç›´æ¥è¢«é€åˆ°Webpackè¿›è¡Œåç»­å¤„ç†ï¼Œå¦åˆ™å°†ä½œä¸ºä¸‹ä¸€ä¸ªloaderçš„è¾“å…¥å‘åä¼ é€’ã€‚ loader çš„é…ç½®Webpackæœ¬èº«åªè®¤è¯†JavaScriptï¼Œå¯¹äºå…¶ä»–ç±»å‹çš„èµ„æºå¿…é¡»é¢„å…ˆå®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªloaderå¯¹å…¶è¿›è¡Œè½¬è¯‘ï¼Œè¾“å‡ºä¸ºWebpackèƒ½å¤Ÿæ¥æ”¶çš„å½¢å¼å†ç»§ç»­è¿›è¡Œï¼Œå› æ­¤loaderåšçš„å®é™…ä¸Šæ˜¯ä¸€ä¸ªé¢„å¤„ç†çš„å·¥ä½œã€‚ module.exports = { module: { rules: [ { test: /\\.jsx?/, // æ¡ä»¶ use: &#39;babel-loader&#39; // è§„åˆ™åº”ç”¨ç»“æœ } // ä¸€ä¸ªObjectå³ä¸€æ¡è§„åˆ™ ] } } ä¸loaderç›¸å…³çš„é…ç½®éƒ½åœ¨moduleå¯¹è±¡ä¸­ï¼Œå…¶ä¸­module.rulesä»£è¡¨äº†æ¨¡å—çš„å¤„ç†è§„åˆ™ã€‚æ¯æ¡è§„åˆ™å†…éƒ¨å¯ä»¥åŒ…å«å¾ˆå¤šé…ç½®é¡¹ï¼Œè¿™é‡Œæˆ‘ä»¬åªä½¿ç”¨äº†æœ€é‡è¦çš„ä¸¤é¡¹â€”testå’Œuseã€‚ testå¯æ¥æ”¶ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªå…ƒç´ ä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„æ•°ç»„ï¼Œåªæœ‰æ­£åˆ™åŒ¹é…ä¸Šçš„æ¨¡å—æ‰ä¼šä½¿ç”¨è¿™æ¡è§„åˆ™ã€‚ useå¯æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«è¯¥è§„åˆ™æ‰€ä½¿ç”¨çš„loaderã€‚ é“¾å¼ loaderå¾ˆå¤šæ—¶å€™ï¼Œåœ¨å¤„ç†æŸä¸€ç±»èµ„æºæ—¶æˆ‘ä»¬éƒ½éœ€è¦ä½¿ç”¨å¤šä¸ªloaderã€‚ module.exports = { module: { rules: [ { test: /\\.css?/, // æ¡ä»¶ use: [&#39;style-loader&#39;, &#39;css-loader&#39;] // è§„åˆ™åº”ç”¨ç»“æœ } // ä¸€ä¸ªObjectå³ä¸€æ¡è§„åˆ™ ] } } æŠŠstyle-loaderåŠ åˆ°äº†css-loaderå‰é¢ï¼Œè¿™æ˜¯å› ä¸ºåœ¨Webpackæ‰“åŒ…æ—¶æ˜¯æŒ‰ç…§æ•°ç»„ä»åå¾€å‰çš„é¡ºåºå°†èµ„æºäº¤ç»™loaderå¤„ç†çš„ï¼Œå› æ­¤è¦æŠŠæœ€åç”Ÿæ•ˆçš„æ”¾åœ¨å‰é¢ã€‚ loader optionswebpackä¸ºloaderæä¾›äº†å¤šç§åŒ¹é…æ¡ä»¶çš„é…ç½®æ–¹å¼ï¼š test: â€¦ åŒ¹é…ç‰¹å®šæ¡ä»¶ include: â€¦ åŒ¹é…ç‰¹å®šè·¯å¾„ exclude: â€¦ æ’é™¤ç‰¹å®šè·¯å¾„ and: [] å¿…é¡»åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶ or: [] åŒ¹é…æ•°ç»„ä¸­çš„ä»»æ„ä¸€ä¸ªæ¡ä»¶ not: [] æ’é™¤åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶ æ¡ä»¶å€¼ç±»å‹ï¼š å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼ˆç»å¯¹è·¯å¾„ï¼‰ æ­£åˆ™è¡¨è¾¾å¼ æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„ å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶ å‡½æ•°ï¼šè¿”å›trueè¡¨ç¤ºåŒ¹é… è§„åˆ™åº”ç”¨é…ç½®åŒ¹é…è§„åˆ™åçš„åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨useå­—æ®µï¼š rules: [ { test: /\\.less/, use: [ &#39;style-loader&#39;, { loader: &#39;css-loader&#39;, options: { // ... } }, { loader: &#39;less-loader&#39;, options: { // ... } } ] } ] ä½¿ç”¨optionså¯ä»¥ç»™å¯¹åº”çš„loaderä¼ é€’ä¸€äº›é…ç½®é¡¹ã€‚ å¯¹äºä¸Šè¿°çš„lessè§„åˆ™åº”ç”¨é…ç½®ï¼Œä¸€ä¸ªlessæ¨¡å—æ–‡ä»¶å¯ä»¥ç»è¿‡å¤šä¸ªloaderçš„è½¬æ¢å¤„ç†ï¼Œæ‰§è¡Œé¡ºåºä¸ºä»å³åˆ°å·¦ã€‚ å¦‚æœå¤šä¸ªruleåŒ¹é…äº†åŒä¸€ä¸ªæ¨¡å—æ–‡ä»¶ï¼Œloaderçš„åº”ç”¨é¡ºåºåº”è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ rules: [ { test: /\\.js$/, loader: &quot;eslint-loader&quot;, }, { test: /\\.js$/, loader: &quot;babel-loader&quot;, } ] eslint-loaderç”¨äºæ£€æŸ¥äººå·¥ç¼–å†™çš„ä»£ç ï¼Œbabel-loaderç”¨äºè½¬æ¢ä»£ç ã€‚æ‰€ä»¥ï¼Œeslint-loaderåº”è¯¥åœ¨babel-loaderä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä¿è¯æ‰§è¡Œé¡ºåºï¼Ÿ webpackä¸ºæ¯ä¸€ä¸ªåŒ¹é…è§„åˆ™æä¾›äº†enforceå­—æ®µæ¥é…ç½®å½“å‰ruleå¾—çš„loaderç±»å‹ã€‚pre(å‰ç½®) &gt; è¡Œå†… &gt; æ™®é€š &gt; åç½®(post)ã€‚ æˆ‘ä»¬è¦ç¡®ä¿eslint-loaderåœ¨babel-loaderä¹‹å‰æ‰§è¡Œï¼Œåªéœ€ç»™ruleè§„åˆ™é¡¹æ·»åŠ enforceå­—æ®µï¼Œå¹¶è®¾ç½®å…¶å€¼ä¸ºpreã€‚ rules: [ { enforce: &#39;pre&#39;, test: /\\.js$/, loader: &quot;eslint-loader&quot;, }, { test: /\\.js$/, loader: &quot;babel-loader&quot;, } ] å¸¸ç”¨ loader ä»‹ç»babel-loader babel-loaderç”¨æ¥å¤„ç†ES6+å¹¶å°†å…¶ç¼–è¯‘ä¸ºES5ã€‚ npm i babel-loader @babel/core @babel/preset-env å„ä¸ªæ¨¡å—çš„ä½œç”¨å¦‚ä¸‹: babel-loaderï¼šå®ƒæ˜¯ä½¿Babelä¸WebpackååŒå·¥ä½œçš„æ¨¡å—ã€‚ @babel/coreï¼šé¡¾åæ€ä¹‰ï¼Œå®ƒæ˜¯Babelç¼–è¯‘å™¨çš„æ ¸å¿ƒæ¨¡å—ã€‚ @babel/preset-envï¼šå®ƒæ˜¯Babelå®˜æ–¹æ¨èçš„é¢„ç½®å™¨ï¼Œå¯æ ¹æ®ç”¨æˆ·è®¾ç½®çš„ç›®æ ‡ç¯å¢ƒè‡ªåŠ¨æ·»åŠ æ‰€éœ€çš„æ’ä»¶å’Œè¡¥ä¸æ¥ç¼–è¯‘ES6+ä»£ç ã€‚ module.exports = { // ... module: { rules: [ { test: /\\.jsx?/, loader: &#39;babel-loader&#39; } ] } } ts-loaderts-loaderä¸babel-loaderçš„æ€§è´¨ç±»ä¼¼ï¼Œå®ƒæ˜¯ç”¨äºè¿æ¥Webpackä¸Typescriptçš„æ¨¡å—ã€‚ npm i ts-loader typescript module.exports = { // ... module: { rules: [ { test: /\\.ts?/, loader: &#39;ts-loader&#39; } ] } } html-loaderhtml-loaderç”¨äºå°†HTMLæ–‡ä»¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªHTMLç‰‡æ®µé€šè¿‡JSåŠ è½½è¿›æ¥ã€‚ npm i html-loader module.exports = { // ... module: { rules: [ { test: /\\.html?/, loader: &#39;html-loader&#39; } ] } } handlebars-loaderhandlebars-loaderç”¨äºå¤„ç†handlebarsæ¨¡æ¿ï¼Œåœ¨å®‰è£…æ—¶è¦é¢å¤–å®‰è£…handlebarsã€‚ npm i handlebars-loader handlebars module.exports = { // ... module: { rules: [ { test: /\\.handlebars?/, loader: &#39;handlebars-loader&#39; } ] } } handlebarsæ–‡ä»¶åŠ è½½åå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªå˜é‡å¯¹è±¡å¹¶è¿”å›æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚ file-loaderfile-loaderç”¨äºæ‰“åŒ…æ–‡ä»¶ç±»å‹çš„èµ„æºï¼Œå¹¶è¿”å›å…¶publicPathã€‚ npm i file-loader module.exports = { // ... module: { rules: [ { test: /\\.(png|jpg|gif)$/, use: &#39;file-loader&#39; } ] } } url-loaderurl-loaderä¸file-loaderä½œç”¨ç±»ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒåœ¨äºç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªæ–‡ä»¶å¤§å°çš„é˜ˆå€¼ï¼Œå½“å¤§äºè¯¥é˜ˆå€¼æ—¶ä¸file-loaderä¸€æ ·è¿”å›publicPathï¼Œè€Œå°äºè¯¥é˜ˆå€¼æ—¶åˆ™è¿”å›æ–‡ä»¶base64å½¢å¼ç¼–ç ã€‚ npm i url-loader module.exports = { // ... module: { rules: [ { test: /\\.(png|jpg|gif)$/, use: { loader: &#39;file-loader&#39;, options: { limit: 10240, name: &#39;[name].[ext]&#39;, publicPath: &#39;./assets-path/&#39; } } } ] } }","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://qiandream.cn/tags/Webpack/"}]},{"title":"Webpack-Webpackç³»åˆ—ä¹‹æ¨¡å—æ‰“åŒ…","slug":"Webpack-Webpackç³»åˆ—ä¹‹æ¨¡å—æ‰“åŒ…","date":"2020-01-14T07:21:00.000Z","updated":"2020-02-07T03:57:52.343Z","comments":true,"path":"2020/01/14/webpack-webpack-xi-lie-zhi-mo-kuai-da-bao/","link":"","permalink":"http://qiandream.cn/2020/01/14/webpack-webpack-xi-lie-zhi-mo-kuai-da-bao/","excerpt":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚","text":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ æ¨¡å—æ‰“åŒ…å¤šç§ä¸åŒçš„æ¨¡å—æœºåˆ¶CommonjsCommonJSæœ€åˆåªä¸ºæœåŠ¡ç«¯è€Œè®¾è®¡ï¼Œç›´åˆ°æœ‰äº†Browserifyâ€”â€”ä¸€ä¸ªè¿è¡Œåœ¨Node.jsç¯å¢ƒä¸‹çš„æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå®ƒå¯ä»¥å°†CommonJSæ¨¡å—æ‰“åŒ…ä¸ºæµè§ˆå™¨å¯ä»¥è¿è¡Œçš„å•ä¸ªæ–‡ä»¶ã€‚è¿™æ„å‘³ç€å®¢æˆ·ç«¯çš„ä»£ç ä¹Ÿå¯ä»¥éµå¾ªCommonJSæ ‡å‡†æ¥ç¼–å†™äº†ã€‚ CommonJSä¸­è§„å®šæ¯ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ‰€æœ‰çš„å˜é‡åŠå‡½æ•°åªæœ‰è‡ªå·±èƒ½è®¿é—®ï¼Œå¯¹å¤–æ˜¯ä¸å¯è§çš„ã€‚ å¯¼å‡ºåœ¨CommonJSä¸­ï¼Œé€šè¿‡module.exportså¯ä»¥å¯¼å‡ºæ¨¡å—ä¸­çš„å†…å®¹ï¼š module.exports = { name: \"calculate\" } CommonJSæ¨¡å—å†…éƒ¨ä¼šæœ‰ä¸€ä¸ªmoduleå¯¹è±¡ç”¨äºå­˜æ”¾å½“å‰æ¨¡å—çš„ä¿¡æ¯ã€‚ å±æ€§ã€‚ä¸ºäº†ä¹¦å†™æ–¹ä¾¿ï¼ŒCommonJSä¹Ÿæ”¯æŒå¦ä¸€ç§ç®€åŒ–çš„å¯¼å‡ºæ–¹å¼â€”ç›´æ¥ä½¿ç”¨exports: exports.name = \"caculate\" å¦å¤–ï¼Œè¦æ³¨æ„å¯¼å‡ºè¯­å¥ä¸ä»£è¡¨æ¨¡å—çš„æœ«å°¾ï¼Œåœ¨module.exportsæˆ–exportsåé¢çš„ä»£ç ä¾æ—§ä¼šç…§å¸¸æ‰§è¡Œã€‚ å¯¼å…¥åœ¨CommonJSä¸­ä½¿ç”¨requireè¿›è¡Œæ¨¡å—å¯¼å…¥ï¼š const calculator = require('./caculate.js') const name = calculator.name å½“æˆ‘ä»¬requireä¸€ä¸ªæ¨¡å—æ—¶ä¼šæœ‰ä¸¤ç§æƒ…å†µï¼š requireçš„æ¨¡å—æ˜¯ç¬¬ä¸€æ¬¡è¢«åŠ è½½ã€‚è¿™æ—¶ä¼šé¦–å…ˆæ‰§è¡Œè¯¥æ¨¡å—ï¼Œç„¶åå¯¼å‡ºå†…å®¹ã€‚ requireçš„æ¨¡å—æ›¾è¢«åŠ è½½è¿‡ã€‚è¿™æ—¶è¯¥æ¨¡å—çš„ä»£ç ä¸ä¼šå†æ¬¡æ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥å¯¼å‡ºä¸Šæ¬¡æ‰§è¡Œåå¾—åˆ°çš„ç»“æœã€‚ æ¨¡å—ä¼šæœ‰ä¸€ä¸ªmoduleå¯¹è±¡ç”¨æ¥å­˜æ”¾å…¶ä¿¡æ¯ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªå±æ€§loadedç”¨äºè®°å½•è¯¥æ¨¡å—æ˜¯å¦è¢«åŠ è½½è¿‡ã€‚å®ƒçš„å€¼é»˜è®¤ä¸ºfalseï¼Œå½“æ¨¡å—ç¬¬ä¸€æ¬¡è¢«åŠ è½½å’Œæ‰§è¡Œè¿‡åä¼šç½®ä¸ºtrueï¼Œåé¢å†æ¬¡åŠ è½½æ—¶æ£€æŸ¥åˆ°module.loadedä¸ºtrueï¼Œåˆ™ä¸ä¼šå†æ¬¡æ‰§è¡Œæ¨¡å—ä»£ç ã€‚ ES6 ModuleES6 Moduleä¹Ÿæ˜¯å°†æ¯ä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªèº«çš„ä½œç”¨åŸŸï¼Œä¸åŒçš„æ˜¯å¯¼å…¥ã€å¯¼å‡ºè¯­å¥ã€‚ ES6 Moduleä¼šè‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ â€“ â€œuse strictâ€ã€‚ å¯¼å‡ºåœ¨ES6 Moduleä¸­ä½¿ç”¨exportå‘½ä»¤æ¥å¯¼å‡ºæ¨¡å—ã€‚ exportæœ‰ä¸¤ç§å½¢å¼ï¼š å‘½åå¯¼å‡º é»˜è®¤å¯¼å‡º export const name = \"calculate\" export const add = \"add\" const name = \"calculate\" const add = \"add\" export { name, add } åœ¨ä½¿ç”¨å‘½åå¯¼å‡ºæ—¶ï¼Œå¯ä»¥é€šè¿‡aså…³é”®å­—å¯¹å˜é‡é‡å‘½åã€‚å¦‚ï¼š const name = \"calculate\" const add = \"add\" export { name, add as sum } å°†export default é»˜è®¤å¯¼å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå¯¹å¤–è¾“å‡ºäº†ä¸€ä¸ªåä¸ºdefaultçš„å˜é‡ï¼Œå› æ­¤ä¸éœ€è¦åƒå‘½åå¯¼å‡ºä¸€æ ·è¿›è¡Œå˜é‡å£°æ˜ï¼Œç›´æ¥å¯¼å‡ºå€¼å³å¯ã€‚ export default \"calculate\" export default class {...} export default function() { ... } å¯¼å…¥ES6 Moduleä¸­ä½¿ç”¨importè¯­æ³•å¯¼å…¥æ¨¡å—ã€‚ import { name } from './caculate.js' ä¸å‘½åå¯¼å‡ºç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡aså…³é”®å­—å¯ä»¥å¯¹å¯¼å…¥çš„å˜é‡é‡å‘½åã€‚å¦‚ï¼š import { name as caculate } from './caculate.js' åœ¨å¯¼å…¥å¤šä¸ªå˜é‡æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡‡ç”¨æ•´ä½“å¯¼å…¥çš„æ–¹å¼ã€‚å¦‚ï¼š import * as caculate from './caculate.js' const name = caculate.name å¯¹äºé»˜è®¤å¯¼å‡ºæ¥è¯´ï¼Œimportåé¢ç›´æ¥è·Ÿå˜é‡åï¼Œå¹¶ä¸”è¿™ä¸ªåå­—å¯ä»¥è‡ªç”±æŒ‡å®šï¼ˆæ¯”å¦‚è¿™é‡Œæ˜¯myCalculatorï¼‰ã€‚å¦‚ï¼š import myCalculator from './caculate.js' AMDAMDæ˜¯è‹±æ–‡Asynchronous Module Definitionï¼ˆå¼‚æ­¥æ¨¡å—å®šä¹‰ï¼‰çš„ç¼©å†™: define('getSum', ['calculate'], function(math) { return function(a, b) { console.log(calculate.add(a, b)) } }) åœ¨AMDä¸­ä½¿ç”¨defineå‡½æ•°æ¥å®šä¹‰æ¨¡å—ï¼Œå®ƒå¯ä»¥æ¥å—3ä¸ªå‚æ•°: ç¬¬1ä¸ªå‚æ•°æ˜¯å½“å‰æ¨¡å—çš„idï¼Œç›¸å½“äºæ¨¡å—åï¼› ç¬¬2ä¸ªå‚æ•°æ˜¯å½“å‰æ¨¡å—çš„ä¾èµ–ï¼Œæ¯”å¦‚ä¸Šé¢æˆ‘ä»¬å®šä¹‰çš„getSumæ¨¡å—éœ€è¦å¼•å…¥calculatoræ¨¡å—ä½œä¸ºä¾èµ–ï¼› ç¬¬3ä¸ªå‚æ•°ç”¨æ¥æè¿°æ¨¡å—çš„å¯¼å‡ºå€¼ï¼Œå¯ä»¥æ˜¯å‡½æ•°æˆ–å¯¹è±¡ã€‚å¦‚æœæ˜¯å‡½æ•°åˆ™å¯¼å‡ºçš„æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼›å¦‚æœæ˜¯å¯¹è±¡åˆ™ç›´æ¥å¯¼å‡ºå¯¹è±¡æœ¬èº«ã€‚ å’ŒCommonJSç±»ä¼¼ï¼ŒAMDä¹Ÿä½¿ç”¨requireå‡½æ•°æ¥åŠ è½½æ¨¡å—ï¼Œåªä¸è¿‡é‡‡ç”¨å¼‚æ­¥çš„å½¢å¼ã€‚ require(['getSum'], function(getSum) { getSum(2, 3) }) requireçš„ç¬¬1ä¸ªå‚æ•°æŒ‡å®šäº†åŠ è½½çš„æ¨¡å—ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯å½“åŠ è½½å®Œæˆåæ‰§è¡Œçš„å›è°ƒå‡½æ•°ã€‚ é€šè¿‡AMDè¿™ç§å½¢å¼å®šä¹‰æ¨¡å—çš„å¥½å¤„åœ¨äºå…¶æ¨¡å—åŠ è½½æ˜¯éé˜»å¡æ€§çš„ï¼Œå½“æ‰§è¡Œåˆ°requireå‡½æ•°æ—¶å¹¶ä¸ä¼šåœä¸‹æ¥å»æ‰§è¡Œè¢«åŠ è½½çš„æ¨¡å—ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œrequireåé¢çš„ä»£ç ï¼Œè¿™ä½¿å¾—æ¨¡å—åŠ è½½æ“ä½œå¹¶ä¸ä¼šé˜»å¡æµè§ˆå™¨ã€‚ æ¨¡å—æ‰“åŒ…åŸç†Webpack å°†é¡¹ç›®ä¸­æˆç™¾ä¸Šåƒä¸ªæœ‰ä¾èµ–å…³ç³»çš„æ¨¡å—ç»„ç»‡åœ¨ä¸€èµ·ï¼Œæ‰“åŒ…åå°†ä¼šæˆä¸ºå¦‚ä¸‹çš„å½¢å¼ï¼š // ç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•° (function(module) { // æ¨¡å—ç¼“å­˜ var installedModules = {} // å®ç° require function __webpack_require__(moduleId) { // ... } // æ‰§è¡Œå…¥å£æ¨¡å—çš„åŠ è½½ return __webpack_require__(__webpack_require__.s = 0) { // modules: ä»¥ key-value çš„å½¢å¼å­˜å‚¨æ‰€æœ‰è¢«æ‰“åŒ…çš„æ¨¡å— 0: function (module, exports, __webpack_require__) { // æ‰“åŒ…å…¥å£ module.exports = __webpack_require__(\"3qiv\") }, \"3qiv\": function (module, exports, __webpack_require__) { // æ‰“åŒ…å…¥å£ module.exports = __webpack_require__(\"3qiv\") } } }) ä¸Šé¢çš„bundleåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š æœ€å¤–å±‚ç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°ã€‚å®ƒç”¨æ¥åŒ…è£¹æ•´ä¸ªbundleï¼Œå¹¶æ„æˆè‡ªèº«çš„ä½œç”¨åŸŸã€‚ installedModuleså¯¹è±¡ã€‚æ¯ä¸ªæ¨¡å—åªåœ¨ç¬¬ä¸€æ¬¡è¢«åŠ è½½çš„æ—¶å€™æ‰§è¡Œï¼Œä¹‹åå…¶å¯¼å‡ºå€¼å°±è¢«å­˜å‚¨åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ï¼Œå½“å†æ¬¡è¢«åŠ è½½çš„æ—¶å€™ç›´æ¥ä»è¿™é‡Œå–å€¼ï¼Œè€Œä¸ä¼šé‡æ–°æ‰§è¡Œã€‚ webpack_requireå‡½æ•°ã€‚å¯¹æ¨¡å—åŠ è½½çš„å®ç°ï¼Œåœ¨æµè§ˆå™¨ä¸­å¯ä»¥é€šè¿‡è°ƒç”¨webpack_require(module_id)æ¥å®Œæˆæ¨¡å—å¯¼å…¥ã€‚ moduleså¯¹è±¡ã€‚å·¥ç¨‹ä¸­æ‰€æœ‰äº§ç”Ÿäº†ä¾èµ–å…³ç³»çš„æ¨¡å—éƒ½ä¼šä»¥key-valueçš„å½¢å¼æ”¾åœ¨è¿™é‡Œã€‚keyå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¨¡å—çš„idï¼Œç”±æ•°å­—æˆ–è€…ä¸€ä¸ªå¾ˆçŸ­çš„hashå­—ç¬¦ä¸²æ„æˆï¼›valueåˆ™æ˜¯ç”±ä¸€ä¸ªåŒ¿åå‡½æ•°åŒ…è£¹çš„æ¨¡å—å®ä½“ï¼ŒåŒ¿åå‡½æ•°çš„å‚æ•°åˆ™èµ‹äºˆäº†æ¯ä¸ªæ¨¡å—å¯¼å‡ºå’Œå¯¼å…¥çš„èƒ½åŠ›ã€‚ bundleæ˜¯å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œçš„ï¼š åœ¨æœ€å¤–å±‚çš„åŒ¿åå‡½æ•°ä¸­ä¼šåˆå§‹åŒ–æµè§ˆå™¨æ‰§è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬å®šä¹‰installedModuleså¯¹è±¡ã€webpack_requireå‡½æ•°ç­‰ï¼Œä¸ºæ¨¡å—çš„åŠ è½½å’Œæ‰§è¡Œåšä¸€äº›å‡†å¤‡å·¥ä½œã€‚ åŠ è½½å…¥å£æ¨¡å—ã€‚æ¯ä¸ªbundleéƒ½æœ‰ä¸”åªæœ‰ä¸€ä¸ªå…¥å£æ¨¡å—ï¼Œä¾‹å¦‚ï¼šindex.jsæ˜¯å…¥å£æ¨¡å—ï¼Œåœ¨æµè§ˆå™¨ä¸­ä¼šä»å®ƒå¼€å§‹æ‰§è¡Œã€‚ æ‰§è¡Œæ¨¡å—ä»£ç ã€‚å¦‚æœæ‰§è¡Œåˆ°äº†module.exportsåˆ™è®°å½•ä¸‹æ¨¡å—çš„å¯¼å‡ºå€¼ï¼›å¦‚æœä¸­é—´é‡åˆ°requireå‡½æ•°ï¼ˆå‡†ç¡®åœ°è¯´æ˜¯webpack_requireï¼‰ï¼Œåˆ™ä¼šæš‚æ—¶äº¤å‡ºæ‰§è¡Œæƒï¼Œè¿›å…¥webpack_requireå‡½æ•°ä½“å†…è¿›è¡ŒåŠ è½½å…¶ä»–æ¨¡å—çš„é€»è¾‘ã€‚ åœ¨webpack_requireä¸­ä¼šåˆ¤æ–­å³å°†åŠ è½½çš„æ¨¡å—æ˜¯å¦å­˜åœ¨äºinstalledModulesä¸­ã€‚å¦‚æœå­˜åœ¨åˆ™ç›´æ¥å–å€¼ï¼Œå¦åˆ™å›åˆ°ä¸Šä¸€æ­¥ï¼Œæ‰§è¡Œè¯¥æ¨¡å—çš„ä»£ç æ¥è·å–å¯¼å‡ºå€¼ã€‚ æ‰€æœ‰ä¾èµ–çš„æ¨¡å—éƒ½å·²æ‰§è¡Œå®Œæ¯•ï¼Œæœ€åæ‰§è¡Œæƒåˆå›åˆ°å…¥å£æ¨¡å—ã€‚å½“å…¥å£æ¨¡å—çš„ä»£ç æ‰§è¡Œåˆ°ç»“å°¾ï¼Œä¹Ÿå°±æ„å‘³ç€æ•´ä¸ªbundleè¿è¡Œç»“æŸã€‚ ä¸éš¾çœ‹å‡ºï¼Œç¬¬3æ­¥å’Œç¬¬4æ­¥æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ã€‚Webpackä¸ºæ¯ä¸ªæ¨¡å—åˆ›é€ äº†ä¸€ä¸ªå¯ä»¥å¯¼å‡ºå’Œå¯¼å…¥æ¨¡å—çš„ç¯å¢ƒï¼Œä½†æœ¬è´¨ä¸Šå¹¶æ²¡æœ‰ä¿®æ”¹ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œå› æ­¤ä»£ç æ‰§è¡Œçš„é¡ºåºä¸æ¨¡å—åŠ è½½çš„é¡ºåºæ˜¯å®Œå…¨ä¸€è‡´çš„ï¼Œè¿™å°±æ˜¯Webpackæ¨¡å—æ‰“åŒ…çš„å¥¥ç§˜ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://qiandream.cn/tags/Webpack/"}]},{"title":"Webpack-Webpackç³»åˆ—ä¹‹èµ„æºè¾“å…¥è¾“å‡º","slug":"Webpack-Webpackç³»åˆ—ä¹‹èµ„æºè¾“å…¥è¾“å‡º","date":"2020-01-14T07:21:00.000Z","updated":"2020-02-07T04:00:14.591Z","comments":true,"path":"2020/01/14/webpack-webpack-xi-lie-zhi-zi-yuan-shu-ru-shu-chu/","link":"","permalink":"http://qiandream.cn/2020/01/14/webpack-webpack-xi-lie-zhi-zi-yuan-shu-ru-shu-chu/","excerpt":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚","text":"å¯¼è¯­ webpackæ˜¯ä¸€ä¸ªç°ä»£JavaScriptåº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œåœ¨webpackå¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šåœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªä¾èµ–å›¾ï¼Œç”¨äºæ˜ å°„åˆ°é¡¹ç›®éœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›ä¾èµ–ç”Ÿæˆåˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ èµ„æºè¾“å…¥è¾“å‡ºèµ„æºå¤„ç†æµç¨‹åœ¨ä¸€åˆ‡æµç¨‹çš„æœ€å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªå…¥å£ï¼ˆentryï¼‰ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰Webpackå…·ä½“ä»æºç ç›®å½•ä¸‹çš„å“ªä¸ªæ–‡ä»¶å¼€å§‹æ‰“åŒ…ã€‚å¦‚æœæŠŠå·¥ç¨‹ä¸­å„ä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»å½“ä½œä¸€æ£µæ ‘ï¼Œé‚£ä¹ˆå…¥å£å°±æ˜¯è¿™æ£µä¾èµ–æ ‘çš„æ ¹ï¼Œè¿™äº›å­˜åœ¨ä¾èµ–å…³ç³»çš„æ¨¡å—ä¼šåœ¨æ‰“åŒ…æ—¶è¢«å°è£…ä¸ºä¸€ä¸ªchunkã€‚ chunkå­—é¢çš„æ„æ€æ˜¯ä»£ç å—ï¼Œåœ¨Webpackä¸­å¯ä»¥ç†è§£æˆè¢«æŠ½è±¡å’ŒåŒ…è£…è¿‡åçš„ä¸€äº›æ¨¡å—ã€‚å®ƒå°±åƒä¸€ä¸ªè£…ç€å¾ˆå¤šæ–‡ä»¶çš„æ–‡ä»¶è¢‹ï¼Œé‡Œé¢çš„æ–‡ä»¶å°±æ˜¯å„ä¸ªæ¨¡å—ï¼ŒWebpackåœ¨å¤–é¢åŠ äº†ä¸€å±‚åŒ…è£¹ï¼Œä»è€Œå½¢æˆäº†chunkã€‚æ ¹æ®å…·ä½“é…ç½®ä¸åŒï¼Œä¸€ä¸ªå·¥ç¨‹æ‰“åŒ…æ—¶å¯èƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæˆ–å¤šä¸ªchunkã€‚ Webpackä¼šä»å…¥å£æ–‡ä»¶å¼€å§‹æ£€ç´¢ï¼Œå¹¶å°†å…·æœ‰ä¾èµ–å…³ç³»çš„æ¨¡å—ç”Ÿæˆä¸€æ£µä¾èµ–æ ‘ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªchunkã€‚ç”±è¿™ä¸ªchunkå¾—åˆ°çš„æ‰“åŒ…äº§ç‰©æˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºbundleã€‚ é…ç½®èµ„æºå…¥å£é€šè¿‡contextå’Œentryè¿™ä¸¤ä¸ªé…ç½®é¡¹æ¥å…±åŒå†³å®šå…¥å£æ–‡ä»¶çš„è·¯å¾„ã€‚åœ¨é…ç½®å…¥å£æ—¶ï¼Œå®é™…ä¸Šåšäº†ä¸¤ä»¶äº‹ï¼š ç¡®å®šå…¥å£æ¨¡å—ä½ç½®ï¼Œå‘Šè¯‰Webpackä»å“ªé‡Œå¼€å§‹è¿›è¡Œæ‰“åŒ…ã€‚ å®šä¹‰chunk nameã€‚å¦‚æœå·¥ç¨‹åªæœ‰ä¸€ä¸ªå…¥å£ï¼Œé‚£ä¹ˆé»˜è®¤å…¶chunk nameä¸ºâ€œmainâ€ï¼›å¦‚æœå·¥ç¨‹æœ‰å¤šä¸ªå…¥å£ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªå…¥å£å®šä¹‰chunk nameï¼Œæ¥ä½œä¸ºè¯¥chunkçš„å”¯ä¸€æ ‡è¯†ã€‚ contextcontextå¯ä»¥ç†è§£ä¸ºèµ„æºå…¥å£çš„è·¯å¾„å‰ç¼€ï¼Œåœ¨é…ç½®æ—¶è¦æ±‚å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„çš„å½¢å¼ã€‚ module.exports = { context: path.join(__dirname, './src/script'), entry: './index.js' } é…ç½®contextçš„ä¸»è¦ç›®çš„æ˜¯è®©entryçš„ç¼–å†™æ›´åŠ ç®€æ´ï¼Œå°¤å…¶æ˜¯åœ¨å¤šå…¥å£çš„æƒ…å†µä¸‹ã€‚contextå¯ä»¥çœç•¥ï¼Œé»˜è®¤å€¼ä¸ºå½“å‰å·¥ç¨‹çš„æ ¹ç›®å½•ã€‚ entryentryçš„é…ç½®å¯ä»¥æœ‰å¤šç§å½¢å¼ï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡ã€å‡½æ•°ã€‚å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚åœºæ™¯æ¥é€‰æ‹©ã€‚ å­—ç¬¦ä¸²ç±»å‹å…¥å£ ç›´æ¥ä¼ å…¥æ–‡ä»¶è·¯å¾„ï¼š module.exports = { entry: './src/index' } æ•°ç»„ç±»å‹å…¥å£ ä¼ å…¥ä¸€ä¸ªæ•°ç»„çš„ä½œç”¨æ˜¯å°†å¤šä¸ªèµ„æºé¢„å…ˆåˆå¹¶ï¼Œåœ¨æ‰“åŒ…æ—¶Webpackä¼šå°†æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºå®é™…çš„å…¥å£è·¯å¾„ã€‚å¦‚ï¼š module.exports = { entry: ['babel-polyfill', './src/index'] } å¯¹è±¡ç±»å‹å…¥å£ å¦‚æœæƒ³è¦å®šä¹‰å¤šå…¥å£ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¯¹è±¡çš„å½¢å¼ã€‚ module.exports = { entry: { foo: './src/foo', bar: './src/bar' } } å‡½æ•°ç±»å‹å…¥å£ ç”¨å‡½æ•°å®šä¹‰å…¥å£æ—¶ï¼Œåªè¦è¿”å›ä¸Šé¢ä»‹ç»çš„ä»»ä½•é…ç½®å½¢å¼å³å¯ã€‚ module.exports = { entry: () => ({ foo: './src/foo', bar: './src/bar' }) } outputæ‰€æœ‰ä¸å‡ºå£ç›¸å…³çš„é…ç½®éƒ½é›†ä¸­åœ¨outputå¯¹è±¡é‡Œã€‚ filenamefilenameçš„ä½œç”¨æ˜¯æ§åˆ¶è¾“å‡ºèµ„æºçš„æ–‡ä»¶åã€‚ å­—ç¬¦ä¸²å½¢å¼ module.exports = { output: { path: path.resolve(__dirname, 'dist'), filename: 'bundle.js' } } åœ¨å¤šå…¥å£çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå¯¹åº”äº§ç”Ÿçš„æ¯ä¸ªbundleæŒ‡å®šä¸åŒçš„åå­—ï¼ŒWebpackæ”¯æŒä½¿ç”¨ä¸€ç§ç±»ä¼¼æ¨¡æ¿è¯­è¨€çš„å½¢å¼åŠ¨æ€åœ°ç”Ÿæˆæ–‡ä»¶åã€‚ // å¤šä¸ªå…¥å£ç”Ÿæˆä¸åŒçš„æ–‡ä»¶ module.exports = { output: { path: path.resolve(__dirname, 'dist'), filename: '[name].js' } } è·¯å¾„ä¸­ä½¿ç”¨hashï¼Œæ¯æ¬¡æ„å»ºéƒ½æœ‰ä¸€ä¸ªä¸åŒçš„hashå€¼ï¼Œé¿å…å‘å¸ƒæ–°ç‰ˆæœ¬ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚ module.exports = { output: { path: path.resolve(__dirname, 'dist/[hash]'), filename: '[name].js' } } pathpathå¯ä»¥æŒ‡å®šèµ„æºè¾“å‡ºçš„ä½ç½®ï¼Œè¦æ±‚å€¼å¿…é¡»ä¸ºç»å¯¹è·¯å¾„ã€‚å¦‚ï¼š module.exports = { output: { path: path.resolve(__dirname, 'dist'), filename: 'bundle.js' } } publicPathpublicPathæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„é…ç½®é¡¹ï¼Œå¹¶ä¸”å®¹æ˜“ä¸pathç›¸æ··æ·†ã€‚ä»åŠŸèƒ½ä¸Šæ¥è¯´ï¼Œpathç”¨æ¥æŒ‡å®šèµ„æºçš„è¾“å‡ºä½ç½®ï¼Œè€ŒpublicPathåˆ™ç”¨æ¥æŒ‡å®šèµ„æºçš„è¯·æ±‚ä½ç½®ã€‚è®©æˆ‘ä»¬è¯¦ç»†è§£é‡Šè¿™ä¸¤ä¸ªå®šä¹‰ã€‚ è¾“å‡ºä½ç½®ï¼šæ‰“åŒ…å®Œæˆåèµ„æºäº§ç”Ÿçš„ç›®å½•ï¼Œä¸€èˆ¬å°†å…¶æŒ‡å®šä¸ºå·¥ç¨‹ä¸­çš„distç›®å½•ã€‚ è¯·æ±‚ä½ç½®ï¼šç”±JSæˆ–CSSæ‰€è¯·æ±‚çš„é—´æ¥èµ„æºè·¯å¾„ã€‚é¡µé¢ä¸­çš„èµ„æºåˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ç”±HTMLé¡µé¢ç›´æ¥è¯·æ±‚çš„ï¼Œæ¯”å¦‚é€šè¿‡scriptæ ‡ç­¾åŠ è½½çš„JSï¼›å¦ä¸€ç§æ˜¯ç”±JSæˆ–CSSè¯·æ±‚çš„ï¼Œå¦‚å¼‚æ­¥åŠ è½½çš„JSã€ä»CSSè¯·æ±‚çš„å›¾ç‰‡å­—ä½“ç­‰ã€‚publicPathçš„ä½œç”¨å°±æ˜¯æŒ‡å®šè¿™éƒ¨åˆ†é—´æ¥èµ„æºçš„è¯·æ±‚ä½ç½®ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"http://qiandream.cn/tags/Webpack/"}]},{"title":"é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€","slug":"é¢è¯•é¢˜-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹JSåŸºç¡€","date":"2019-11-25T01:46:52.000Z","updated":"2019-11-25T20:02:59.098Z","comments":true,"path":"2019/11/25/mian-shi-ti-chang-jian-mian-shi-ti-xi-lie-zhi-js-ji-chu/","link":"","permalink":"http://qiandream.cn/2019/11/25/mian-shi-ti-chang-jian-mian-shi-ti-xi-lie-zhi-js-ji-chu/","excerpt":"","text":"å¯¼è¯­æœ¬ç³»åˆ—æ—¨åœ¨æ•´ç† JS å¸¸è§é¢è¯•é¢˜ï¼Œå¸®åŠ©æ¢³ç† JS åŸºç¡€çŸ¥è¯†ç‚¹ã€‚ ğŸŒ° [â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡ºç»“æœparseIntè§£æä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæŒ‡å®šåŸºæ•°çš„æ•´æ•°ã€‚ const intValue = parseInt(string[, radix]); string è¦è¢«è§£æçš„å€¼ã€‚å¦‚æœå‚æ•°ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºç™½ç¬¦ä¼šè¢«å¿½ç•¥ã€‚ radix ä¸€ä¸ªä»‹äº 2~36ä¹‹é—´çš„æ•´æ•°ï¼Œè¡¨ç¤ºä¸Šè¿°å­—ç¬¦ä¸²çš„åŸºæ•°ï¼Œé»˜è®¤å€¼ä¸º 10ã€‚ parseInt è¿”å›ä¸€ä¸ªæ•´æ•°æˆ– NaNã€‚ parseInt(100); // 100 parseInt(100, 10); // 1*10*10 + 0*10*1 + 0*10*0 = 100 parseInt(100, 2); // 1*2*2 + 0*2*1 + 0*2*0 = 4 åœ¨ radix ä¸º undefined ï¼Œæˆ– radix ä¸º 0 æˆ–æ²¡æœ‰æŒ‡å®šçš„æƒ…å†µä¸‹ï¼ŒJS ä½œå¦‚ä¸‹å¤„ç†ï¼š string ä»¥ â€˜0xâ€™ æˆ– â€˜0Xâ€™ å¼€å¤´ï¼Œåˆ™ radix ä¸º 16ã€‚ string ä»¥ â€˜0â€™ å¼€å¤´ï¼Œradix ä¸º 8 æˆ–è€… 10ï¼Œå…·ä½“å“ªä¸ªåŸºæ•°ç”±å®ç°ç¯å¢ƒå†³å®šã€‚ string ä»¥å…¶å®ƒä»»ä½•å€¼å¼€å¤´ï¼Œåˆ™ radix ä¸º 10ã€‚ mapåˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚ var new_array = arr.map(function callback(currentValue[,index[, array]]) { // Return element for new_array }[, thisArg]) callback å›è°ƒå‡½æ•°éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º currentValue(æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„å€¼)ã€index(æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•)ã€array(map æ–¹æ³•ä¸­è¢«è°ƒç”¨çš„æ•°ç»„)ã€‚ const arr = [1, 2, 3] arr.map(num => num * 2) // [2, 4, 6] [â€˜1â€™, â€˜2â€™, â€˜3â€™].map(parseInt) è¾“å‡ºå¯¹äºæ¯ä¸ªè¿­ä»£ mapï¼ŒparseInt() ä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼šå­—ç¬¦ä¸²å’ŒåŸºæ•°ã€‚æ‰€ä»¥å®é™…æ‰§è¡Œçš„ä»£ç ä¸ºï¼š ['1', '2', '3'].map(parseInt((item, index) => parseInt(item, index)) æ‰§è¡Œæ­¥éª¤ä¸ºï¼š parseInt('1', 0); // 1 (10 è¿›åˆ¶) parseInt('2', 1); // NaN radix(2-36) parseInt('3', 2); // NaN ä¸ç¬¦åˆ2è¿›åˆ¶ä½æ•°å–å€¼(0-1) æ‰€ä»¥ï¼š ['1', '2', '3'].map(parseInt) // [1, NaN, NaN] ğŸŒ° ä»€ä¹ˆæ˜¯èŠ‚æµå’Œé˜²æŠ–ï¼ŸåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿé˜²æŠ–åŠ¨ä½œç»‘å®šäº‹ä»¶ï¼ŒåŠ¨ä½œå‘ç”Ÿåä¸€å®šæ—¶é—´å†…è§¦å‘æ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¦‚æœè¯¥åŠ¨ä½œåˆå‘ç”Ÿï¼Œåˆ™é‡æ–°ç­‰å¾…ä¸€å®šæ—¶é—´å†è§¦å‘äº‹ä»¶ã€‚ /** * é˜²æŠ– debounce å®šæ—¶å™¨ * @param fn {function} å›è°ƒå‡½æ•° * @param wait {number} æ—¶é—´é—´éš” * @author wangxiaobai */ export function debounce (fn, wait) { let timer = null; return () => { // æ¸…é™¤ä¸Šæ¬¡æ‰§è¡Œå¾—å®šæ—¶å™¨ if (timer) { clearTimeout(timer); } // è®¾ç«‹æ–°å®šæ—¶å™¨ timer = setTimeout(() => { fn.apply(this, arguments); }, wait); } } èŠ‚æµåŠ¨ä½œç»‘å®šäº‹ä»¶ï¼ŒåŠ¨ä½œå‘ç”Ÿåä¸€å®šæ—¶é—´å†…è§¦å‘äº‹ä»¶ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…å¦‚æœè¯¥åŠ¨ä½œåˆå‘ç”Ÿï¼Œåˆ™æ— è§†è¯¥åŠ¨ä½œï¼Œç›´åˆ°äº‹ä»¶æ‰§è¡Œå®Œåï¼Œæ‰èƒ½é‡æ–°è§¦å‘ã€‚ /** * èŠ‚æµ throttle å®šæ—¶å™¨ * @param fn {function} å›è°ƒå‡½æ•° * @param wait {number} æ—¶é—´é—´éš” * @author wangxiaobai */ export function throttle (fn, wait) { // ä¸Šä¸€æ¬¡å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ let activeTime = 0; return () => { let currentTime = +new Date(); if (currentTime - activeTime > wait) { fn.apply(this, arguments); activeTime = currentTime; } } } ğŸŒ° Setã€Mapã€WeakSetã€WeakMapSetä¸€ç§å«åšé›†åˆçš„æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œæˆå‘˜å”¯ä¸€ä¸”æ— åºã€‚ new Set([iterable]) const s = new Set(); [1, 2, 3, 4, 3, 2, 1].forEach(item => s.add(item)); for (let item of s) { console.log(item) // 1 2 3 4 } let arr = [1, 2, 3, 2, 1, 1, 1]; [... new Set(arr)]; // [1, 2, 3] Set å…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œæ— è®ºæ˜¯åŸå§‹å€¼è¿˜æ˜¯å¯¹è±¡å¼•ç”¨ã€‚ å‘ Set åŠ å…¥å€¼çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥ 5 å’Œ â€˜5â€™ æ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ã€‚ åœ¨ Set ä¸­ï¼ŒNaN ç­‰äºè‡ªèº«ã€‚ let set = new Set(); set.add(NaN); set.add(NaN); set; // {NaN} let set1 = new Set(); set1.add(5); set1.add('5'); set; // {5, '5'} Set å®ä¾‹å±æ€§ constructor: æ„é€ å‡½æ•° size: å…ƒç´ æ•°é‡ let set = new Set([1, 2, 3, 2, 1]); console.log(set.size); // 3 Set å®ä¾‹æ–¹æ³• æ“ä½œæ–¹æ³•ï¼š add(value) æ–°å¢ delete(value) å­˜åœ¨å³åˆ é™¤é›†åˆä¸­çš„ value has(value) åˆ¤æ–­é›†åˆä¸­æ˜¯å¦å­˜åœ¨ value clear() æ¸…ç©ºé›†åˆ let set = new Set(); set.add(1).add(2).add(1); set.size; // 2 set.has(1); // true set.has(3); // false set.delete(1); set.has(1); // false set.clear(); set.size; // 0 Array.from å¯ä»¥å°† Set ç»“æ„è½¬åŒ–ä¸ºæ•°ç»„ const items = new Set([1, 2, 3, 1]); const array = Array.from(items); console.log(array); // [1, 2, 3] // æˆ– const arr = [...items] console.log(arr); // [1, 2, 3] éå†æ–¹æ³•ï¼š keys() è¿”å›ä¸€ä¸ªåŒ…å«é›†åˆä¸­æ‰€æœ‰é”®çš„è¿­ä»£å™¨ values() è¿”å›ä¸€ä¸ªåŒ…å«é›†åˆä¸­æ‰€æœ‰å€¼çš„è¿­ä»£å™¨ entries() è¿”å›ä¸€ä¸ªåŒ…å«é›†åˆä¸­æ‰€æœ‰é”®å€¼å¯¹çš„è¿­ä»£å™¨ forEach(callbackFn, thisArg) map(callbackFn, thisArg) filter(callbackFn, thisArg) let set = new Set([1, 2, 3]) console.log(set.keys()); // SetIterator {1, 2, 3} console.log(set.values()); // SetIterator {1, 2, 3} console.log(set.entries()); // SetIterator {1 => 1, 2 => 2, 3 => 3} set.forEach((value, key) => { console.log(key + ' : ' + value); }); // 1:1 2:2 3:3 set = new Set([...set].map(item => item * 2)); console.log(set); // {2, 4, 6} set = new Set([...set].filter(item => (item >= 4))); console.log(set); // {4, 6} å› æ­¤ï¼ŒSet å¾ˆå®¹æ˜“å®ç°ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†ã€å¹¶é›†ã€å·®é›† let set1 = new Set([1, 2, 3]); let set2 = new Set([4, 3, 2]); let intersect = new Set([...set1].filter(value => set2.has(value))); let union = new Set([...set1, ...set2]); let difference = new Set([...set1].filter(value => !set2.has(value))); console.log(intersect); // {2, 3} console.log(union); // {1, 2, 3, 4} console.log(difference); // {1} WeakSetå…è®¸ä½ å°†å¼±å¼•ç”¨å¯¹è±¡å‚¨å­˜åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚ WeakSet ä¸ Set çš„åŒºåˆ«ï¼š WeakSet åªèƒ½å‚¨å­˜å¯¹è±¡å¼•ç”¨ï¼Œä¸èƒ½å­˜æ”¾å€¼ï¼Œè€Œ Set å¯¹è±¡éƒ½å¯ä»¥ WeakSet ä¸­å‚¨å­˜çš„å¯¹è±¡å€¼éƒ½æ˜¯è¢«å¼±å¼•ç”¨çš„ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰å…¶å®ƒçš„å˜é‡æˆ–å±æ€§å¼•ç”¨è¿™ä¸ªå¯¹è±¡å€¼ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡æˆ–è¢«åƒåœ¾å›æ”¶æ‰ å±æ€§ï¼š constructor: æ„é€ å‡½æ•° æ–¹æ³•ï¼š add(value) æ·»åŠ å…ƒç´  value has(value) åˆ¤æ–­æ˜¯å¦åŒ…å« value delete(value) åˆ é™¤ value var ws = new WeakSet(); var obj = {} var foo = {} ws.add(obj); ws.add(foo); ws.has(obj); // true ws.has(foo); // false ws.delete(obj); ws.has(obj); // false Mapä¸€ç§å«åšå­—å…¸çš„æ•°æ®ç»“æ„ï¼Œä»¥ [key, value] çš„å½¢å¼å­˜å‚¨ const m = new Map(); const o = { p: 'haha' }; m.set(o, 'content'); m.get(o); // 'content' m.has(o); // true m.delete(o); m.has(o); // false ä»»ä½•å…·æœ‰ Iterator æ¥å£ï¼Œæ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥å½“åš Map æ„é€ å‡½æ•°çš„å‚æ•°ã€‚ const map = new Map([ ['name', 'å¼ ä¸‰'], ['title', 'Author'] ]); map.size; // 2 map.has('name'); // true map.get('name'); // \"å¼ ä¸‰\" map.has('title'); // true map.get('title'); // \"Author\" const set = new Set([ ['foo', 1], ['bar', 2] ]); const m1 = new Map(set); m1.get('foo'); // 1 const m2 = new Map([['baz', 3]]); const m3 = new Map(m2); m3.get('baz'); // 3 å¦‚æœè¯»å–ä¸€ä¸ªæœªçŸ¥çš„é”®ï¼Œåˆ™è¿”å›undefinedã€‚ new Map().get('asfddfsasadf'); // undefined åªæœ‰å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼ŒMap ç»“æ„æ‰å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚è¿™ä¸€ç‚¹è¦éå¸¸å°å¿ƒã€‚ const map = new Map(); map.set(['a'], 555); map.get(['a']); // undefined Map çš„é”®æ˜¯ä¸€ä¸ªç®€å•ç±»å‹çš„å€¼ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œåˆ™åªè¦ä¸¤ä¸ªå€¼ä¸¥æ ¼ç›¸ç­‰ï¼ŒMap å°†å…¶è§†ä¸ºä¸€ä¸ªé”®ï¼Œæ¯”å¦‚0å’Œ-0å°±æ˜¯ä¸€ä¸ªé”®ï¼Œå¸ƒå°”å€¼trueå’Œå­—ç¬¦ä¸²trueåˆ™æ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚å¦å¤–ï¼Œundefinedå’Œnullä¹Ÿæ˜¯ä¸¤ä¸ªä¸åŒçš„é”®ã€‚è™½ç„¶NaNä¸ä¸¥æ ¼ç›¸ç­‰äºè‡ªèº«ï¼Œä½† Map å°†å…¶è§†ä¸ºåŒä¸€ä¸ªé”®ã€‚ let map = new Map(); map.set(-0, 123); map.get(+0); // 123 map.set(true, 1); map.set('true', 2); map.get(true); // 1 map.set(undefined, 3); map.set(null, 4); map.get(undefined); // 3 map.set(NaN, 123); map.get(NaN); // 123 å±æ€§ï¼š constructorï¼šæ„é€ å‡½æ•° size: å­—å…¸ä¸­æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•° const map = new Map([ ['name', 'An'], ['des', 'JS'] ]); map.size; // 2 æ“ä½œæ–¹æ³•ï¼š set(key, value) æ·»åŠ æ–°å…ƒç´  get(key) é€šè¿‡é”®æŸ¥æ‰¾ç‰¹å®šçš„æ•°å€¼å¹¶è¿”å› has(key) åˆ¤æ–­å­—å…¸ä¸­æ˜¯å¦å­˜åœ¨ key delete(key) é€šè¿‡é”® key ä»å­—å…¸ä¸­ç§»é™¤å¯¹åº”çš„æ•°æ® clear() å­—å…¸ä¸­æ‰€æœ‰å…ƒç´ åˆ é™¤ éå†æ–¹æ³•ï¼š keys() å°†å­—å…¸ä¸­åŒ…å«çš„æ‰€æœ‰é”®åä»¥è¿­ä»£å™¨å½¢å¼è¿”å› values() å°†å­—å…¸ä¸­åŒ…å«çš„æ‰€æœ‰æ•°å€¼ä»¥è¿­ä»£å™¨å½¢å¼è¿”å› entries() è¿”å›æ‰€æœ‰æˆå‘˜çš„è¿­ä»£å™¨ forEach() éå†å­—å…¸çš„æ‰€æœ‰æˆå‘˜ const map = new Map([ ['name', 'An'], ['des', 'JS'] ]); console.log(map.entries()); // MapIterator {\"name\" => \"An\", \"des\" => \"JS\"} console.log(map.keys()); // MapIterator {\"name\", \"des\"} ä¸å…¶å®ƒæ•°æ®ç»“æ„ç›¸äº’è½¬æ¢ Map è½¬ Array const map = new Map([[1, 1], [2, 2], [3, 3]]) console.log([...map]); // [[1, 1], [2, 2], [3, 3]] Array è½¬ map const map = new Map([[1, 1], [2, 2], [3, 3]]) console.log(map); // Map {1 => 1, 2 => 2, 3 => 3} Map è½¬ Object function mapToObj(map) { let obj = Object.create(null); for (let [key, value] of map) { obj[key] = value; } return obj } const map = new Map().set('name', 'An').set('des', 'JS'); mapToObj(map); // {name: \"An\", des: \"JS\"} Object è½¬ Map function objToMap(obj) { let map = new Map(); for (let key of obj.keys()) { map.set(key, obj[key]) } return map } objToMap({'name': 'An', 'des': 'JS'}) // Map {\"name\" => \"An\", \"des\" => \"JS\"} Map è½¬ JSON function mapToJson(map) { return JSON.stringify([...map]); } let map = new Map().set('name', 'An').set('des', 'JS'); mapToJson(map); // [[\"name\",\"An\"],[\"des\",\"JS\"]] JSON è½¬ Map function jsonToStrMap(jsonStr) { return objToMap(JSON.parse(jsonStr)); } jsonToStrMap('{\"name\": \"An\", \"des\": \"JS\"}'); // Map {\"name\" => \"An\", \"des\" => \"JS\"} WeakMapWeakMap å¯¹è±¡æ˜¯ä¸€ç»„é”®å€¼å¯¹çš„é›†åˆï¼Œå…¶ä¸­é”®æ˜¯å¼±å¼•ç”¨å¯¹è±¡ï¼Œè€Œå€¼å¯ä»¥æ˜¯ä»»æ„ã€‚ æ¯ä¸ªé”®å¯¹è‡ªå·±æ‰€å¼•ç”¨å¯¹è±¡çš„å¼•ç”¨éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œåœ¨æ²¡æœ‰å…¶ä»–å¼•ç”¨å’Œè¯¥é”®å¼•ç”¨åŒä¸€å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«åƒåœ¾å›æ”¶ã€‚ å±æ€§ï¼š constructor: æ„é€ å‡½æ•° æ–¹æ³•ï¼š has(key)ï¼šåˆ¤æ–­æ˜¯å¦æœ‰ key å…³è”å¯¹è±¡ get(key)ï¼šè¿”å›keyå…³è”å¯¹è±¡ï¼ˆæ²¡æœ‰åˆ™åˆ™è¿”å› undefinedï¼‰ set(key)ï¼šè®¾ç½®ä¸€ç»„keyå…³è”å¯¹è±¡ delete(key)ï¼šç§»é™¤ key çš„å…³è”å¯¹è±¡ æ€»ç»“ Set æˆå‘˜å”¯ä¸€ã€æ— åº å¯ä»¥éå† WeakSet æˆå‘˜éƒ½æ˜¯å¯¹è±¡ æˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ ä¸èƒ½éå† Map æœ¬è´¨æ˜¯é”®å€¼å¯¹çš„é›†åˆ å¯ä»¥éå† WeakMap åªæ¥å—å¯¹è±¡ä½œä¸ºé”®å é”®åæ˜¯å¼±å¼•ç”¨ï¼Œé”®å€¼å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œé”®åæ‰€æŒ‡å‘çš„å¯¹è±¡å¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ ä¸èƒ½éå†","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"é¢è¯•é¢˜","slug":"é¢è¯•é¢˜","permalink":"http://qiandream.cn/tags/é¢è¯•é¢˜/"}]},{"title":"CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC","slug":"CSS-å¸¸è§é¢è¯•é¢˜ç³»åˆ—ä¹‹BFC","date":"2019-08-26T08:24:52.000Z","updated":"2019-08-29T08:28:46.000Z","comments":true,"path":"2019/08/26/css-chang-jian-mian-shi-ti-xi-lie-zhi-bfc/","link":"","permalink":"http://qiandream.cn/2019/08/26/css-chang-jian-mian-shi-ti-xi-lie-zhi-bfc/","excerpt":"","text":"å¯¼è¯­ BFC (Block Formatting Context) å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œé¡µé¢çš„å¯è§†åŒ– CSS æ¸²æŸ“çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œå—å†…çš„å­å…ƒç´ å¸ƒå±€ä¸å—å¤–çš„å…ƒç´ äº’ä¸å¹²æ‰°ã€‚ BFC è§£å†³çš„é—®é¢˜ æµ®åŠ¨å®šä½ æ¶ˆé™¤å¤–è¾¹è·æŠ˜å  æ¸…é™¤æµ®åŠ¨ è‡ªé€‚åº”å¤šæ å¸ƒå±€â€¦ BFC çš„åˆ›å»º bodyæ ¹å…ƒç´  æµ®åŠ¨: float é™¤ none ä»¥å¤–çš„å€¼ ç»å¯¹å®šä½: position (absolute, fixed) overflow å€¼ä¸ä¸º visible å¼¹æ€§å¸ƒå±€æˆ–ç½‘æ ¼å¸ƒå±€ BFC çš„çº¦æŸè§„åˆ™ å±äºåŒä¸€ä¸ª BFC ä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„ Box çš„ margin ä¼šå‘ç”ŸæŠ˜å ã€‚ æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹è·ä¸åŒ…å«å—çš„å·¦è¾¹ç•Œç›¸æ¥è§¦ï¼Œå³ä½¿æµ®åŠ¨å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ BFC çš„åŒºåŸŸä¸ä¼šä¸ float çš„å…ƒç´ åŒºåŸŸé‡å  è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®— BFC çš„åº”ç”¨é˜²æ­¢ margin é‡å &lt;body> &lt;p>top&lt;/p> &lt;p>bottom&lt;/p> &lt;/body> &lt;style> p { width: 100px; height: 100px; background: yellow; line-height: 100px; margin: 10px; text-align: center } &lt;/style> å±•ç¤ºæ•ˆæœï¼š ä¸¤ä¸ª box ä¸­é—´çš„é—´è·ä¸º 10pxï¼Œè€Œä¸æ˜¯ 20pxï¼Œå› ä¸ºå®ƒä»¬å¤„äºåŒä¸€ä¸ª BFC ä¸­(body)ã€‚ è§£å†³æ–¹æ¡ˆä¸ºç»™ç¬¬äºŒä¸ª box åŒ…ä¸€å±‚ divï¼Œè®¾ç½®å…¶ overflow å±æ€§ï¼Œä½¿å®ƒä»¬å¤„äºä¸åŒçš„ BFCã€‚ &lt;body> &lt;p>top&lt;/p> &lt;div> &lt;p>bottom&lt;/p> &lt;/div> &lt;/body> &lt;style> p { width: 100px; height: 100px; background: yellow; line-height: 100px; margin: 10px; text-align: center } div { overflow: hidden; } &lt;/style> å±•ç¤ºæ•ˆæœï¼š è®©æµ®åŠ¨å†…å®¹ä¸å‘¨å›´å†…å®¹ç­‰é«˜&lt;div class=\"box\"> &lt;div class=\"float\">æµ®åŠ¨å…ƒç´ &lt;/div> &lt;p>æœªæµ®åŠ¨å…ƒç´ &lt;/p> &lt;/div> &lt;style> .box { background-color: rgb(224, 206, 247); border: 5px solid rebeccapurple; } .float { float: left; width: 200px; height: 150px; background-color: white; border:1px solid black; padding: 10px; } &lt;/style> å±•ç¤ºæ•ˆæœï¼š ç”±äºæµ®åŠ¨ï¼Œä½¿å¾—æµ®åŠ¨å…ƒç´ çš„é«˜åº¦é«˜äºæ—è¾¹çš„å…ƒç´ ï¼Œè§£å†³æ–¹å¼ä¸ºä½¿çˆ¶ box ç”Ÿæˆä¸€ä¸ª BFCï¼Œå¦‚ä¸‹ï¼š &lt;div class=\"box\"> &lt;div class=\"float\">æµ®åŠ¨å…ƒç´ &lt;/div> &lt;p>æœªæµ®åŠ¨å…ƒç´ &lt;/p> &lt;/div> &lt;style> .box { background-color: rgb(224, 206, 247); border: 5px solid rebeccapurple; overflow: auto; } .float { float: left; width: 200px; height: 150px; background-color: white; border:1px solid black; padding: 10px; } &lt;/style> å±•ç¤ºæ•ˆæœï¼š é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–&lt;div class=\"float\">æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ &lt;/div> &lt;div class=\"box\">æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ &lt;/div> &lt;style> .float { width: 100px; height: 100px; background: #eee; float: left; } .box { width: 200px; height: 200px; background: yellow; } &lt;/style> å±•ç¤ºæ•ˆæœï¼š ç¬¬äºŒä¸ªå…ƒç´ æœ‰éƒ¨åˆ†è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–ï¼Œæ­¤æ—¶å¯è§¦å‘ç¬¬äºŒä¸ªå…ƒç´ çš„ BFC ç‰¹æ€§ï¼Œåœ¨ç¬¬äºŒä¸ªå…ƒç´ ä¸­åŠ å…¥ overflow: hiddenã€‚ &lt;div class=\"float\">æˆ‘æ˜¯ä¸€ä¸ªå·¦æµ®åŠ¨çš„å…ƒç´ &lt;/div> &lt;div class=\"box\">æˆ‘æ˜¯ä¸€ä¸ªæ²¡æœ‰è®¾ç½®æµ®åŠ¨, ä¹Ÿæ²¡æœ‰è§¦å‘ BFC å…ƒç´ &lt;/div> &lt;style> .float { width: 100px; height: 100px; background: #eee; float: left; } .box { overflow: hidden; width: 200px; height: 200px; background: yellow; } &lt;/style> å±•ç¤ºæ•ˆæœï¼š æ­¤æ–¹æ³•å¯ç”¨æ¥å®ç°ä¸¤åˆ—è‡ªé€‚åº”å¸ƒå±€ å‚è€ƒ BFCåŸç†è§£æ 10 åˆ†é’Ÿç†è§£ BFC åŸç†","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"CSS","slug":"CSS","permalink":"http://qiandream.cn/tags/CSS/"}]},{"title":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹","slug":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Arrayå˜åŒ–ä¾¦æµ‹","date":"2019-08-18T10:34:52.000Z","updated":"2019-08-17T17:13:30.468Z","comments":true,"path":"2019/08/18/vue-yuan-ma-xi-lie-sui-du-bi-ji-zhi-array-bian-hua-zhen-ce/","link":"","permalink":"http://qiandream.cn/2019/08/18/vue-yuan-ma-xi-lie-sui-du-bi-ji-zhi-array-bian-hua-zhen-ce/","excerpt":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£","text":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£ ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹ä»çŠ¶æ€ç”ŸæˆDOMï¼Œå†è¾“å‡ºåˆ°ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ä¸€æ•´å¥—æµç¨‹å«åšæ¸²æŸ“ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ä¼šä¸æ–­åœ°é‡æ–°æ¸²æŸ“ã€‚å“åº”å¼ç³»ç»Ÿèµ‹äºˆæ¡†æ¶é‡æ–°æ¸²æŸ“çš„èƒ½åŠ›ï¼Œå…¶é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å˜åŒ–ä¾¦æµ‹ã€‚ ç®€å•æ¥è¯´ï¼Œå˜åŒ–ä¾¦æµ‹çš„ä½œç”¨å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥è§†å›¾è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚ Vue.js 2.0 å¼•å…¥äº†è™šæ‹Ÿ DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ– (ç»„ä»¶å®ä¾‹) ï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ã€‚ å¦‚ä½•è¿½è¸ªå˜åŒ–é¦–å…ˆï¼Œåœ¨ JS ä¸­ï¼Œé€šè¿‡ Object.defineProperty ä¾¦æµ‹å¯¹è±¡å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å“åº”å¼æœ€æ ¹æœ¬çš„ä¾èµ–ã€‚ function defineReactive (data, key, val) { Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function() { return val }, set: function(newVal) { if (val === newVal) { return } val = newVal } }) } æ­¤å¤„ç”¨ defineReactive å¯¹ Object.defineProperty è¿›è¡Œå°è£…ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å¯¹è±¡è¿›è¡Œå˜åŒ–è¿½è¸ªã€‚å°è£…å¥½ä¹‹åï¼Œæ¯å½“ä» data çš„ key ä¸­è¯»å–æ•°æ®æ—¶ï¼Œgetter å‡½æ•°è¢«è§¦å‘ï¼›æ¯å½“åœ¨ data çš„ key ä¸­è®¾ç½®æ–°æ•°æ®æ—¶ï¼Œ setter å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚ ç”±æ­¤å¯è§ï¼ŒObject.defineProperty æ˜¯å¯¹å·²æœ‰å±æ€§è¿›è¡Œçš„åŠ«æŒæ“ä½œï¼Œæ‰€ä»¥ Vue æ‰è¦æ±‚äº‹å…ˆå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨ data ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•å“åº”å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚è¢«åŠ«æŒçš„å±æ€§ä¼šæœ‰ç›¸åº”çš„ getã€set æ–¹æ³•ã€‚ å¦‚ä½•æ”¶é›†ä¾èµ–æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š let globalObj = { text1: 'text1' }; let o1 = new Vue({ template: `&lt;div> &lt;span>{{text1}}&lt;/span> &lt;div>`, data: globalObj }); let o2 = new Vue({ template: `&lt;div> &lt;span>{{text1}}&lt;/span> &lt;div>`, data: globalObj }); è¯¥æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªvmå®ä¾‹ä½¿ç”¨äº†text1ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å‘ä½¿ç”¨äº†å®ƒçš„åœ°æ–¹å‘é€é€šçŸ¥æ¥æ›´æ–°è§†å›¾ï¼Ÿ å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼Œå³æŠŠç”¨åˆ°äº†æ•°æ® text1 çš„åœ°æ–¹æ”¶é›†èµ·æ¥ï¼Œç„¶åå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠä¹‹å‰æ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘æ›´æ–°ä¸€éã€‚ å³ï¼šåœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–ã€‚ ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰ æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ã€‚æˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œç”¨å®ƒæ¥ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€é€šçŸ¥ç­‰ã€‚ export default class Dep { constructor () { this.subs = [] // è§‚å¯Ÿè€…é›†åˆ } // æ·»åŠ è§‚å¯Ÿè€… addSub (sub) { this.subs.push(sub) } // ç§»é™¤è§‚å¯Ÿè€… removeSub (sub) { remove(this.subs, sub) } depend () { // å¦‚æœå­˜åœ¨ Dep.targetï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†æ“ä½œ if (Dep.target) { this.addSub(Dep.target) } } notify () { const subs = this.subs.slice() // é¿å…æ±¡æŸ“åŸæ¥çš„é›†åˆ for (let i = 0, l = subs.length; i &lt; l; i++) { subs[i].update() // æ›´æ–° } } } function remove(arr, item) { if (arr.length) { const index = arr.indexOf(item) if (index > -1) { return arr.splice(index, 1) } } } æ”¹é€  defineReactive function defineReactive (data, key, val) { let dep = new Dep() Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function() { dep.depend() return val }, set: function(newVal) { if (val === newVal) { return } val = newVal dep.notify() } }) } ä»€ä¹ˆæ˜¯ä¾èµ–å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬è¦é€šçŸ¥ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç”¨åˆ°æ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ã€ä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·å†™çš„å‡½æ•°ç­‰ç­‰ï¼Œè¿™æ—¶éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›æƒ…å†µçš„ç±»ã€‚ ç„¶åï¼Œæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥å•Šï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åï¼Œå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ æ”¶é›†è°ï¼ŸWatcher! ä»€ä¹ˆæ˜¯ WatcherWatcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®ƒï¼Œå®ƒå†é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ vm.$watch('a.b.c', function(newVal, oldVal) { // do something }) è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å‡½æ•°ã€‚ æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c å±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ã€‚ç„¶åï¼Œå½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥ watcherã€‚æ¥ç€ï¼Œwatcher åœ¨æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚ export default class Watcher { // ... constructor ( vm: Component, // ç»„ä»¶å®ä¾‹ expOrFn: string | Function, // è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œæˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦èƒ½è§¦å‘å–å€¼æ“ä½œ cb: Function // è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ ) { this.vm = vm // Watcheræœ‰ä¸€ä¸ª vm å±æ€§ï¼Œè¡¨æ˜å®ƒæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„ this.cb = cb // å›è°ƒ this.getter = parsePath(expOrFn) this.value = this.get() } get () { // è§¦å‘å–å€¼æ“ä½œï¼Œè¿›è€Œè§¦å‘å±æ€§çš„getter Dep.target = this let value = this.getter.call(this.vm, this.vm) Dep.target = null return value } update () { // æ›´æ–° const oldValue = this.value this.value = this.get() this.cb.call(this.vm, this.value, oldValue) } } è¿™æ®µä»£ç å¯ä»¥å°†è‡ªå·±ä¸»åŠ¨æ·»åŠ åˆ° data.a.b.c çš„ Dep ä¸­ã€‚ åœ¨ get æ–¹æ³•ä¸­å…ˆæŠŠ Dep.target è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰ watcher å®ä¾‹ï¼Œç„¶åå†è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ï¼Œè¿™å°±ä¼šè§¦å‘ getterï¼Œè§¦å‘äº† getterï¼Œå°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„é€»è¾‘ã€‚ åªè¦ç°åœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åå†è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨æ·»åŠ åˆ° keypath çš„ Dep ä¸­ã€‚ ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­åï¼Œæ¯å½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè®©ä¾èµ–åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ã€‚ ä¸ç®¡ç”¨æˆ·æ‰§è¡Œçš„æ˜¯ vm.$watch(â€˜a.b.câ€™, (value, oldValue) =&gt; {})ï¼Œè¿˜æ˜¯æ¨¡æ¿ä¸­çš„ dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å˜åŒ–ã€‚ parsePathå‡½æ•°ï¼š const bailRE = /[^\\w.$]/ export function parsePath(path) { if (bailRE.test(path)) { return } const segments = path.split('.') return function(obj) { for (let i = 0; i &lt; segments.length; i++) { if (!obj) return obj = obj[segments[i]] } return obj } } é€’å½’ä¾¦æµ‹æ‰€æœ‰Keyå‰é¢çš„å®ä¾‹ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ•°æ®ä¸­çš„æ‰€æœ‰å±æ€§éƒ½ä¾¦æµ‹åˆ°ï¼Œæ‰€ä»¥è¦å°è£…ä¸€ä¸ªObserverç±»ã€‚Observerçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®å†…çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬å­å±æ€§ï¼‰éƒ½è½¬æ¢æˆ getter/setter çš„å½¢å¼ï¼Œç„¶åå»è¿½è¸ªå®ƒä»¬çš„å˜åŒ–ï¼š export class Observer { constructor (value) { this.value = value if (!Array.isArray(value)) { this.walk(value) } } walk (obj) { const keys = Object.keys(obj) for (let i = 0; i &lt; keys.length; i++) { defineReactive (obj, keys[i], obj[keys[i]]) } } } function defineReactive(data, key, val) { if (typeof val === 'object') { new Observer(val) } let dep = new Dep() Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function() { dep.depend() return val }, set: function(newVal) { if (val === newVal) { return } val = newVal dep.notify() } }) } Observer ç±»ï¼Œç”¨äºå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢æˆè¢«ä¾¦æµ‹çš„ objectã€‚ åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼Œåªæœ‰ Object ç±»å‹çš„æ•°æ®æ‰ä¼šè°ƒç”¨ walk å°†æ¯ä¸€ä¸ªå±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ æœ€åï¼Œåœ¨ defineReactive ä¸­æ–°å¢ new Observer(val) æ¥é€’å½’å­å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ data ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ å½“ data ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å±æ€§å¯¹åº”çš„ä¾èµ–å°±ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚ æ€»ç»“å˜åŒ–ä¾¦æµ‹å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦èƒ½ä¾¦æµ‹åˆ°å¹¶å‘å‡ºé€šçŸ¥ã€‚ Object å¯ä»¥é€šè¿‡ Object.defineProperty å°†å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œè¯»å–æ•°æ®æ—¶ä¼šè§¦å‘ getterï¼Œä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ setterã€‚ æˆ‘ä»¬éœ€è¦åœ¨ getter ä¸­æ”¶é›†æœ‰å“ªäº›ä¾èµ–ä½¿ç”¨äº†æ•°æ®ã€‚å½“ setter è¢«è§¦å‘æ—¶ï¼Œå»é€šçŸ¥ getter ä¸­æ”¶é›†çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ æ”¶é›†ä¾èµ–éœ€è¦ä¸ºä¾èµ–æ‰¾ä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼Œä¸ºæ­¤åˆ›å»ºäº† Depï¼Œå®ƒç”¨æ¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯ç­‰ã€‚ æ‰€è°“çš„ä¾èµ–ï¼Œå…¶å®å°±æ˜¯ Watcherã€‚æŠŠ Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚ Watcher çš„åŸç†æ˜¯å…ˆæŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€å”¯ä¸€çš„æŒ‡å®šä½ç½® (Dep.target)ï¼Œç„¶åè¯»å–è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¯»å–äº†è¿™ä¸ªæ•°æ®ï¼Œå› æ­¤ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getter ã€‚æ¥ç€ï¼Œåœ¨ getter ä¸­å°±ä¼šä»å…¨å±€å”¯ä¸€çš„ä½ç½®è¯»å–æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­å»ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒWatcher å¯ä»¥ä¸»åŠ¨å»è®¢é˜…ä»»æ„ä¸€ä¸ªæ•°æ®çš„å˜åŒ–ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† Observer ç±»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ª object ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å­æ•°æ®ï¼‰éƒ½è½¬æ¢æˆå“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼šä¾¦æµ‹ object ä¸­æ‰€æœ‰æ•°æ®çš„å˜åŒ–ã€‚ åœ¨ Vue ä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§æˆ–åˆ é™¤å±æ€§éƒ½æ— æ³•è¢«ä¾¦æµ‹åˆ°ã€‚ Object é€šè¿‡ Observer è½¬æ¢æˆäº† getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ã€‚ å½“å¤–ç•Œé€šè¿‡ Watcher è¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ getter ä»è€Œå°† Watcher æ·»åŠ åˆ° Dep ä¸­ã€‚ å½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ setterï¼Œä»è€Œå‘ Dep ä¸­çš„ä¾èµ–å‘é€é€šçŸ¥ã€‚ Watcher æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šåƒå¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://qiandream.cn/tags/Vue/"}]},{"title":"JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ","slug":"JS-æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ","date":"2019-07-26T07:18:52.000Z","updated":"2019-07-26T07:28:37.956Z","comments":true,"path":"2019/07/26/js-zhi-xing-shang-xia-wen-he-zhi-xing-zhan/","link":"","permalink":"http://qiandream.cn/2019/07/26/js-zhi-xing-shang-xia-wen-he-zhi-xing-zhan/","excerpt":"å¯¼è¯­ æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚","text":"å¯¼è¯­ æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯å½“å‰ JavaScript ä»£ç è¢«è§£æå’Œæ‰§è¡Œæ—¶æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ ç†è§£æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹æ‰§è¡Œä¸Šä¸‹æ–‡æ€»å…±æœ‰ä¸‰ç§ç±»å‹ï¼š å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šåªæœ‰ä¸€ä¸ªï¼Œæµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡å°±æ˜¯ window å¯¹è±¡ï¼Œthis ä¼šæŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šå­˜åœ¨æ— æ•°ä¸ªï¼Œåªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šè¿è¡Œåœ¨ Eval å‡½æ•°ä¸­çš„ä»£ç ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ¥ä¸‹æ¥é—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å†™äº†é‚£ä¹ˆå¤šå‡½æ•°ï¼Œå¦‚ä½•ç®¡ç†åˆ›å»ºçš„é‚£ä¹ˆå¤šæ‰§è¡Œä¸Šä¸‹æ–‡å‘¢ï¼Ÿ Javascript åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œä¹Ÿå«è°ƒç”¨æ ˆï¼Œæ¥ç®¡ç†åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ é¦–æ¬¡è¿è¡Œ Javascript ä»£ç æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ Push åˆ°å½“å‰çš„æ‰§è¡Œæ ˆä¸­ã€‚æ¯å½“å‘ç”Ÿå‡½æ•°è°ƒç”¨ï¼Œå¼•æ“éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ Push åˆ°å½“å‰æ‰§è¡Œæ ˆçš„æ ˆé¡¶ã€‚ æ ¹æ®æ‰§è¡Œæ ˆ LIFO è§„åˆ™ï¼Œå½“æ ˆé¡¶å‡½æ•°è¿è¡Œå®Œæˆåï¼Œå…¶å¯¹åº”çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°†ä¼šä»æ ˆä¸­ Pop å‡ºï¼Œä¸Šä¸‹æ–‡æ§åˆ¶æƒå°†ä¼šç§»åˆ°å½“å‰æ‰§è¡Œæ ˆçš„ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ var a = 'Hello World!'; function first() { console.log('Inside first function'); second(); console.log('Again inside first function'); } function second() { console.log('Inside second function'); } first(); console.log('Inside Global Execution Context'); æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µåˆ›å»ºï¼š1ï¼‰ åˆ›å»ºé˜¶æ®µ 2ï¼‰æ‰§è¡Œé˜¶æ®µ åˆ›å»ºé˜¶æ®µ ç¡®å®š this çš„å€¼ï¼Œä¹Ÿè¢«ç§°ä¸º This Binding LexicalEnvironment-è¯æ³•ç¯å¢ƒç»„ä»¶è¢«åˆ›å»º VariableEnvironment-å˜é‡ç¯å¢ƒç»„ä»¶è¢«åˆ›å»º ExecutionContext = { ThisBinding: &lt;this value>, // ç¡®å®š this LexicalEnvironment: {...}, // è¯æ³•ç¯å¢ƒ VariableEnvironment: {...} // å˜é‡ç¯å¢ƒ } This Binding å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­ this çš„å€¼æŒ‡å‘ window å¯¹è±¡ï¼Œè€Œåœ¨ nodejs ä¸­æŒ‡å‘è¿™ä¸ªæ–‡ä»¶çš„ module å¯¹è±¡ã€‚ å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis çš„å€¼å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚å…·ä½“æœ‰ï¼šé»˜è®¤ç»‘å®šã€éšå¼ç»‘å®šã€æ˜¾ç¤ºç»‘å®šã€new ç»‘å®šç­‰ã€‚ è¯æ³•ç¯å¢ƒè¯æ³•ç¯å¢ƒæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼š ç¯å¢ƒè®°å½•ï¼šå­˜å‚¨å˜é‡å’Œå‡½æ•°å£°æ˜çš„å®é™…ä½ç½® å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ï¼šå¯ä»¥è®¿é—®å…¶å¤–éƒ¨è¯æ³•ç¯å¢ƒ è¯æ³•ç¯å¢ƒæœ‰ä¸¤ç§ç±»å‹ï¼š å…¨å±€ç¯å¢ƒï¼šæ˜¯ä¸€ä¸ªæ²¡æœ‰å¤–éƒ¨ç¯å¢ƒçš„è¯æ³•ç¯å¢ƒï¼Œå…¶å¤–éƒ¨ç¯å¢ƒå¼•ç”¨ä¸º nullã€‚æ‹¥æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼ˆwindowï¼‰åŠå…¶å…³è”çš„æ–¹æ³•å’Œå±æ€§ä»¥åŠä»»ä½•ç”¨æˆ·è‡ªå®šä¹‰çš„å…¨å±€å˜é‡ï¼Œ this çš„å€¼æŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ å‡½æ•°ç¯å¢ƒï¼šç”¨æˆ·åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡è¢«å­˜å‚¨åœ¨ç¯å¢ƒè®°å½•ä¸­ï¼ŒåŒ…å«äº† arguments å¯¹è±¡ã€‚å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨å¯ä»¥æ˜¯å…¨å±€ç¯å¢ƒï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ…å«å†…éƒ¨å‡½æ•°çš„å¤–éƒ¨å‡½æ•°ç¯å¢ƒï¼Œ GlobalExectionContext = { // å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ LexicalEnvironment: { // è¯æ³•ç¯å¢ƒ EnvironmentRecord: { // ç¯å¢ƒè®°å½• Type: \"Object\", // å…¨å±€ç¯å¢ƒ // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ outer: &lt;null> // å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ } } FunctionExectionContext = { // å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ LexicalEnvironment: { // è¯æ³•ç¯å¢ƒ EnvironmentRecord: { // ç¯å¢ƒè®°å½• Type: \"Declarative\", // å‡½æ•°ç¯å¢ƒ // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ // å¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ outer: &lt;Global or outer function environment reference> } } å˜é‡ç¯å¢ƒ å˜é‡ç¯å¢ƒä¹Ÿæ˜¯ä¸€ä¸ªè¯æ³•ç¯å¢ƒï¼Œå› æ­¤å®ƒå…·æœ‰ä¸Šé¢å®šä¹‰çš„è¯æ³•ç¯å¢ƒçš„æ‰€æœ‰å±æ€§ã€‚ åœ¨ES6ä¸­ï¼Œè¯æ³•ç¯å¢ƒå’Œå˜é‡ç¯å¢ƒçš„åŒºåˆ«åœ¨äºå‰è€…ç”¨äºå­˜å‚¨å‡½æ•°å£°æ˜å’Œå˜é‡(let const)ç»‘å®šï¼Œåè€…ä»…ç”¨äºå­˜å‚¨å˜é‡(var)ç»‘å®šã€‚ GlobalExectionContext = { ThisBinding: &lt;Global Object>, LexicalEnvironment: { EnvironmentRecord: { Type: \"Object\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ a: &lt; uninitialized >, b: &lt; uninitialized >, multiply: &lt; func > } outer: &lt;null> }, VariableEnvironment: { EnvironmentRecord: { Type: \"Object\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ c: undefined, } outer: &lt;null> } } FunctionExectionContext = { ThisBinding: &lt;Global Object>, LexicalEnvironment: { EnvironmentRecord: { Type: \"Declarative\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ Arguments: {0: 20, 1: 30, length: 2}, }, outer: &lt;GlobalLexicalEnvironment> }, VariableEnvironment: { EnvironmentRecord: { Type: \"Declarative\", // æ ‡è¯†ç¬¦ç»‘å®šåœ¨è¿™é‡Œ g: undefined }, outer: &lt;GlobalLexicalEnvironment> } } å˜é‡æå‡çš„åŸå› ï¼šåœ¨åˆ›å»ºé˜¶æ®µï¼Œå‡½æ•°å£°æ˜å­˜å‚¨åœ¨ç¯å¢ƒä¸­ï¼Œè€Œå˜é‡ä¼šè¢«è®¾ç½®ä¸º undefined (var æƒ…å†µä¸‹) æˆ–ä¿æŒæœªåˆå§‹åŒ– (letã€const æƒ…å†µä¸‹)ã€‚æ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥åœ¨å£°æ˜ä¹‹å‰è®¿é—® var å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœåœ¨å£°æ˜ä¹‹å‰è®¿é—® let å’Œ const å®šä¹‰çš„å˜é‡ä¼šæç¤ºå¼•ç”¨é”™è¯¯çš„åŸå› ã€‚è¿™å°±æ˜¯æ‰€è°“çš„å˜é‡æå‡ã€‚ æ‰§è¡Œé˜¶æ®µ æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä»£ç åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µè¿›è¡Œå¤„ç†ï¼š è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡ ä»£ç æ‰§è¡Œ è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ­¤æ—¶çš„å˜é‡å¯¹è±¡åŒ…æ‹¬ï¼ˆå¦‚ä¸‹é¡ºåºåˆå§‹åŒ–ï¼‰ï¼š å‡½æ•°æ‰€æœ‰çš„å½¢å‚ï¼šæ²¡æœ‰å®å‚ï¼Œå±æ€§å€¼è®¾ä¸º undefinedã€‚ å‡½æ•°å£°æ˜ï¼šå¦‚æœå˜é‡å¯¹è±¡å·²ç»å­˜åœ¨ç›¸åŒåç§°çš„å±æ€§ï¼Œåˆ™å®Œå…¨æ›¿æ¢è¿™ä¸ªå±æ€§ã€‚ å˜é‡å£°æ˜ï¼šå¦‚æœå˜é‡åç§°ä¸å·²ç»å£°æ˜çš„å½¢å‚æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ã€‚ ```javascriptfunction foo(a) {var b = 2;function c() {}var d = function() {}; b = 3;} foo(1); ```javascript AO = { arguments: { 0: 1, length: 1 }, a: 1, b: undefined, c: reference to function c(){}, d: undefined } å½¢å‚ arguments å·²ç»æœ‰å€¼äº†ï¼Œä½†æ˜¯å˜é‡è¿˜æ˜¯ undefinedï¼Œåªæ˜¯åˆå§‹åŒ–çš„å€¼ã€‚ ä»£ç æ‰§è¡Œ è¿™ä¸ªé˜¶æ®µä¼šé¡ºåºæ‰§è¡Œä»£ç ï¼Œå¹¶ä¿®æ”¹å˜é‡çš„å€¼ã€‚ AO = { arguments: { 0: 1, length: 1 }, a: 1, b: 3, c: reference to function c(){}, d: reference to FunctionExpression \"d\" } æ€»ç»“å¦‚ä¸‹ï¼š å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–æ˜¯å…¨å±€å¯¹è±¡ã€‚ å‡½æ•°ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡åˆå§‹åŒ–åªåŒ…æ‹¬ arguments å¯¹è±¡ã€‚ åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ä¼šç»™å˜é‡å¯¹è±¡æ·»åŠ å½¢å‚ã€å‡½æ•°å£°æ˜ã€å˜é‡å£°æ˜ç­‰åˆå§‹çš„å±æ€§å€¼ã€‚ åœ¨ä»£ç æ‰§è¡Œé˜¶æ®µï¼Œä¼šå†æ¬¡ä¿®æ”¹å˜é‡å¯¹è±¡çš„å±æ€§å€¼ã€‚ æ·±å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆJS æ˜¯å•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ‰§è¡Œé¡ºåºæ˜¯é¡ºåºæ‰§è¡Œï¼Œä½†æ˜¯ JS å¼•æ“å¹¶ä¸æ˜¯ä¸€è¡Œä¸€è¡Œåœ°åˆ†æå’Œæ‰§è¡Œä»£ç ï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µåœ°åˆ†æå’Œæ‰§è¡Œï¼Œå…ˆè¿›è¡Œç¼–è¯‘ç„¶åæ‰æ˜¯æ‰§è¡Œã€‚ æœ‰å¦‚ä¸‹ä¸¤æ®µä»£ç ï¼Œæ‰§è¡Œç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä¸¤æ®µä»£ç ç©¶ç«Ÿæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ var scope = \"global scope\"; function checkscope(){ var scope = \"local scope\"; function f(){ return scope; } return f(); } checkscope(); var scope = \"global scope\"; function checkscope(){ var scope = \"local scope\"; function f(){ return scope; } return f; } checkscope()(); ç­”æ¡ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„å˜åŒ–ä¸ä¸€æ ·ã€‚ ç¬¬ä¸€æ®µä»£ç ï¼š ECStack.push(&lt;checkscope> functionContext); ECStack.push(&lt;f> functionContext); ECStack.pop(); ECStack.pop(); ç¬¬äºŒæ®µä»£ç ï¼š ECStack.push(&lt;checkscope> functionContext); ECStack.pop(); ECStack.push(&lt;f> functionContext); ECStack.pop(); å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨æ´»åŠ¨å¯¹è±¡æ¥è¡¨ç¤ºå˜é‡å¯¹è±¡ã€‚ æ´»åŠ¨å¯¹è±¡å’Œå˜é‡å¯¹è±¡çš„åŒºåˆ«åœ¨äºï¼š å˜é‡å¯¹è±¡æ˜¯è§„èŒƒä¸Šæˆ– JS å¼•æ“ä¸Šå®ç°çš„ï¼Œå¹¶ä¸èƒ½åœ¨ JS ç¯å¢ƒä¸­ç›´æ¥è®¿é—®ã€‚ å½“è¿›å…¥åˆ°ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åï¼Œè¿™ä¸ªå˜é‡å¯¹è±¡ä¼šè¢«æ¿€æ´»ï¼Œæ‰€ä»¥å«æ´»åŠ¨å¯¹è±¡ï¼Œè¿™æ—¶æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±æ€§æ‰èƒ½è¢«è®¿é—®ã€‚ è°ƒç”¨å‡½æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨ä¸ºå…¶åˆ›å»ºä¸€ä¸ª arguments å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–å±€éƒ¨å˜é‡ argumentsã€‚æ‰€æœ‰ä½œä¸ºå‚æ•°ä¼ å…¥çš„å€¼éƒ½ä¼šæˆä¸º arguments å¯¹è±¡çš„æ•°ç»„å…ƒç´ ã€‚ å‚è€ƒ ç†è§£JavaScript ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå’Œå˜é‡å¯¹è±¡","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://qiandream.cn/tags/JavaScript/"}]},{"title":"Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†","slug":"Node-NodeJSæ ¸å¿ƒåŸºç¡€çŸ¥è¯†","date":"2019-06-26T15:11:52.000Z","updated":"2019-07-07T11:26:33.333Z","comments":true,"path":"2019/06/26/node-nodejs-he-xin-ji-chu-zhi-shi/","link":"","permalink":"http://qiandream.cn/2019/06/26/node-nodejs-he-xin-ji-chu-zhi-shi/","excerpt":"å¯¼è¯­ æˆªæ­¢ä»Šå¤©ï¼Œåƒè°·æ­Œã€äºšé©¬é€Šç­‰å…¨çƒ Top 10 äº’è”ç½‘å¤§å…¬å¸ï¼Œéƒ½æ—©å·²å…¥å‘ Nodeâ€¦","text":"å¯¼è¯­ æˆªæ­¢ä»Šå¤©ï¼Œåƒè°·æ­Œã€äºšé©¬é€Šç­‰å…¨çƒ Top 10 äº’è”ç½‘å¤§å…¬å¸ï¼Œéƒ½æ—©å·²å…¥å‘ Nodeâ€¦ Nodejs æ¦‚è¿°Nodejs æ˜¯åŸºäº Chrome V8 å¼•æ“æ„å»ºçš„ï¼Œç”±äº‹ä»¶å¾ªç¯åˆ†å¸ƒ I/O ä»»åŠ¡ï¼Œæœ€ç»ˆå·¥ä½œçº¿ç¨‹ä¼šå°†ä»»åŠ¡æ”¾åˆ°çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œè€Œäº‹ä»¶å¾ªç¯ç­‰å¾…æ‰§è¡Œç»“æœå°±å¯ä»¥äº†ã€‚ Nodejs æ˜¯ Javascript çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚ Nodejs æ„å»ºåœ¨ Chrome V8 è¿™ä¸ªè‘—åçš„ Javascript å¼•æ“ä¸Šã€‚ Nodejs æ¯ä¸ªå‡½æ•°éƒ½æ˜¯åŒæ­¥çš„ï¼Œè€Œ I/O æ“ä½œæ˜¯å¼‚æ­¥çš„ã€‚ Nodejs ä½¿ç”¨ npm ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚ Nodejs å®‰è£…Nodejs æ”¯æŒ macOSã€Linux ä»¥åŠ Windows ç­‰å¤šä¸ªä¸»æµæ“ä½œç³»ç»Ÿã€‚ 3m å®‰è£…æ³• nvm å¼€æºçš„ Nodejs ç‰ˆæœ¬ç®¡ç†å™¨ npm Nodejs åŒ…ç®¡ç†ç«¯ nrm è§£å†³ npm é•œåƒè®¿é—®æ…¢çš„é—®é¢˜ã€‚ nvmå®‰è£… nvmé¦–å…ˆï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š $ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash æ„æ€æ˜¯é€šè¿‡ curl å‘½ä»¤ä¸‹è½½ install.sh è„šæœ¬å¹¶æ‰§è¡Œã€‚æ‰§è¡Œå®Œæˆåï¼Œé‡æ–°æ‰“å¼€ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œ vi ~/.zshrc æŠŠ nvm å‘½ä»¤çš„æ‰§è¡Œè·¯å¾„æ”¾åˆ° ~/.zshrc æ–‡ä»¶ä¸‹ï¼š export NVM_DIR=\"$HOME/.nvm\" [ -s \"$NVM_DIR/nvm.sh\" ] &amp;&amp; . \"$NVM_DIR/nvm.sh\" æ‰§è¡Œ source å‘½ä»¤ï¼Œä½¿ç³»ç»Ÿç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š source ~/.zshrc è¾“å…¥ï¼š nvm --version 0.33.1 æŸ¥çœ‹å¯å®‰è£…çš„ Nodejs ç‰ˆæœ¬å®‰è£… Node ä¹‹å‰ï¼Œéœ€è¦äº†è§£é€šè¿‡ nvm å¯ä»¥å®‰è£…å“ªäº›ç‰ˆæœ¬çš„ Nodeã€‚ nvm ls-remote LTS ç‰ˆæœ¬æ˜¯æŒ‡é•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œæ¨èç»™å¤§éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ Current ç‰ˆæœ¬æ˜¯æŒ‡å½“å‰æ­£åœ¨å¼€å‘çš„å°é²œç‰ˆæœ¬ï¼Œä¸å®Œå…¨ç‰ˆæœ¬ï¼Œéœ€è¦ç»è¿‡ä¸€æ®µæ—¶é—´çš„æµ‹è¯•ã€å¼€å‘å’Œä¿®å¤ bug ç­‰æ‰èƒ½å˜ä¸º LTS ç‰ˆæœ¬ï¼Œä¸€èˆ¬ä¾›å¼€å‘è€…å­¦ä¹ ã€‚ å®‰è£… Nodenvm install 10.15.3 é€šè¿‡ nvm å®‰è£…çš„ Node ä½äºç”¨æˆ·ç›®å½•ä¸‹ï¼Œè€Œéç³»ç»Ÿç›®å½•ä¸‹ã€‚ which node /Users/wangqian/.nvm/versions/node/v10.15.3/bin/node é»˜è®¤ä½¿ç”¨æŸä¸ª Node ç‰ˆæœ¬æ¥ç¼–è¯‘ä»£ç ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šä¸€ä¸ª default åˆ«åã€‚ nvm alias default node default -> node (-> v10.15.3) æ­¤æ—¶ï¼Œè¾“å…¥ node -vï¼Œä»¥ååœ¨ç»ˆç«¯çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨çš„é»˜è®¤ç‰ˆæœ¬éƒ½ä¼šæ˜¯ä½ è®¾ç½®çš„ç‰ˆæœ¬ã€‚ node -v v10.15.3 å¦‚ä½•ä½¿ç”¨ nvm åˆ‡æ¢ Node ç‰ˆæœ¬ï¼Ÿé¦–å…ˆå®‰è£… Node 8.x nvm install 8 åˆ‡æ¢åˆ° 8.x ç‰ˆæœ¬ï¼š nvm use 8 Now using node v8.16.0 (npm v6.4.1) node -v v8.16.0 å¦‚ä½•çŸ¥é“æœ¬æœºé€šè¿‡ nvm å®‰è£…äº†å“ªäº› Node ç‰ˆæœ¬å‘¢ï¼Ÿ nvm ls -> v8.16.0 v10.15.3 default -> node (-> v10.15.3) node -> stable (-> v10.15.3) (default) stable -> 10.15 (-> v10.15.3) (default) iojs -> N/A (default) lts/* -> lts/dubnium (-> N/A) lts/argon -> v4.9.1 (-> N/A) lts/boron -> v6.17.1 (-> N/A) lts/carbon -> v8.16.0 lts/dubnium -> v10.16.0 (-> N/A) è‹¥è¦ç»å¸¸åˆ‡æ¢ Node ç‰ˆæœ¬ï¼Œæœ€ç—›è‹¦çš„è«è¿‡äºå…¨å±€æ¨¡å—éœ€è¦é‡æ–°å®‰è£…ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œnvm æä¾›äº†ä¸€ä¸ªå¾ˆè´´å¿ƒçš„ä¸€é”®å®‰è£…å…¨å±€æ¨¡å—çš„ nvm reinstall-packageså‘½ä»¤ã€‚ nvm reinstall-packages 6 nvm é»˜è®¤è¿œç«¯ä¸‹è½½åœ°å€æ˜¯ https://nodejs.org/distï¼Œå¦‚æœæƒ³å®‰è£…è‡ªå®šä¹‰çš„ Node ç‰ˆæœ¬ï¼Œå¯ä»¥æŒ‡å®š nvm çš„è¿œç«¯ä¸‹è½½åœ°å€ã€‚ NVM_NODEJS_ORG_MIRROR=https://nodejs.org/download/chakracore-nightly å¯¹äºä¸€äº›æ­£åœ¨æµ‹è¯•çš„å°é²œç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ä¸‹é¢çš„åœ°å€ä¸‹è½½ã€‚ NVM_NODEJS_ORG_MIRROR=https://nodejs.org/download/test","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Node","slug":"Node","permalink":"http://qiandream.cn/tags/Node/"}]},{"title":"JS-thisã€callã€apply","slug":"JS-thisã€callã€apply","date":"2019-06-13T05:00:52.000Z","updated":"2019-06-16T09:51:28.472Z","comments":true,"path":"2019/06/13/js-this-call-apply/","link":"","permalink":"http://qiandream.cn/2019/06/13/js-this-call-apply/","excerpt":"å¯¼è¯­ åœ¨ Javascript ç¼–ç¨‹ä¸­ï¼Œthisã€Function.prototype.callã€Function.prototype.apply æœ‰ç€å¹¿æ³›çš„è¿ç”¨ï¼Œç†è§£å®ƒä»¬çš„ç”¨æ³•è‡³å…³é‡è¦ã€‚","text":"å¯¼è¯­ åœ¨ Javascript ç¼–ç¨‹ä¸­ï¼Œthisã€Function.prototype.callã€Function.prototype.apply æœ‰ç€å¹¿æ³›çš„è¿ç”¨ï¼Œç†è§£å®ƒä»¬çš„ç”¨æ³•è‡³å…³é‡è¦ã€‚ thisJavascript ä¸­çš„ this æ€»æ˜¯æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå…·ä½“æŒ‡å‘å“ªä¸ªå¯¹è±¡æ˜¯åœ¨è¿è¡Œæ—¶åŸºäºå‡½æ•°çš„æ‰§è¡Œç¯å¢ƒåŠ¨æ€ç»‘å®šçš„ã€‚ this çš„æŒ‡å‘åœ¨å…·ä½“å®é™…åº”ç”¨ä¸­ï¼Œthis çš„æŒ‡å‘é€šå¸¸å¯åˆ†ä¸ºä»¥ä¸‹4ç§: ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨ ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ ä½œä¸ºæ„é€ å™¨è°ƒç”¨ Function.prototype.callã€Function.prototype.apply ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å½“å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘è¯¥å¯¹è±¡ï¼š var obj = { a: 1, getA: function () { console.log(this.a) } } obj.getA() // 1 ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œæ­¤æ—¶çš„ this æ€»æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨ä¸­ï¼Œè¿™ä¸ªå…¨å±€å¯¹è±¡æ˜¯ window å¯¹è±¡ã€‚ var a = 1 var getName = function () { console.log(this.a) } getName() // 1 ä½œä¸ºæ„é€ å™¨è°ƒç”¨å½“ç”¨ new è¿ç®—ç¬¦è°ƒç”¨å‡½æ•°æ—¶ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ„é€ å™¨é‡Œçš„ this å°±æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡ã€‚ var MyClass = function () { this.name = 'sven' } var obj = new MyClass() console.log(obj.name) // 'sven' å¦‚æœæ„é€ å™¨æ˜¾å¼åœ°è¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ¬¡è¿ç®—ç»“æœæœ€ç»ˆä¼šè¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰æœŸå¾…çš„ thisã€‚ var MyClass = function () { this.name = 'sven' return { name: 'wang' } } var obj = new MyClass() console.log(obj.name) // wang å¦‚æœæ„é€ å™¨ä¸æ˜¾å¼åœ°è¿”å›ä»»ä½•æ•°æ®ï¼Œæˆ–è€…è¿”å›ä¸€ä¸ªéå¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œå°±ä¸ä¼šé€ æˆä¸Šè¿°é—®é¢˜ã€‚ var MyClass = function () { this.name = 'sven' return 'wang' } var obj = n console.log(obj.name) // 'sven' Function.prototype.callã€Function.prototype.applyç”¨ Function.prototype.callã€Function.prototype.apply å¯ä»¥åŠ¨æ€æ”¹å˜ä¼ å…¥å‡½æ•°çš„ thisã€‚ var obj1 = { name: 'wang', getName: function () { console.log(this.name) } } var obj2 = { name: 'zhang' } obj1.getName() obj1.getName.call(obj2) // 'wang' // 'zhang' ä¸¢å¤±çš„ thisä¸¾ä¸ªä¾‹å­ï¼š var obj = { name: 'wang', getName: function () { console.log(this.name) } } obj.getName() getName = obj.getName getName() // 'wang' // undefined å½“è°ƒç”¨ obj.getName æ—¶ï¼Œæ­¤æ—¶ this æŒ‡å‘ obj å¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡º â€˜wangâ€™ã€‚ å½“ç”¨å¦å¤–ä¸€ä¸ªå˜é‡ getName æ¥å¼•ç”¨ obj.getNameï¼Œå¹¶ä¸”è°ƒç”¨æ—¶ï¼Œå®ƒæ˜¯è¢«å½“ä½œæ™®é€šå‡½æ•°æ¥è°ƒç”¨ï¼Œæ­¤æ—¶ this æŒ‡å‘ window å¯¹è±¡ï¼Œæ‰€ä»¥è¾“å‡º undefinedã€‚ call å’Œ applyåœ¨å®é™…å¼€å‘ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å‡½æ•°å¼é£æ ¼çš„ä»£ç ç¼–å†™ä¸­ï¼Œcall å’Œ apply æ–¹æ³•å°¤ä¸ºé‡è¦ã€‚ åŒºåˆ«call å’Œ apply ä½œç”¨ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äºä¼ å…¥å‚æ•°å½¢å¼çš„ä¸åŒã€‚ apply æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†å‡½æ•°ä½“å†…çš„ this å¯¹è±¡çš„æŒ‡å‘ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¸€ä¸ªå¸¦ä¸‹æ ‡çš„é›†åˆï¼Œå¯ä»¥ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥ä¸ºç±»æ•°ç»„ã€‚ call ä¼ å…¥çš„å‚æ•°æ•°é‡ä¸å›ºå®šï¼Œè·Ÿ apply ä¸åŒçš„æ˜¯ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯ä»£è¡¨å‡½æ•°ä½“å†… this å¯¹è±¡çš„æŒ‡å‘ï¼Œä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹ï¼Œæ¯ä¸ªå‚æ•°ä¾æ­¤ä¼ å…¥å‡½æ•°ã€‚ å½“ä½¿ç”¨ call æˆ–è€… apply æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º nullï¼Œåˆ™å‡½æ•°ä½“å†…çš„ this ä¼šæŒ‡å‘é»˜è®¤çš„å®¿ä¸»å¯¹è±¡ã€‚ ä½†å¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°ä½“å†…çš„ this è¿˜æ˜¯ä¸º nullã€‚ call å’Œ apply çš„ç”¨é€”ä¸‹é¢å°†è¯¦ç»†ä»‹ç» call å’Œ apply åœ¨å®é™…å¼€å‘ä¸­çš„ç”¨é€”ã€‚ æ”¹å˜ this æŒ‡å‘var obj1 = { name: 'wang' } var obj2 = { name: 'zhang' } var name = 'qian' var getName = function () { console.log(this.name) } getName () // 'qian' getName.call(obj1) // 'wang' getName.call(obj2) // 'zhang' Function.prototype.bindå¤§éƒ¨åˆ†é«˜çº§æµè§ˆå™¨éƒ½å®ç°äº†å†…ç½®çš„ Function.prototype.bindï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘ã€‚å³ä½¿æ²¡æœ‰åŸç”Ÿçš„ Function.prototype.bind ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ¥æ¨¡æ‹Ÿï¼š Function.prototype.bind = function (context) { let self = this // ä¿å­˜åŸå‡½æ•° console.log(this) return function () { // è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° return self.apply(context, arguments) // æ‰§è¡Œæ–°çš„å‡½æ•°æ—¶ï¼Œä¼šæŠŠä¹‹å‰ä¼ å…¥çš„ context å½“ä½œæ–°å‡½æ•°ä½“å†…çš„ this } } var obj = { name: 'seven' } var func = function () { console.log(this.name) }.bind(obj) func() ä¸Šè¿°ä¸ºä¸€ä¸ªç®€åŒ–ç‰ˆçš„ Function.prototype.bind å®ç°ï¼Œé€šå¸¸æˆ‘ä»¬è¿˜ä¼šæŠŠå®ƒå®ç°å¾—ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½¿å¾—å¯ä»¥åœ¨ func å‡½æ•°ä¸­é¢„å…ˆå¡«å…¥ä¸€äº›å‚æ•°ï¼š Function.prototype.bind = function () { console.log(arguments) var self = this, // ä¿å­˜åŸå‡½æ•° context = [].shift.call(arguments), // éœ€è¦ç»‘å®šçš„ this ä¸Šä¸‹æ–‡ args = [].slice.call(arguments) // å‰©ä½™çš„å‚æ•°è½¬åŒ–ä¸ºæ•°ç»„ console.log(context) console.log(args) return function () { // è¿”å›ä¸€ä¸ªæ–°éŸ©æ·‘ return self.apply(context, [].concat(args, [].slice.call(arguments))) // æ‰§è¡Œæ–°çš„å‡½æ•°æ—¶ï¼ŒæŠŠä¹‹å‰ä¼ å…¥çš„ context å½“ä½œæ–°å‡½æ•°ä½“å†…çš„ thisï¼Œå¹¶ä¸”ç»„åˆä¸¤æ¬¡åˆ†åˆ«ä¼ å…¥çš„å‚æ•°ï¼Œä½œä¸ºæ–°å‡½æ•°çš„å‚æ•° } } var obj = { name: 'seven' } var func = function (a, b, c, d) { console.log(this.name) console.log([a, b, c, d]) }.bind(obj, 1, 2) func(3, 4) å€Ÿç”¨å…¶ä»–å¯¹è±¡çš„æ–¹æ³•å€Ÿç”¨æ–¹æ³•çš„ç¬¬ä¸€ç§åœºæ™¯æ˜¯â€å€Ÿç”¨æ„é€ å‡½æ•°â€œï¼Œé€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œå¯ä»¥å®ç°ä¸€äº›ç±»ä¼¼ç»§æ‰¿çš„æ•ˆæœï¼š var A = function (name) { this.name = name } var B = function () { A.apply(this, arguments) } B.prototype.getName = function () { return this.name } var b = new B('wang') console.log(b.getName()) // 'wang' é™„ï¼š å‡½æ•°çš„å‚æ•°åˆ—è¡¨ arguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„æ•°ç»„ã€‚ å¦‚æœæƒ³åœ¨ arguments ä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.push å¦‚æœæƒ³æŠŠ arguments è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.slice å¦‚æœæƒ³æˆªå– arguments ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé€šå¸¸ä¼šå€Ÿç”¨ Array.prototype.shift","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://qiandream.cn/tags/JavaScript/"}]},{"title":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹","slug":"Vue-æºç ç³»åˆ—éšè¯»ç¬”è®°ä¹‹Objectå˜åŒ–ä¾¦æµ‹","date":"2019-05-16T10:34:52.000Z","updated":"2019-08-17T17:08:47.848Z","comments":true,"path":"2019/05/16/vue-yuan-ma-xi-lie-sui-du-bi-ji-zhi-object-bian-hua-zhen-ce/","link":"","permalink":"http://qiandream.cn/2019/05/16/vue-yuan-ma-xi-lie-sui-du-bi-ji-zhi-object-bian-hua-zhen-ce/","excerpt":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£","text":"å¯¼è¯­ Vueæœ€ç‹¬ç‰¹çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯çœ‹èµ·æ¥å¹¶ä¸æ˜¾çœ¼çš„å“åº”å¼ç³»ç»Ÿã€‚æ•°æ®æ¨¡å‹ä»…ä»…æ˜¯æ™®é€šçš„JSå¯¹è±¡ã€‚è€Œå½“ä½ ä¿®æ”¹å®ƒä»¬æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾—çŠ¶æ€ç®¡ç†éå¸¸ç®€å•ã€ç›´æ¥ã€‚ä¸è¿‡ç†è§£å…¶å·¥ä½œåŸç†åŒæ ·é‡è¦ï¼Œè¿™æ ·ä½ å¯ä»¥å›é¿ä¸€äº›å¸¸è§é—®é¢˜ â€”å®˜æ–¹æ–‡æ¡£ ä»€ä¹ˆæ˜¯å˜åŒ–ä¾¦æµ‹ä»çŠ¶æ€ç”ŸæˆDOMï¼Œå†è¾“å‡ºåˆ°ç”¨æˆ·ç•Œé¢æ˜¾ç¤ºçš„ä¸€æ•´å¥—æµç¨‹å«åšæ¸²æŸ“ï¼Œåº”ç”¨åœ¨è¿è¡Œæ—¶ä¼šä¸æ–­åœ°é‡æ–°æ¸²æŸ“ã€‚å“åº”å¼ç³»ç»Ÿèµ‹äºˆæ¡†æ¶é‡æ–°æ¸²æŸ“çš„èƒ½åŠ›ï¼Œå…¶é‡è¦ç»„æˆéƒ¨åˆ†æ˜¯å˜åŒ–ä¾¦æµ‹ã€‚ ç®€å•æ¥è¯´ï¼Œå˜åŒ–ä¾¦æµ‹çš„ä½œç”¨å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥è§†å›¾è¿›è¡Œç›¸åº”çš„æ›´æ–°ã€‚ Vue.js 2.0 å¼•å…¥äº†è™šæ‹Ÿ DOMï¼Œæ”¶é›†æ¯ä¸€ä¸ªçŠ¶æ€æ‰€ç»‘å®šçš„ä¾èµ– (ç»„ä»¶å®ä¾‹) ï¼Œå½“çŠ¶æ€æ”¹å˜åï¼Œä¼šé€šçŸ¥åˆ°ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨å†ä½¿ç”¨è™šæ‹Ÿ DOM è¿›è¡Œå¯¹æ¯”ã€‚ å¦‚ä½•è¿½è¸ªå˜åŒ–é¦–å…ˆï¼Œåœ¨ JS ä¸­ï¼Œé€šè¿‡ Object.defineProperty ä¾¦æµ‹å¯¹è±¡å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯å“åº”å¼æœ€æ ¹æœ¬çš„ä¾èµ–ã€‚ function defineReactive (data, key, val) { Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function() { return val }, set: function(newVal) { if (val === newVal) { return } val = newVal } }) } æ­¤å¤„ç”¨ defineReactive å¯¹ Object.defineProperty è¿›è¡Œå°è£…ï¼Œå…¶ä½œç”¨æ˜¯å®šä¹‰ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œåœ¨å‡½æ•°ä¸­å¯¹å¯¹è±¡è¿›è¡Œå˜åŒ–è¿½è¸ªã€‚å°è£…å¥½ä¹‹åï¼Œæ¯å½“ä» data çš„ key ä¸­è¯»å–æ•°æ®æ—¶ï¼Œgetter å‡½æ•°è¢«è§¦å‘ï¼›æ¯å½“åœ¨ data çš„ key ä¸­è®¾ç½®æ–°æ•°æ®æ—¶ï¼Œ setter å‡½æ•°å°±ä¼šæ‰§è¡Œã€‚ ç”±æ­¤å¯è§ï¼ŒObject.defineProperty æ˜¯å¯¹å·²æœ‰å±æ€§è¿›è¡Œçš„åŠ«æŒæ“ä½œï¼Œæ‰€ä»¥ Vue æ‰è¦æ±‚äº‹å…ˆå°†éœ€è¦ç”¨åˆ°çš„æ•°æ®å®šä¹‰åœ¨ data ä¸­ï¼ŒåŒæ—¶ä¹Ÿæ— æ³•å“åº”å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤ã€‚è¢«åŠ«æŒçš„å±æ€§ä¼šæœ‰ç›¸åº”çš„ getã€set æ–¹æ³•ã€‚ å¦‚ä½•æ”¶é›†ä¾èµ–æ€è€ƒä»¥ä¸‹é—®é¢˜ï¼š let globalObj = { text1: 'text1' }; let o1 = new Vue({ template: `&lt;div> &lt;span>{{text1}}&lt;/span> &lt;div>`, data: globalObj }); let o2 = new Vue({ template: `&lt;div> &lt;span>{{text1}}&lt;/span> &lt;div>`, data: globalObj }); è¯¥æ¨¡æ¿ä¸­æœ‰ä¸¤ä¸ªvmå®ä¾‹ä½¿ç”¨äº†text1ï¼Œå½“å®ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•å‘ä½¿ç”¨äº†å®ƒçš„åœ°æ–¹å‘é€é€šçŸ¥æ¥æ›´æ–°è§†å›¾ï¼Ÿ å¯¹äºä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘çš„å›ç­”æ˜¯ï¼Œå…ˆæ”¶é›†ä¾èµ–ï¼Œå³æŠŠç”¨åˆ°äº†æ•°æ® text1 çš„åœ°æ–¹æ”¶é›†èµ·æ¥ï¼Œç„¶åå½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæŠŠä¹‹å‰æ”¶é›†å¥½çš„ä¾èµ–å¾ªç¯è§¦å‘æ›´æ–°ä¸€éã€‚ å³ï¼šåœ¨ getter ä¸­æ”¶é›†ä¾èµ–ï¼Œåœ¨ setter ä¸­è§¦å‘ä¾èµ–ã€‚ ä¾èµ–æ”¶é›†åˆ°å“ªé‡Œï¼ˆDepï¼‰ æ¯ä¸ª key éƒ½æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨å½“å‰ key çš„ä¾èµ–ã€‚æˆ‘ä»¬æŠŠä¾èµ–æ”¶é›†çš„ä»£ç å°è£…æˆä¸€ä¸ª Dep ç±»ï¼Œç”¨å®ƒæ¥ä¸“é—¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¾èµ–ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€é€šçŸ¥ç­‰ã€‚ export default class Dep { constructor () { this.subs = [] // è§‚å¯Ÿè€…é›†åˆ } // æ·»åŠ è§‚å¯Ÿè€… addSub (sub) { this.subs.push(sub) } // ç§»é™¤è§‚å¯Ÿè€… removeSub (sub) { remove(this.subs, sub) } depend () { // å¦‚æœå­˜åœ¨ Dep.targetï¼Œåˆ™è¿›è¡Œä¾èµ–æ”¶é›†æ“ä½œ if (Dep.target) { this.addSub(Dep.target) } } notify () { const subs = this.subs.slice() // é¿å…æ±¡æŸ“åŸæ¥çš„é›†åˆ for (let i = 0, l = subs.length; i &lt; l; i++) { subs[i].update() // æ›´æ–° } } } function remove(arr, item) { if (arr.length) { const index = arr.indexOf(item) if (index > -1) { return arr.splice(index, 1) } } } æ”¹é€  defineReactive function defineReactive (data, key, val) { let dep = new Dep() Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function() { dep.depend() return val }, set: function(newVal) { if (val === newVal) { return } val = newVal dep.notify() } }) } ä»€ä¹ˆæ˜¯ä¾èµ–å½“å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬è¦é€šçŸ¥ç”¨åˆ°æ•°æ®çš„åœ°æ–¹ï¼Œç”¨åˆ°æ•°æ®çš„åœ°æ–¹æœ‰å¾ˆå¤šï¼Œæœ‰å¯èƒ½æ˜¯æ¨¡æ¿ã€ä¹Ÿå¯èƒ½æ˜¯ç”¨æˆ·å†™çš„å‡½æ•°ç­‰ç­‰ï¼Œè¿™æ—¶éœ€è¦æŠ½è±¡å‡ºä¸€ä¸ªèƒ½é›†ä¸­å¤„ç†è¿™äº›æƒ…å†µçš„ç±»ã€‚ ç„¶åï¼Œæˆ‘ä»¬åœ¨ä¾èµ–æ”¶é›†é˜¶æ®µåªæ”¶é›†è¿™ä¸ªå°è£…å¥½çš„ç±»çš„å®ä¾‹è¿›æ¥å•Šï¼Œé€šçŸ¥ä¹Ÿåªé€šçŸ¥å®ƒä¸€ä¸ªï¼Œç„¶åï¼Œå®ƒåœ¨è´Ÿè´£é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ æ”¶é›†è°ï¼ŸWatcher! ä»€ä¹ˆæ˜¯ WatcherWatcher æ˜¯ä¸€ä¸ªä¸­ä»‹çš„è§’è‰²ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥å®ƒï¼Œå®ƒå†é€šçŸ¥å…¶å®ƒåœ°æ–¹ã€‚ vm.$watch('a.b.c', function(newVal, oldVal) { // do something }) è¿™æ®µä»£ç è¡¨ç¤ºå½“ data.a.b.c å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ç¬¬äºŒä¸ªå‚æ•°ä¸­çš„å‡½æ•°ã€‚ æŠŠè¿™ä¸ª watcher å®ä¾‹æ·»åŠ åˆ° data.a.b.c å±æ€§çš„ Dep ä¸­å»å°±è¡Œäº†ã€‚ç„¶åï¼Œå½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé€šçŸ¥ watcherã€‚æ¥ç€ï¼Œwatcher åœ¨æ‰§è¡Œå‚æ•°ä¸­çš„å›è°ƒå‡½æ•°ã€‚ export default class Watcher { // ... constructor ( vm: Component, // ç»„ä»¶å®ä¾‹ expOrFn: string | Function, // è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå‡½æ•°ï¼Œæˆ–è€…å­—ç¬¦ä¸²ï¼Œåªè¦èƒ½è§¦å‘å–å€¼æ“ä½œ cb: Function // è¢«è§‚å¯Ÿè€…å‘ç”Ÿå˜åŒ–åçš„å›è°ƒ ) { this.vm = vm // Watcheræœ‰ä¸€ä¸ª vm å±æ€§ï¼Œè¡¨æ˜å®ƒæ˜¯å±äºå“ªä¸ªç»„ä»¶çš„ this.cb = cb // å›è°ƒ this.getter = parsePath(expOrFn) this.value = this.get() } get () { // è§¦å‘å–å€¼æ“ä½œï¼Œè¿›è€Œè§¦å‘å±æ€§çš„getter Dep.target = this let value = this.getter.call(this.vm, this.vm) Dep.target = null return value } update () { // æ›´æ–° const oldValue = this.value this.value = this.get() this.cb.call(this.vm, this.value, oldValue) } } è¿™æ®µä»£ç å¯ä»¥å°†è‡ªå·±ä¸»åŠ¨æ·»åŠ åˆ° data.a.b.c çš„ Dep ä¸­ã€‚ åœ¨ get æ–¹æ³•ä¸­å…ˆæŠŠ Dep.target è®¾ç½®æˆäº† thisï¼Œä¹Ÿå°±æ˜¯å½“å‰ watcher å®ä¾‹ï¼Œç„¶åå†è¯»ä¸€ä¸‹ data.a.b.c çš„å€¼ï¼Œè¿™å°±ä¼šè§¦å‘ getterï¼Œè§¦å‘äº† getterï¼Œå°±ä¼šè§¦å‘æ”¶é›†ä¾èµ–çš„é€»è¾‘ã€‚ åªè¦ç°åœ¨ Dep.target èµ‹ä¸€ä¸ª thisï¼Œç„¶åå†è¯»ä¸€ä¸‹å€¼ï¼Œå»è§¦å‘ getterï¼Œå°±å¯ä»¥æŠŠ this ä¸»åŠ¨æ·»åŠ åˆ° keypath çš„ Dep ä¸­ã€‚ ä¾èµ–æ³¨å…¥åˆ° Dep ä¸­åï¼Œæ¯å½“ data.a.b.c çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè®©ä¾èµ–åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¾ªç¯è§¦å‘ update æ–¹æ³•ã€‚ ä¸ç®¡ç”¨æˆ·æ‰§è¡Œçš„æ˜¯ vm.$watch(â€˜a.b.câ€™, (value, oldValue) =&gt; {})ï¼Œè¿˜æ˜¯æ¨¡æ¿ä¸­çš„ dataï¼Œéƒ½æ˜¯é€šè¿‡ watcher æ¥é€šçŸ¥è‡ªå·±æ˜¯å¦éœ€è¦å˜åŒ–ã€‚ parsePathå‡½æ•°ï¼š const bailRE = /[^\\w.$]/ export function parsePath(path) { if (bailRE.test(path)) { return } const segments = path.split('.') return function(obj) { for (let i = 0; i &lt; segments.length; i++) { if (!obj) return obj = obj[segments[i]] } return obj } } é€’å½’ä¾¦æµ‹æ‰€æœ‰Keyå‰é¢çš„å®ä¾‹ä»£ç åªèƒ½ä¾¦æµ‹æ•°æ®ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠæ•°æ®ä¸­çš„æ‰€æœ‰å±æ€§éƒ½ä¾¦æµ‹åˆ°ï¼Œæ‰€ä»¥è¦å°è£…ä¸€ä¸ªObserverç±»ã€‚Observerçš„ä½œç”¨æ˜¯å°†ä¸€ä¸ªæ•°æ®å†…çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬å­å±æ€§ï¼‰éƒ½è½¬æ¢æˆ getter/setter çš„å½¢å¼ï¼Œç„¶åå»è¿½è¸ªå®ƒä»¬çš„å˜åŒ–ï¼š export class Observer { constructor (value) { this.value = value if (!Array.isArray(value)) { this.walk(value) } } walk (obj) { const keys = Object.keys(obj) for (let i = 0; i &lt; keys.length; i++) { defineReactive (obj, keys[i], obj[keys[i]]) } } } function defineReactive(data, key, val) { if (typeof val === 'object') { new Observer(val) } let dep = new Dep() Object.defineProperty(data, key, { enumerable: true, configurable: true, get: function() { dep.depend() return val }, set: function(newVal) { if (val === newVal) { return } val = newVal dep.notify() } }) } Observer ç±»ï¼Œç”¨äºå°†ä¸€ä¸ªæ­£å¸¸çš„ object è½¬æ¢æˆè¢«ä¾¦æµ‹çš„ objectã€‚ åˆ¤æ–­æ•°æ®çš„ç±»å‹ï¼Œåªæœ‰ Object ç±»å‹çš„æ•°æ®æ‰ä¼šè°ƒç”¨ walk å°†æ¯ä¸€ä¸ªå±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ æœ€åï¼Œåœ¨ defineReactive ä¸­æ–°å¢ new Observer(val) æ¥é€’å½’å­å±æ€§ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ data ä¸­çš„æ‰€æœ‰å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥ä¾¦æµ‹å˜åŒ–ã€‚ å½“ data ä¸­çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¸å±æ€§å¯¹åº”çš„ä¾èµ–å°±ä¼šæ¥æ”¶åˆ°é€šçŸ¥ã€‚ æ€»ç»“å˜åŒ–ä¾¦æµ‹å°±æ˜¯ä¾¦æµ‹æ•°æ®çš„å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦èƒ½ä¾¦æµ‹åˆ°å¹¶å‘å‡ºé€šçŸ¥ã€‚ Object å¯ä»¥é€šè¿‡ Object.defineProperty å°†å±æ€§è½¬æ¢æˆ getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ï¼Œè¯»å–æ•°æ®æ—¶ä¼šè§¦å‘ getterï¼Œä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ setterã€‚ æˆ‘ä»¬éœ€è¦åœ¨ getter ä¸­æ”¶é›†æœ‰å“ªäº›ä¾èµ–ä½¿ç”¨äº†æ•°æ®ã€‚å½“ setter è¢«è§¦å‘æ—¶ï¼Œå»é€šçŸ¥ getter ä¸­æ”¶é›†çš„ä¾èµ–æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ æ”¶é›†ä¾èµ–éœ€è¦ä¸ºä¾èµ–æ‰¾ä¸€ä¸ªå­˜å‚¨çš„åœ°æ–¹ï¼Œä¸ºæ­¤åˆ›å»ºäº† Depï¼Œå®ƒç”¨æ¥æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯ç­‰ã€‚ æ‰€è°“çš„ä¾èµ–ï¼Œå…¶å®å°±æ˜¯ Watcherã€‚æŠŠ Watcher æ”¶é›†åˆ° Dep ä¸­ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå¾ªç¯ä¾èµ–åˆ—è¡¨ï¼ŒæŠŠæ‰€æœ‰çš„ Watcher éƒ½é€šçŸ¥ä¸€éã€‚ Watcher çš„åŸç†æ˜¯å…ˆæŠŠè‡ªå·±è®¾ç½®åˆ°å…¨å±€å”¯ä¸€çš„æŒ‡å®šä½ç½® (Dep.target)ï¼Œç„¶åè¯»å–è¿™ä¸ªæ•°æ®ã€‚å› ä¸ºè¯»å–äº†è¿™ä¸ªæ•°æ®ï¼Œå› æ­¤ä¼šè§¦å‘è¿™ä¸ªæ•°æ®çš„ getter ã€‚æ¥ç€ï¼Œåœ¨ getter ä¸­å°±ä¼šä»å…¨å±€å”¯ä¸€çš„ä½ç½®è¯»å–æ­£åœ¨è¯»å–æ•°æ®çš„ Watcherï¼Œå¹¶æŠŠè¿™ä¸ª Watcher æ”¶é›†åˆ° Dep ä¸­å»ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼ŒWatcher å¯ä»¥ä¸»åŠ¨å»è®¢é˜…ä»»æ„ä¸€ä¸ªæ•°æ®çš„å˜åŒ–ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº† Observer ç±»ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ª object ä¸­çš„æ‰€æœ‰æ•°æ®ï¼ˆåŒ…æ‹¬å­æ•°æ®ï¼‰éƒ½è½¬æ¢æˆå“åº”å¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒä¼šä¾¦æµ‹ object ä¸­æ‰€æœ‰æ•°æ®çš„å˜åŒ–ã€‚ åœ¨ Vue ä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§æˆ–åˆ é™¤å±æ€§éƒ½æ— æ³•è¢«ä¾¦æµ‹åˆ°ã€‚ Object é€šè¿‡ Observer è½¬æ¢æˆäº† getter/setter çš„å½¢å¼æ¥è¿½è¸ªå˜åŒ–ã€‚ å½“å¤–ç•Œé€šè¿‡ Watcher è¯»å–æ•°æ®æ—¶ï¼Œä¼šè§¦å‘ getter ä»è€Œå°† Watcher æ·»åŠ åˆ° Dep ä¸­ã€‚ å½“æ•°æ®å‘ç”Ÿäº†å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ setterï¼Œä»è€Œå‘ Dep ä¸­çš„ä¾èµ–å‘é€é€šçŸ¥ã€‚ Watcher æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šåƒå¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šè§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°ç­‰ã€‚","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"Vue","slug":"Vue","permalink":"http://qiandream.cn/tags/Vue/"}]},{"title":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨","slug":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨","date":"2019-03-25T12:57:52.000Z","updated":"2019-03-25T12:24:33.483Z","comments":true,"path":"2019/03/25/js-shu-ju-jie-gou-yu-suan-fa-zhi-lian-biao/","link":"","permalink":"http://qiandream.cn/2019/03/25/js-shu-ju-jie-gou-yu-suan-fa-zhi-lian-biao/","excerpt":"å¯¼è¯­ ä½¿ç”¨åˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œåº•å±‚å‚¨å­˜æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚ç„¶è€Œï¼Œæ•°ç»„å¹¶ä¸æ€»æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚","text":"å¯¼è¯­ ä½¿ç”¨åˆ—è¡¨å¯¹æ•°æ®è¿›è¡Œæ’åºï¼Œåº•å±‚å‚¨å­˜æ•°æ®çš„æ•°æ®ç»“æ„æ˜¯æ•°ç»„ã€‚ç„¶è€Œï¼Œæ•°ç»„å¹¶ä¸æ€»æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚ æ•°ç»„çš„ç¼ºç‚¹æ•°ç»„ä¸æ€»æ˜¯ç»„ç»‡æ•°æ®çš„æœ€ä½³æ•°æ®ç»“æ„ï¼ŒåŸå› å¦‚ä¸‹ï¼šåœ¨å¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å½“æ•°ç»„å·²è¢«æ•°æ®å¡«æ»¡æ—¶ï¼Œå†éœ€è¦åŠ å…¥æ–°çš„å…ƒç´ å°±ä¼šéå¸¸å›°éš¾ã€‚ åœ¨æ•°ç»„ä¸­ï¼Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ ä¹Ÿå¾ˆéº»çƒ¦ï¼Œéœ€è¦å°†æ•°ç»„ä¸­çš„å…¶å®ƒå…ƒç´ å‘å‰æˆ–å‘åç§»åŠ¨ï¼Œä»¥åæ˜ æ•°ç»„åˆšåˆšè¿›è¡Œäº†æ·»åŠ æˆ–åˆ é™¤æ“ä½œã€‚ å¦‚æœä½ å‘ç°æ•°ç»„åœ¨å®é™…ä½¿ç”¨æ—¶å¾ˆæ…¢ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨é“¾è¡¨æ¥æ›¿ä»£å®ƒã€‚é™¤äº†å¯¹æ•°æ®çš„éšæœºè®¿é—®ï¼Œ","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://qiandream.cn/tags/JavaScript/"}]},{"title":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—","slug":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—","date":"2019-03-16T12:57:52.000Z","updated":"2019-03-23T09:33:40.176Z","comments":true,"path":"2019/03/16/js-shu-ju-jie-gou-yu-suan-fa-zhi-dui-lie/","link":"","permalink":"http://qiandream.cn/2019/03/16/js-shu-ju-jie-gou-yu-suan-fa-zhi-dui-lie/","excerpt":"å¯¼è¯­ é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—åªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºã€‚","text":"å¯¼è¯­ é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—åªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºã€‚ å¯¹é˜Ÿåˆ—çš„æ“ä½œé˜Ÿåˆ—çš„ä¸¤ç§ä¸»è¦æ“ä½œæ˜¯ï¼šå‘é˜Ÿåˆ—ä¸­æ’å…¥æ–°å…ƒç´ å’Œåˆ é™¤é˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚æ’å…¥æ“ä½œä¹Ÿå«åšå…¥é˜Ÿï¼Œåˆ é™¤æ“ä½œä¹Ÿå«åšå‡ºé˜Ÿã€‚å…¥é˜Ÿæ“ä½œåœ¨é˜Ÿå°¾æ’å…¥æ–°å…ƒç´ ï¼Œå‡ºé˜Ÿæ“ä½œåˆ é™¤é˜Ÿå¤´çš„å…ƒç´ ã€‚ é˜Ÿåˆ—çš„å¦ä¸€é¡¹é‡è¦æ“ä½œæ˜¯è¯»å–é˜Ÿå¤´çš„å…ƒç´ ï¼Œè¿™ä¸ªæ“ä½œå« peek() ã€‚è¯¥æ“ä½œè¿”å›é˜Ÿå¤´å…ƒç´ ï¼Œä½†ä¸æŠŠå®ƒä»é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚é™¤äº†è¯»å–é˜Ÿå¤´å…ƒç´ ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ length å±æ€§æ¥çŸ¥é“é˜Ÿåˆ—ä¸­å­˜å‚¨äº†å¤šå°‘å…ƒç´ ï¼Œç”¨ clear() æ–¹æ³•æ¥æ¸…ç©ºé˜Ÿåˆ—ä¸­çš„å…ƒç´ ã€‚ ç”¨æ•°ç»„å®ç°çš„é˜Ÿåˆ—ä½¿ç”¨æ•°ç»„æ¥å®ç°é˜Ÿåˆ—çœ‹èµ·æ¥é¡ºç†æˆç« ã€‚æ•°ç»„çš„ push() æ–¹æ³•å¯ä»¥åœ¨æ•°ç»„æœ«å°¾åŠ å…¥å…ƒç´ ï¼Œshift() æ–¹æ³•åˆ™å¯ä»¥åˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ push() æ–¹æ³•å°†å®ƒçš„å‚æ•°æ’å…¥æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå¼€æ”¾çš„ä½ç½®ï¼Œè¯¥ä½ç½®æ€»åœ¨æ•°ç»„çš„æœ«å°¾ï¼Œå³ä½¿æ˜¯ä¸ªç©ºæ•°ç»„ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ å‡†å¤‡å¼€å§‹å®ç° Queue ç±»ï¼Œå…ˆä»æ„é€ å‡½æ•°å¼€å§‹ï¼š function Queue () { this.dataStore = [] this.enqueue = enqueue this.dequeue = dequeue this.front = front this.back = back this.toString = toString this.empty = empty } enqueue() æ–¹æ³•å‘é˜Ÿå°¾æ·»åŠ ä¸€ä¸ªå…ƒç´  function enqueue (element) { this.dataStore.push(element) } dequeue() æ–¹æ³•åˆ é™¤é˜Ÿé¦–çš„å…ƒç´  function dequeue () { return this.dataStore.shift() } ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•è¯»å–é˜Ÿé¦–å’Œé˜Ÿå°¾çš„å…ƒç´  function front () { return this.dataStore[0] } function back () { return this.dataStore[this.dataStore.length -1] } toString() æ–¹æ³•æ˜¾ç¤ºé˜Ÿåˆ—å†…çš„æ‰€æœ‰å…ƒç´  function toString () { var retStr = '' for (var i = 0; i &lt; this.dataStore.length; i++) { retStr += this.dataStore[i] + ' ' } return retStr } empty() æ–¹æ³•åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º function empty () { return this.dataStore.length === 0 } ä½¿ç”¨é˜Ÿåˆ—ï¼šæ–¹å—èˆçš„èˆä¼´åˆ†é…é—®é¢˜ç”·ç”·å¥³å¥³æ¥åˆ°èˆæ± ï¼Œä»–ä»¬æŒ‰ç…§è‡ªå·±çš„æ€§åˆ«æ’æˆä¸¤é˜Ÿã€‚å½“èˆæ± ä¸­æœ‰åœ°æ–¹ç©ºå‡ºæ¥æ—¶ï¼Œé€‰ä¸¤ä¸ªé˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªäººç»„æˆèˆä¼´ã€‚ä»–ä»¬èº«åçš„äººå„è‡ªå‘å‰ç§»åŠ¨ä¸€ä¸ªä½ç½®ï¼Œå˜æˆæ–°çš„é˜Ÿé¦–ã€‚å½“ä¸€å¯¹èˆä¼´è¿ˆå…¥èˆæ± æ—¶ï¼Œä¸»æŒäººä¼šå¤§å£°å–Šå‡ºä»–ä»¬çš„åå­—ã€‚å½“ä¸€é˜Ÿèˆä¼´èµ°å‡ºèˆæ± ï¼Œä¸”ä¸¤æ’é˜Ÿä¼ä¸­æœ‰ä»»æ„ä¸€é˜Ÿæ²¡äººæ—¶ï¼Œä¸»æŒäººä¹Ÿä¼šæŠŠè¿™ä¸ªæƒ…å†µå‘Šè¯‰å¤§å®¶ã€‚ ä¸ºäº†æ¨¡æ‹Ÿè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æŠŠè·³æ–¹å—èˆçš„ç”·ç”·å¥³å¥³çš„å§“åå‚¨å­˜åœ¨ dancers å˜é‡ä¸­ï¼š var dancers = 'F Allison \\n M Frank \\n M Mason \\n M Clayton \\n F Cheryl \\n M Raymond \\n F Jennifer \\n M Bryan \\n M David \\n M Danny \\n F Aurora' æ¯ä¸ªèˆè€…çš„ä¿¡æ¯éƒ½è¢«å­˜å‚¨åœ¨ä¸€ä¸ª Dancer å¯¹è±¡ä¸­ï¼š function Dancer (name, sex) { this.name = name this.sex = sex } ä¸‹é¢æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œå°†èˆè€…ä¿¡æ¯è¯»åˆ°ç¨‹åºä¸­ï¼š function getDancers (maleDancers, femaleDancers) { var names = dancers.split('\\n') for (var i = 0; i &lt; names.length; i++) { names[i] = names[i].trim() } for (var i = 0; i &lt; names.length; i++) { var dancer = names[i].split(' ') var sex = dancer[0] var name = dancer[1] if (sex === 'F') { femaleDancers.enqueue(new Dancer(name, sex)) } else { maleDancers.enqueue(new Dancer(name, sex)) } } } èˆè€…çš„å§“åè¢«ä»å˜é‡ dancers ä¸­è¯»å…¥æ•°ç»„ã€‚ç„¶å trim() å‡½æ•°é™¤å»äº†æ¯è¡Œå­—ç¬¦ä¸²çš„ç©ºæ ¼ã€‚ç¬¬äºŒä¸ªå¾ªç¯å°†æ¯è¡Œå­—ç¬¦ä¸²æŒ‰å§“åå’Œæ€§åˆ«åˆ†æˆä¸¤éƒ¨åˆ†å­˜å…¥ä¸€ä¸ªæ•°ç»„ã€‚ç„¶åæ ¹æ®æ€§åˆ«ï¼Œå°†èˆè€…åŠ å…¥ä¸åŒçš„é˜Ÿåˆ—ã€‚ ä¸‹ä¸€ä¸ªå‡½æ•°å°†ç”·æ€§å’Œå¥³æ€§ç»„æˆèˆä¼´ï¼Œå¹¶ä¸”å®£å¸ƒé…å¯¹ç»“æœã€‚ function dance (females, males) { console.log('the dance partners are: ') let person while (!females.empty() &amp;&amp; !males.empty()) { person = females.dequeue() console.log('female dancer is ', person) person = males.dequeue() console.log('and male dancer is ', person) } } ä½¿ç”¨é˜Ÿåˆ—å¯¹æ•°æ®è¿›è¡Œæ’åºé˜Ÿåˆ—ä¸ä»…ç”¨äºæ‰§è¡Œç°å®ç”Ÿæ´»ä¸­ä¸æ’é˜Ÿæœ‰å…³çš„æ“ä½œï¼Œè¿˜å¯ä»¥ç”¨äºå¯¹æ•°æ®è¿›è¡Œæ’åºã€‚å¯¹äº0 ~99 çš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºåŸºæ•°æ’åºå¯¹æ•°æ®æ‰«æä¸¤æ¬¡ã€‚ç¬¬ä¸€æ¬¡æŒ‰ä¸ªä½ä¸Šçš„æ•°å­—è¿›è¡Œæ’åºï¼Œç¬¬äºŒæ¬¡æŒ‰åä½ä¸Šçš„æ•°å­—è¿›è¡Œæ’åºã€‚æ¯ä¸ªæ•°å­—æ ¹æ®å¯¹åº”ä½ä¸Šçš„æ•°å€¼è¢«åˆ†åœ¨ä¸åŒçš„ç›’å­ä¸Šã€‚å‡è®¾æœ‰ä»¥ä¸‹æ•°å­—ï¼š 91, 46, 85, 15, 92, 35, 31, 22 ç»è¿‡åŸºæ•°æ’åºç¬¬ä¸€æ¬¡æ‰«æä¹‹åï¼Œæ•°å­—è¢«åˆ†é…åˆ°å¦‚ä¸‹çš„ç›’å­é‡Œï¼š Bin 0: Bin 1: 91, 31 Bin 2: 92, 22 Bin 3: Bin 4: Bin 5: 85, 15, 35 Bin 6: 46 Bin 7: Bin 8: Bin 9: æ ¹æ®ç›’å­çš„é¡ºåºï¼Œç¬¬ä¸€æ¬¡æ’åºçš„ç»“æœå¦‚ä¸‹ï¼š 91, 31, 92, 22, 85, 15, 35, 46 ç„¶åæ ¹æ®åä½ä¸Šçš„æ•°å€¼å†æ¬¡å°†ä¸Šè¿°æ’åºçš„ç»“æœåˆ†é…åˆ°ä¸åŒçš„ç›’å­é‡Œï¼š Bin 0: Bin 1: 15 Bin 2: 22 Bin 3: 31, 35 Bin 4: 46 Bin 5: Bin 6: Bin 7: Bin 8: 85 Bin 9: 91, 92 æœ€åï¼Œå°†ç›’å­ä¸­çš„æ•°å­—å–å‡ºï¼Œç»„æˆä¸€ä¸ªæ–°çš„åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å³ä¸ºæ’å¥½åºçš„æ•°å­—ï¼š 15ï¼Œ 22ï¼Œ 31ï¼Œ 35ï¼Œ 46ï¼Œ 85ï¼Œ 91ï¼Œ 92 ä½¿ç”¨é˜Ÿåˆ—ä»£è¡¨ç›’å­ï¼Œå¯ä»¥å®ç°è¿™ä¸ªç®—æ³•ã€‚æˆ‘ä»¬éœ€è¦ä¹ä¸ªé˜Ÿåˆ—ï¼Œæ¯ä¸ªå¯¹åº”ä¸€ä¸ªæ•°å­—ï¼Œå°†æ‰€æœ‰é˜Ÿåˆ—ä¿å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½¿ç”¨å–ä½™å’Œé™¤æ³•æ“ä½œå†³å®šä¸ªä½å’Œåä½ã€‚ç®—æ³•çš„å‰©ä½™éƒ¨åˆ†å°†æ•°å­—åŠ å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼Œæ ¹æ®ä¸ªä½æ•°å€¼å¯¹å…¶é‡æ–°æ’åºï¼Œç„¶åå†æ ¹æ®åä½ä¸Šçš„æ•°å€¼è¿›è¡Œæ’åºï¼Œç»“æœå³ä¸ºæ’å¥½åºçš„æ•°å­—ã€‚ function Queue () { this.dataStore = [] this.enqueue = enqueue this.dequeue = dequeue this.front = front this.back = back this.toString = toString this.count = count this.empty = empty } function enqueue (element) { this.dataStore.push(element) } function dequeue () { return this.dataStore.shift() } function front () { return this.dataStore[0] } function back () { return this.dataStore[this.dataStore.length -1] } function toString () { var retStr = '' for (var i = 0; i &lt; this.dataStore.length; i++) { retStr += this.dataStore[i] + ' ' } return retStr } function count () { return this.dataStore.length } function empty () { return this.dataStore.length === 0 } //åŸºæ•°æ’åº var queues = [] //å®šä¹‰é˜Ÿåˆ—æ•°ç»„ var nums = [] //å®šä¹‰æ•°å­—æ•°ç»„ //é€‰åä¸ª0~99çš„éšæœºæ•°è¿›è¡Œæ’åº for (var i = 0; i &lt; 10; i ++){ queues[i] = new Queue() nums[i] = Math.floor( Math.random() * 101 ) } //æ’åºä¹‹å‰ console.log( 'before radix sort: ' + nums ) //åŸºæ•°æ’åº distribution(nums, queues , 10 , 1) collect(queues, nums) distribution(nums, queues , 10 , 10) collect(queues, nums) //æ’åºä¹‹å console.info('after radix sort: ' + nums) //æ ¹æ®ç›¸åº”çš„ï¼ˆä¸ªä½å’Œåä½ï¼‰æ•°å€¼ï¼Œå°†æ•°å­—åˆ†é…åˆ°ç›¸åº”é˜Ÿåˆ— function distribution (nums, queues, n, digit) { //digitè¡¨ç¤ºä¸ªä½æˆ–è€…åä½çš„å€¼ for(var i = 0; i &lt; n; i++){ if(digit == 1){ queues[nums[i] % 10].enqueue(nums[i]) }else{ queues[Math.floor(nums[i] / 10)].enqueue(nums[i]) } } console.log(queues.toString()) } //ä»é˜Ÿåˆ—ä¸­æ”¶é›†æ•°å­— function collect (queues, nums) { var i = 0 for (var digit = 0; digit &lt; 10 ; digit++ ){ while (!queues[digit].empty()){ nums[i++] = queues[digit].dequeue() } } } ä¼˜å…ˆé˜Ÿåˆ—ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä»é˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ ï¼Œä¸€å®šæ˜¯æœ€æ–°å…¥é˜Ÿçš„å…ƒç´ ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›ä½¿ç”¨é˜Ÿåˆ—çš„åº”ç”¨ï¼Œåœ¨åˆ é™¤å…ƒç´ æ—¶ä¸å¿…éµå¾ªå…ˆè¿›å…ˆå‡ºçš„çº¦å®šã€‚è¿™ç§åº”ç”¨ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå«åšä¼˜å…ˆé˜Ÿåˆ—çš„æ•°æ®ç»“æ„æ¥è¿›è¡Œæ¨¡æ‹Ÿã€‚ ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­åˆ é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦è€ƒè™‘ä¼˜å…ˆæƒçš„é™åˆ¶ã€‚ å…ˆæ¥å®šä¹‰å­˜å‚¨é˜Ÿåˆ—å…ƒç´ çš„å¯¹è±¡ï¼Œç„¶ååœ¨æ„å»ºæˆ‘ä»¬çš„ä¼˜å…ˆé˜Ÿåˆ—ç³»ç»Ÿï¼š function Patient (name, code) { this.name = name this.code = code } å˜é‡ code æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¼˜å…ˆçº§ã€‚ ç°åœ¨éœ€è¦é‡æ–°å®šä¹‰ dequeue() æ–¹æ³•ï¼Œä½¿å…¶åˆ é™¤é˜Ÿåˆ—ä¸­æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚æˆ‘ä»¬è§„å®šï¼Œä¼˜å…ˆç çš„å€¼æœ€å°ï¼Œä»£è¡¨ä¼˜å…ˆçº§æœ€é«˜ã€‚æ–°çš„ dequeue() æ–¹æ³•éå†é˜Ÿåˆ—çš„åº•å±‚å­˜å‚¨æ•°ç»„ï¼Œä»ä¸­æ‰¾å‡ºä¼˜å…ˆç å€¼æœ€å°çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨æ•°ç»„çš„ splice() æ–¹æ³•åˆ é™¤ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚æ–°çš„ dequeue() æ–¹æ³•å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š function dequeue () { var entry = 0 for (var i = 1; i &lt; this.dataStore.length; ++i) { if (this.dataStore[i].code &lt; this.dataStore[entry].code) { entry = i } } return this.dataStore.splice(entry, 1) } ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°ï¼š function Queue () { this.dataStore = [] this.enqueue = enqueue this.dequeue = dequeue this.front = front this.back = back this.toString = toString this.count = count this.empty = empty } function enqueue (element) { this.dataStore.push(element) } function dequeue () { var entry = 0 for (var i = 1; i &lt; this.dataStore.length; ++i) { if (this.dataStore[i].code &lt; this.dataStore[entry].code) { entry = i } } return this.dataStore.splice(entry, 1) } function front () { return this.dataStore[0] } function back () { return this.dataStore[this.dataStore.length -1] } function toString () { var retStr = '' for (var i = 0; i &lt; this.dataStore.length; i++) { retStr += this.dataStore[i].name + ' code:' + this.dataStore[i].code + ' ' } return retStr } function count () { return this.dataStore.length } function empty () { return this.dataStore.length === 0 } function Patient (name, code) { this.name = name this.code = code } var p = new Patient('smith', 5) var ed = new Queue() ed.enqueue(p) p = new Patient('Jones', 4) ed.enqueue(p) p = new Patient('Wang', 6) ed.enqueue(p) p = new Patient('Qian', 1) ed.enqueue(p) p = new Patient('Brown', 1) ed.enqueue(p) var seen = ed.dequeue() console.log('Patient being treated: ' + seen[0].name) console.log('Patients watting to be seen:') console.log(ed.toString()) seen = ed.dequeue() console.log('Patient being treated: ' + seen[0].name) console.log('Patients watting to be seen:') console.log(ed.toString()) seen = ed.dequeue() console.log('Patient being treated: ' + seen[0].name) console.log('Patients watting to be seen:') console.log(ed.toString())","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://qiandream.cn/tags/JavaScript/"}]},{"title":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ","slug":"JS-æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ","date":"2019-03-15T12:57:52.000Z","updated":"2019-03-18T12:55:26.303Z","comments":true,"path":"2019/03/15/js-shu-ju-jie-gou-yu-suan-fa-zhi-zhan/","link":"","permalink":"http://qiandream.cn/2019/03/15/js-shu-ju-jie-gou-yu-suan-fa-zhi-zhan/","excerpt":"å¯¼è¯­ æ ˆæ˜¯å’Œåˆ—è¡¨ç±»ä¼¼çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥è§£å†³è®¡ç®—æœºä¸–ç•Œé‡Œçš„å¾ˆå¤šé—®é¢˜ã€‚","text":"å¯¼è¯­ æ ˆæ˜¯å’Œåˆ—è¡¨ç±»ä¼¼çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨æ¥è§£å†³è®¡ç®—æœºä¸–ç•Œé‡Œçš„å¾ˆå¤šé—®é¢˜ã€‚ å¯¹æ ˆçš„æ“ä½œæ ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„åˆ—è¡¨ï¼Œæ ˆå†…çš„å…ƒç´ åªèƒ½é€šè¿‡åˆ—è¡¨çš„ä¸€ç«¯è®¿é—®ï¼Œè¿™ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶ã€‚æ ˆè¢«ç§°ä¸ºä¸€ç§åå…¥å…ˆå‡º (LIFOï¼Œlast-in-first-out) çš„æ•°æ®ç»“æ„ã€‚ ç”±äºæ ˆå…·æœ‰åå…¥å…ˆå‡ºçš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥ä»»ä½•ä¸åœ¨æ ˆé¡¶çš„å…ƒç´ éƒ½æ— æ³•è®¿é—®ã€‚ä¸ºäº†å¾—åˆ°æ ˆåº•çš„å…ƒç´ ï¼Œå¿…é¡»å…ˆæ‹¿æ‰ä¸Šé¢çš„å…ƒç´ ã€‚ å¯¹æ ˆçš„ä¸¤ç§ä¸»è¦æ“ä½œæ˜¯å°†ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆå’Œå°†ä¸€ä¸ªå…ƒç´ å¼¹å‡ºæ ˆã€‚å…¥æ ˆä½¿ç”¨ push() æ–¹æ³•ï¼Œå‡ºæ ˆä½¿ç”¨ pop() æ–¹æ³•ã€‚ å¦ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œå°±æ˜¯é¢„è§ˆæ ˆé¡¶çš„å…ƒç´ ã€‚ pop() æ–¹æ³•è™½ç„¶å¯ä»¥è®¿é—®åˆ°æ ˆé¡¶çš„å…ƒç´ ï¼Œä½†æ˜¯è¯¥æ–¹æ³•ä¹Ÿå°†æ ˆé¡¶å…ƒç´ æ°¸ä¹…æ€§åœ°åˆ é™¤äº†ã€‚peek() æ–¹æ³•åˆ™åªè¿”å›æ ˆé¡¶å…ƒç´ ï¼Œè€Œä¸åˆ é™¤å®ƒã€‚ ä¸ºäº†è®°å½•æ ˆé¡¶çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†å“ªé‡Œå¯ä»¥åŠ å…¥æ–°å…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡ top ã€‚å½“å‘æ ˆå†…å‹å…¥å…ƒç´ æ—¶ï¼Œè¯¥å˜é‡å¢å¤§ã€‚å½“ä»æ ˆå†…å¼¹å‡ºå…ƒç´ æ—¶ï¼Œè¯¥å˜é‡å‡å°ã€‚ push()ã€pop()ã€peek() æ˜¯æ ˆçš„3ä¸ªä¸»è¦æ–¹æ³•ï¼Œä½†æ˜¯æ ˆè¿˜æœ‰å…¶å®ƒæ–¹æ³•å’Œå±æ€§ã€‚clear() æ¸…é™¤æ ˆå†…æ‰€æœ‰å…ƒç´ ï¼Œlength å±æ€§è®°å½•æ ˆå†…å…ƒç´ çš„ä¸ªæ•°ï¼Œempty å±æ€§ï¼Œç”¨ä»¥è¡¨ç¤ºæ ˆå†…æ˜¯å¦æœ‰å…ƒç´ ã€‚ æ ˆçš„å®ç°å®ç°ä¸€ä¸ªæ ˆï¼Œé¦–å…ˆæ˜¯è¦å†³å®šå­˜å‚¨æ•°æ®çš„åº•å±‚æ•°æ®ç»“æ„ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é€‰ç”¨æ•°ç»„ã€‚ æˆ‘ä»¬ä»å®ç°ä»¥å®šä¹‰ Stack ç±»çš„æ„é€ å‡½æ•°å¼€å§‹ï¼š function Stack () { this.dataStore = [] this.top = 0 this.push = push this.pop = pop this.peek = peek this.clear = clear this.length = length } æˆ‘ä»¬ç”¨æ•°ç»„ dataStore æ¥ä¿å­˜æ ˆå†…çš„å…ƒç´ ï¼Œæ„é€ å‡½æ•°å°†å…¶åˆå§‹åŒ–ä¸ºä¸€ä¸ªç©ºæ•°ç»„ã€‚å˜é‡ top è®°å½•æ ˆé¡¶ä½ç½®ï¼Œè¢«æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸º 0 ï¼Œè¡¨ç¤ºæ ˆé¡¶å¯¹åº”æ•°ç»„çš„èµ·å§‹ä½ç½® 0 ã€‚å¦‚æœæœ‰å…ƒç´ è¢«å‹å…¥æ ˆå†…ï¼Œè¯¥å˜é‡çš„å€¼å°†éšä¹‹å˜åŒ–ã€‚ push() æ–¹æ³• â€“ å½“å‘æ ˆå†…å‹å…¥ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œéœ€è¦å°†å…¶ä¿å­˜åœ¨æ•°ç»„ä¸­å˜é‡ top æ‰€å¯¹åº”çš„ä½ç½®ï¼Œç„¶åå°† top å€¼åŠ  1ï¼Œè®©å…¶æŒ‡å‘æ•°ç»„ä¸­ä¸‹ä¸€ä¸ªç©ºä½å€¼ã€‚ function push (element) { this.dataStore[this.top++] = element } è¿™é‡Œéœ€è¦æ³¨æ„ ++ æ“ä½œç¬¦çš„ä½ç½®ï¼Œå®ƒæ”¾åœ¨ this.top çš„åé¢ï¼Œè¿™æ ·æ–°å…¥æ ˆçš„å…ƒç´ å°±ä¼šè¢«æ”¾åœ¨ top çš„å½“å‰å€¼æŒ‡å‘çš„ä½ç½®ï¼Œç„¶åå†å°† top çš„å€¼åŠ  1 ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®ã€‚ pop() æ–¹æ³• â€“ è¿”å›æ ˆé¡¶å…ƒç´ ï¼ŒåŒæ—¶å°†å˜é‡ top çš„å€¼å‡ 1 ã€‚ function pop () { return this.dataStore[--this.top] } peek() æ–¹æ³• â€“ è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œå³å°†å˜é‡ top çš„å€¼å‡ 1 ã€‚ function peek () { return this.dataStore[this.top - 1] } å¦‚æœå¯¹ä¸€ä¸ªç©ºæ ˆè°ƒç”¨ peek() æ–¹æ³•ï¼Œç»“æœä¸º undefined ã€‚ length() æ–¹æ³• â€“ é€šè¿‡è¿”å›å˜é‡ top å€¼å¾—æ–¹å¼æ¥è·å–æ ˆå†…å­˜å‚¨äº†å¤šå°‘å…ƒç´ ã€‚ clear() â€“ å°†å˜é‡ top çš„å€¼è®¾ä¸º 0 ï¼Œè½»æ¾æ¸…ç©ºä¸€ä¸ªæ ˆã€‚ function clear () { this.top = 0 } ä½¿ç”¨ Stack ç±»åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›é—®é¢˜ç‰¹åˆ«é€‚åˆç”¨æ ˆæ¥è§£å†³ï¼š æ•°åˆ¶é—´çš„ç›¸äº’è½¬æ¢å¯ä»¥åˆ©ç”¨æ ˆå®ç°ä¸€ä¸ªæ•°å­—ä»ä¸€ç§æ•°åˆ¶è½¬æ¢ä¸ºå¦ä¸€ç§æ•°åˆ¶ã€‚å‡è®¾æƒ³å°†æ•°å­— n è½¬æ¢ä¸ºä»¥ b ä¸ºåŸºæ•°çš„æ•°å­—ï¼Œå®ç°è½¬æ¢çš„ç®—æ³•å¦‚ä¸‹(æ³¨ï¼šæ­¤ç®—æ³•åªé’ˆå¯¹åŸºæ•°ä¸º2â€”9çš„æƒ…å†µ)ï¼š (1) æœ€é«˜ä½ä¸º n % bï¼Œå°†æ­¤ä½å‹å…¥æ ˆã€‚(2) ä½¿ç”¨ n / b ä»£æ›¿ n ã€‚(3) é‡å¤æ­¥éª¤ 1 å’Œ 2 ï¼Œç›´åˆ° n ç­‰äº 0 ï¼Œä¸”æ²¡æœ‰ä½™æ•°ã€‚(4) æŒç»­å°†æ ˆå†…å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ°æ ˆä¸ºç©ºï¼Œä¾æ¬¡å°†è¿™äº›å…ƒç´ æ’åˆ—ï¼Œå°±å¾—åˆ°è½¬æ¢åæ•°å­—çš„å­—ç¬¦ä¸²å½¢å¼ã€‚ function mulBase (num, base) { var s = new Stack() do { s.push(num % base) num = Math.floor(num /= base) } while (num > 0) var converted = '' while (s.length() > 0) { converted += s.pop() } return converted } å›æ–‡å›æ–‡æ˜¯æŒ‡è¿™æ ·ä¸€ç§ç°è±¡ï¼šä¸€ä¸ªå•è¯ã€çŸ­è¯­æˆ–æ•°å­—ï¼Œä»å‰å¾€åå†™å’Œä»åå¾€å‰å†™éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚ï¼šå•è¯ â€˜dadâ€™ , â€˜racecarâ€™ å°±æ˜¯å›æ–‡ã€‚ ä½¿ç”¨æ ˆï¼Œå¯ä»¥è½»æ¾åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚æˆ‘ä»¬å°†æ‹¿åˆ°çš„å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ä»å·¦åˆ°å³çš„é¡ºåºå‹å…¥æ ˆã€‚å½“å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦éƒ½å…¥æ ˆåï¼Œæ ˆå†…å°±ä¿å­˜äº†ä¸€ä¸ªåè½¬åçš„å­—ç¬¦ä¸²ï¼Œæœ€åçš„å­—ç¬¦åœ¨æ ˆé¡¶ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦åœ¨æ ˆåº•ã€‚ å­—ç¬¦ä¸²å®Œæ•´å‹å…¥æ ˆå†…åï¼Œé€šè¿‡æŒç»­å¼¹å‡ºæ ˆä¸­çš„æ¯ä¸ªå­—æ¯å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åˆšå¥½ä¸åŸæ¥çš„å­—ç¬¦ä¸²é¡ºåºç›¸åã€‚æˆ‘ä»¬åªéœ€æ¯”è¾ƒè¿™ä¸¤ä¸ªå­—ç¬¦ä¸²å³å¯ï¼Œå¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œå°±æ˜¯ä¸€ä¸ªå›æ–‡ã€‚ function isPalindrome (word) { var s = new Stack() for (let i of word) { s.push(i) } var rWord = '' while (s.length() > 0) { rWord += s.pop() } return rWord == word } é€’å½’æ¼”ç¤ºä¸ºäº†æ¼”ç¤ºå¦‚ä½•ç”¨æ ˆå®ç°é€’å½’ï¼Œè€ƒè™‘ä¸€ä¸‹æ±‚é˜¶ä¹˜å‡½æ•°çš„é€’å½’å®šä¹‰ï¼Œé¦–å…ˆçœ‹çœ‹ 5 çš„é˜¶ä¹˜æ˜¯æ€ä¹ˆå®šä¹‰çš„ï¼š function factorial (n) { if (n === 0) { return 1 } return n * factorial(n - 1) } ä½¿ç”¨æ ˆæ¨¡æ‹Ÿé€’å½’çš„è¿‡ç¨‹ function fact (n) { var s = new Stack() while (n > 1) { s.push(n--) } var product = 1 console.log(s.length()) while (s.length() > 0) { product *= s.pop() } return product }","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://qiandream.cn/tags/JavaScript/"}]},{"title":"Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²","slug":"Node-é˜¿é‡Œäº‘ECSéƒ¨ç½²","date":"2018-11-27T04:19:00.000Z","updated":"2019-06-04T02:56:38.236Z","comments":true,"path":"2018/11/27/node-a-li-yun-ecs-bu-shu/","link":"","permalink":"http://qiandream.cn/2018/11/27/node-a-li-yun-ecs-bu-shu/","excerpt":"å¯¼è¯­ åŒ11æŠ¢è´­äº†ä¸€å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¶å·¥ä½œä¸å¿™ï¼Œæäº†ä¸€ä¸ªç®€å•çš„nodeé¡¹ç›®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†nodeé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECSï¼Ÿ","text":"å¯¼è¯­ åŒ11æŠ¢è´­äº†ä¸€å°é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œè¶å·¥ä½œä¸å¿™ï¼Œæäº†ä¸€ä¸ªç®€å•çš„nodeé¡¹ç›®ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å°†nodeé¡¹ç›®éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ECSï¼Ÿ æ­¤æ•™ç¨‹ä»…ä¾›æ–°æ‰‹å€Ÿé‰´ï¼Œå¤šå°‘æœ‰äº›ç¼ºé™·ï¼Œæœ‰é—®é¢˜è¿˜æœ›å„ä½å¤§ä½¬æŒ‡æ­£ã€‚ å‡†å¤‡å·¥ä½œ ä¸€ä¸ªåŸŸå é˜¿é‡Œäº‘ECS(å®ä¾‹é•œåƒï¼šCentOS7.4) å¦‚æœä½¿ç”¨Windowsï¼Œæ¨èxshellã€‚å¦‚æœæ˜¯Macï¼Œæ¨èiTerm2 (æ³¨ï¼šå› æœ¬äººä½¿ç”¨Macï¼Œä»¥ä¸‹å‡å·²Macä¸ºä¸») ç»ˆç«¯è¿æ¥æœåŠ¡å™¨ æ‰“å¼€iTerm2ï¼Œè¾“å…¥è¿æ¥å‘½ä»¤ssh username@ipå…¬ç½‘åœ°å€ï¼Œå›è½¦ï¼Œè¾“å…¥ä½ åœ¨è´­ä¹°æœåŠ¡å™¨æ—¶è®¾ç½®çš„å¯†ç ã€‚ å¯†ç è¾“å…¥æ­£ç¡®ï¼Œè¿›å…¥æœåŠ¡å™¨ã€‚ cd / è¿›å…¥æ ¹ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½• mkdir softï¼Œç”¨æ¥æ”¾æˆ‘ä»¬çš„å®‰è£…åŒ…ã€‚ å®‰è£…Nodeä¸‹è½½nodeåŒ…ã€‚ wget https://nodejs.org/dist/v8.9.4/node-v8.9.4.tar.gz ä¸‹è½½å®Œæˆåï¼Œè¿›è¡Œå‹ç¼©åŒ…è§£å‹ã€‚ tar -zxvf v8.9.4.tar.gz è¿›å…¥è§£å‹å¥½çš„ç›®å½•å¹¶æ‰§è¡Œconfigé…ç½®å‘½ä»¤ã€‚ cd node-v8.9.4 &amp;&amp; ./configure æ‰§è¡Œç¼–è¯‘åŠå®‰è£…å‘½ä»¤ã€‚ make &amp;&amp; make install ç»è¿‡æ¼«é•¿çš„ç­‰å¾…ä¹‹åï¼Œä¸€ä¸ªnodeç¯å¢ƒå°±å®‰è£…å¥½äº†ã€‚å¯ä»¥é€šè¿‡node -v æˆ–è€… npm -væ¥æ£€æŸ¥å½“å‰node/npmæ˜¯å¦å®‰è£…æˆåŠŸã€‚ å¦‚æœä½ éœ€è¦å‡çº§nodeå’Œnpmç‰ˆæœ¬ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ã€‚ npm i -g n n stable å®‰è£…nrmå’Œpm2nrmæ˜¯ä¸€ä¸ªç®¡ç†npmæºçš„æ’ä»¶ï¼Œæ–¹ä¾¿åˆ‡æ¢å›½å†…å¤–ä»¥åŠç§äººnpmåº“ã€‚ pm2æ˜¯nodeæœåŠ¡å™¨çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œæ–¹ä¾¿ç®¡ç†å½“å‰æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰æœåŠ¡ã€‚ è¿™é‡Œè¯´ä¸€ä¸‹cnpmï¼Œå¦‚æœå®‰è£…ä¾èµ–åŒ…å¾ˆæ…¢æˆ–è€…æ ¹æœ¬æ²¡è¿›åº¦ï¼Œè¾“å…¥å‘½ä»¤ npm install -g cnpm --registry=https://registry.npm.taobao.org ç„¶åä½¿ç”¨cnpmä»£æ›¿npmå®‰è£…ã€‚ å›åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„softç›®å½•ã€‚ nrmå®‰è£…nrmã€‚ npm install -g nrm å¸¸ç”¨å‘½ä»¤ï¼š nrm add name address æ·»åŠ æ–°çš„æº nrm use name åˆ‡æ¢åˆ°æº nrm ls æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„æº pm2å®‰è£…pm2ã€‚ npm install -g pm2 å¸¸ç”¨å‘½ä»¤ï¼š pm2 list æŸ¥çœ‹pm2å®ˆæŠ¤æœåŠ¡ pm2 start index.js å¯åŠ¨ä¸€ä¸ªpm2å®ˆæŠ¤è¿›ç¨‹å‘½ä»¤ pm2 restart id/name é‡å¯ä¸€ä¸ªpm2å®ˆæŠ¤è¿›ç¨‹å‘½ä»¤ pm2 delete id/name åˆ é™¤ä¸€ä¸ªæ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹ pm2 delete all åˆ é™¤æ‰€æœ‰æ­£åœ¨ä½¿ç”¨çš„è¿›ç¨‹ pm2 monit æŸ¥çœ‹pm2çš„æ¶ˆè€— å®‰è£…mysqlå¸è½½å·²æœ‰çš„mysqlã€‚ rpm -qa|grep -i mysql yum remove &#39;mysql&#39; ä¸‹è½½mysqlæºã€‚ // 5.7.24 wget http://repo.mysql.com//mysql57-community-release-el7-7.noarch.rpm å®‰è£…ä¸‹è½½çš„æºã€‚ rpm -ivh mysql57-community-release-el7-7.noarch.rpm ä¸‹è½½å®‰è£…mysqlã€‚ yum install mysql-server yum install mysql-devel yum install mysql å¯åŠ¨mysqlã€‚ service mysqld start å¸¸ç”¨å‘½ä»¤ï¼š service mysqld status æŸ¥çœ‹mysqlå½“å‰çš„çŠ¶æ€ service mysqld stop åœæ­¢mysql service mysqld restart é‡å¯mysql service mysqld start å¯åŠ¨mysql å¦‚æœé‡åˆ°é”™è¯¯ï¼šERROR 2002 (HY000): Canâ€™t connect to local MySQL server through socket /var/lib/mysql/mysql.sockâ€™ï¼Œè¯·åœ¨tmpä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ï¼š ln -s /tmp/mysql.sock /var/lib/mysql æ‰“å¼€my.cnfå¹¶ä¿®æ”¹ã€‚ vi /etc/my.cnf é‡å¯æ•°æ®åº“ã€‚ service mysqld restart ç™»å½•(é»˜è®¤rootæ˜¯æ²¡æœ‰å¯†ç çš„)ã€‚ mysql -u root è¿™æ—¶å‡ºç°ERROR 1045 (28000): Access denied for user â€˜rootâ€™@â€™localhostâ€™ (using password: NO)ï¼Œç™»å½•rootå¸å·éœ€è¦å¯†ç ï¼Œç°åœ¨æˆ‘ä»¬æ²¡æœ‰è®¾ç½®å¯†ç ï¼Œå“ªæ¥çš„å¯†ç ã€‚ äºæ˜¯æˆ‘ä»¬å¼€å§‹å¿˜è®°å¯†ç çš„æ“ä½œ ç¬¬ä¸€æ­¥ï¼Œåœ¨/etc/my.cnfæ–‡ä»¶ä¸­æ·»åŠ skip-grant-tablesç¬¬äºŒæ­¥ï¼Œé‡å¯mysqlï¼Œservice mysqld restartç¬¬ä¸‰æ­¥ï¼Œç™»å½•mysqlï¼Œmysql -u rootç¬¬å››æ­¥ï¼Œä¿®æ”¹å¯†ç ï¼š mysql&gt;use mysql; mysql&gt;update mysql.user set authentication_string=password(&#39;your password&#39;) where user=&#39;root&#39;; mysql&gt;flush privileges; mysql&gt;exit; ç¬¬äº”æ­¥ï¼Œæ¢å¤/etc/my.cnfï¼Œå°†skip-grant-tablesåˆ é™¤æˆ–è€…æ³¨é‡Šæ‰ç¬¬å…­æ­¥ï¼Œé‡å¯mysqlï¼Œservice mysqld restart åˆ†é…ç”¨æˆ· hostæŒ‡å®šè¯¥ç”¨æˆ·åœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»é™†ï¼Œæ­¤å¤„çš„â€localhostâ€ï¼Œæ˜¯æŒ‡è¯¥ç”¨æˆ·åªèƒ½åœ¨æœ¬åœ°ç™»å½•ï¼Œä¸èƒ½åœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šè¿œç¨‹ç™»å½•ï¼Œå¦‚æœæƒ³è¿œç¨‹ç™»å½•çš„è¯ï¼Œå°†â€localhostâ€æ”¹ä¸ºâ€%â€ï¼Œè¡¨ç¤ºåœ¨ä»»ä½•ä¸€å°ç”µè„‘ä¸Šéƒ½å¯ä»¥ç™»å½•;ä¹Ÿå¯ä»¥æŒ‡å®šæŸå°æœºå™¨å¯ä»¥è¿œç¨‹ç™»å½•ã€‚ CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;; CREATE USER &#39;test&#39;@&#39;%&#39; IDENTIFIED BY &#39;password&#39;; ç»™åˆ›å»ºçš„ç”¨æˆ·æƒé™ privileges ç”¨æˆ·çš„æ“ä½œæƒé™,å¦‚SELECTï¼ŒINSERTï¼ŒUPDATEç­‰.å¦‚æœè¦æˆäºˆæ‰€çš„æƒé™åˆ™ä½¿ç”¨ALL databasename æ•°æ®åº“å tablename è¡¨å,å¦‚æœè¦æˆäºˆè¯¥ç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“å’Œè¡¨çš„ç›¸åº”æ“ä½œæƒé™åˆ™å¯ç”¨è¡¨ç¤º, å¦‚.*. GRANT privileges ON databasename.tablename TO &#39;username&#39;@&#39;host&#39; å®‰è£…RedisRedisæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æ•°æ®ä»“åº“ï¼Œæ—¢å¯ä»¥åšnosqlæ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥åšç¼“å­˜æ•°æ®åº“ã€‚ ä¸‹è½½å®‰è£…åŒ…ã€‚ wget http://download.redis.io/releases/redis-4.0.6.tar.gz è§£å‹å¹¶è¿›å…¥è§£å‹ä¹‹åçš„æ–‡ä»¶å¤¹ã€‚ tar -zxvf redis-4.0.6.tar.gz &amp;&amp;cd redis-4.0.6 ç¼–è¯‘å¹¶å®‰è£…ã€‚ make &amp;&amp; make install å¯åŠ¨redisæœåŠ¡ã€‚ redis-server redis.conf æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œä¸èƒ½å†è¾“å…¥ä»»ä½•å‘½ä»¤ï¼Œå› ä¸ºredis-serverå·²ç»å ç”¨äº†è¿™ä¸ªå‘½ä»¤è¡Œå®¢æˆ·ç«¯ã€‚æˆ‘ä»¬éœ€è¦å†æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·å¹¶è¿æ¥æœåŠ¡å™¨ã€‚ ä½¿ç”¨rediså®¢æˆ·ç«¯è¿æ¥RedisæœåŠ¡ï¼Œæ‰§è¡ŒRedisæ–‡ä»¶å¤¹ä¸‹çš„redis-cliæ–‡ä»¶redis-cliï¼Œè¾“å…¥å‡ ä¸ªå‘½ä»¤æµ‹è¯•ä¸€ä¸‹ç®€å•çš„set/getï¼š å…³æ‰å®¢æˆ·ç«¯ï¼ŒredisæœåŠ¡ä¹Ÿä¼šåœæ­¢ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹redis.confæ–‡ä»¶ï¼Œå°†daemonizedeçš„å€¼æ”¹ä¸ºyesã€‚ å†æ¬¡è¿è¡ŒRedisçš„å¯åŠ¨å‘½ä»¤redis-server redis.confï¼Œè¿™æ¬¡å°±ä¸ä¼šå ç”¨å‘½ä»¤è¡Œäº†ï¼Œå¯ä»¥ç»§ç»­æ“ä½œå…¶ä»–çš„ï¼ŒRedisæœåŠ¡ä¹Ÿä¸ä¼šåœæ­¢ã€‚ nginxnginxåœ¨è½¬å‘è¯·æ±‚ï¼Œè´Ÿè½½å‡è¡¡ç­‰æ–¹é¢éå¸¸æœ‰ç”¨ã€‚å®ƒå¯ä»¥å°†å‡ ä¸ªä¸åŒçš„æœåŠ¡é›†ä¸­åœ¨ä¸€ä¸ª80ç«¯å£ä¸‹ï¼Œæ ¹æ®åŸŸåæˆ–è€…è¯·æ±‚è·¯å¾„æ¥åŒºåˆ†ã€‚ åœ¨å®‰è£…nginxä¹‹å‰ï¼Œå…ˆè¦å®‰è£…å‡ ä¸ªä¾èµ–æ’ä»¶ã€‚ yum install -y pcre pcre-devel yum install -y zlib zlib-devel å®‰è£…opensslã€‚ yum install -y openssl openssl-devel ä¸‹è½½nginxåŒ…ã€‚ wget https://nginx.org/download/nginx-1.15.6.tar.gz è§£å‹å¹¶è¿›å…¥è§£å‹å¥½çš„ç›®å½•ã€‚ tar -zxvf nginx-1.15.6.tar.gz &amp;&amp; cd nginx-1.15.6 æ‰§è¡Œé…ç½®å‘½ä»¤ã€‚ ./configure ç¼–è¯‘å¹¶å®‰è£…ã€‚ make &amp;&amp; make install æŸ¥çœ‹å®‰è£…ç»“æœã€‚ whereis nginx è·³è½¬åˆ°å®‰è£…å¥½çš„nginxç›®å½•ä¸‹ï¼Œè¿›å…¥sbinç›®å½•ã€‚ cd /usr/local/nginx/sbin å¯åŠ¨nginxã€‚ ./nginx å¸¸ç”¨å‘½ä»¤ï¼š ./nginx å¯åŠ¨nginx ./nginx -s stop åœæ­¢nginx ./nginx -s quit é€€å‡ºnginx ./nginx -s reload é‡å¯nginx å®‰è£…GitcentOSä¸Šæ²¡æœ‰å®‰è£…gitï¼Œæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹ã€‚ yum install git git --version ä½¿ç”¨pm2å¯åŠ¨é¡¹ç›®åœ¨æœ¬åœ°æ­å»ºå¹¶æµ‹è¯•å¥½nodeé¡¹ç›®ï¼Œä¸Šä¼ åˆ°GitHubã€‚ç„¶ågit cloneä¸€ä¸‹ã€‚ é…ç½®ECSå®‰å…¨ç»„è§„åˆ™ï¼Œæš´éœ²3000æ¥å£ã€‚ å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨æ•°æ®åº“ï¼Œè¿è¡Œä¹‹å‰è¦å…ˆå»ºç«‹å¥½æ•°æ®åº“ï¼Œç„¶åå†è¿è¡Œé¡¹ç›®ï¼Œç™»å½•æ•°æ®åº“æ‰§è¡Œcreate database dabasename; git clone https://github.com/*** cd *** cnpm i pm2 start index.js æ³¨ï¼šé¡¹ç›®ç›‘å¬3000ç«¯å£ï¼Œå¦‚æœé¡ºåˆ©çš„è¯ï¼Œé¡¹ç›®å·²ç»è¿è¡Œèµ·æ¥äº†ã€‚ å¯ä»¥ä½¿ç”¨pm2 listæŸ¥çœ‹è¿›ç¨‹åˆ—è¡¨ï¼Œä½¿ç”¨pm2 logæ‰“å°æ—¥å¿—ã€‚ Linuxå¸¸ç”¨æ“ä½œæŒ‡ä»¤åˆ—è¡¨ å‘½ä»¤ è¯´æ˜ ssh username@ip è¿æ¥æœåŠ¡å™¨ cd path è·³è½¬åˆ°è·¯å¾„å¯¹åº”çš„ç›®å½•ä¸‹ rm filename åˆ é™¤æ–‡ä»¶ rm -rf path åˆ é™¤ç›®å½•åŠç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ ls [-a] æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œç›®å½•(-aï¼šæŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶) ll æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶è¯¦æƒ…(æ–‡ä»¶æƒé™) pwd æŸ¥çœ‹å½“å‰è·¯å¾„çš„å®Œæ•´è·¯å¾„ which name é»˜è®¤ä½ç½®æŸ¥æ‰¾è¯¥åå­— mkdir dirname åˆ›å»ºç©ºç›®å½• cat path æŸ¥çœ‹æ–‡ä»¶å†…å®¹ cp origin target å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ mv origin target ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªåœ°æ–¹ ps -aux æ˜¾ç¤ºå½“å‰è¿›ç¨‹ kill -9 processid ç»“æŸè¿›ç¨‹ tar -zxvf filename è§£å‹æ–‡ä»¶ tar -zcvf filename å‹ç¼©æ–‡ä»¶ vi path è¿›å…¥æ–‡ä»¶ç¼–è¾‘æ¨¡å¼ viç¼–è¾‘æ–‡ä»¶ï¼ŒæŒ‰ä¸‹iè¿›å…¥ç¼–è¾‘æ¨¡å¼ vié€€å‡ºæ–‡ä»¶ï¼Œesc+:wqæˆ–esc+:xä¿å­˜é€€å‡º vié€€å‡ºæ–‡ä»¶ï¼Œesc+:qæˆ–esc+:q!å¼ºåˆ¶é€€å‡º","categories":[{"name":"åç«¯","slug":"åç«¯","permalink":"http://qiandream.cn/categories/åç«¯/"}],"tags":[{"name":"Node","slug":"Node","permalink":"http://qiandream.cn/tags/Node/"}]},{"title":"JS-æ·±æ‹·è´ä¸æµ…æ‹·è´","slug":"JS-æ·±æ‹·è´ä¸æµ…æ‹·è´","date":"2018-10-11T10:11:52.000Z","updated":"2018-12-11T14:03:41.509Z","comments":true,"path":"2018/10/11/js-shen-kao-bei-yu-qian-kao-bei/","link":"","permalink":"http://qiandream.cn/2018/10/11/js-shen-kao-bei-yu-qian-kao-bei/","excerpt":"å¯¼è¯­ å½“æˆ‘ä»¬åœ¨JSä¸­å¤åˆ¶ä¸€ä¸ªæ•°æ®ï¼Œåœ¨å¤åˆ¶å¦‚stringï¼Œnumberç­‰åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œçœ‹ä¼¼æ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½†æ˜¯å½“å¤åˆ¶å¦‚arrayï¼Œobjectç±»å‹æ—¶ã€‚å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚","text":"å¯¼è¯­ å½“æˆ‘ä»¬åœ¨JSä¸­å¤åˆ¶ä¸€ä¸ªæ•°æ®ï¼Œåœ¨å¤åˆ¶å¦‚stringï¼Œnumberç­‰åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œçœ‹ä¼¼æ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ä½†æ˜¯å½“å¤åˆ¶å¦‚arrayï¼Œobjectç±»å‹æ—¶ã€‚å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚ å®ä¾‹ğŸŒ°ï¼š var a = {x: 10, y: 10} var b = a b.x = 100 b.y = 100 æ‰“å°ä¸€ä¸‹aå’Œbçš„å€¼ï¼š console.log(a) // {x: 100, y: 200} console.log(b) // {x: 100, y: 200} å‘ç°æ”¹å˜bçš„å€¼ï¼ŒåŒæ—¶ä¹Ÿæ”¹äº†açš„å€¼ã€‚ ğŸŒ°ï¼š var a = 10 var b = a b = 20 æ‰“å°ä¸€ä¸‹aå’Œbçš„å€¼ï¼š console.log(a) // 10 console.log(b) // 20 ??? bçš„å€¼æ”¹å˜å¹¶æ²¡æœ‰å¼•èµ·açš„å€¼æ”¹å˜ã€‚ å€¼ç±»å‹ vs å¼•ç”¨ç±»å‹åœ¨JSä¸­ï¼Œå˜é‡ä¼ é€’æ–¹å¼åˆ†ä¸ºå€¼ç±»å‹å’Œå¼•ç”¨ç±»å‹ã€‚å€¼ç±»å‹åŒ…æ‹¬Stringï¼ŒNumberï¼ŒNullï¼ŒBooleanï¼ŒUndefinedã€‚å¼•ç”¨ç±»å‹åŒ…æ‹¬Objectç±»çš„æ‰€æœ‰ï¼Œå¦‚Dateï¼ŒArrayï¼ŒFunctionã€‚ åœ¨å‚æ•°ä¼ é€’æ–¹å¼ä¸Šï¼Œå€¼ç±»å‹æ˜¯æŒ‰å€¼ä¼ é€’ã€‚å¼•ç”¨ç±»å‹æ˜¯æŒ‰å…±äº«ä¼ é€’(æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä¸¤è€…å¼•ç”¨åŒä¸€ä¸ªå€¼ï¼Œå½“ä¸€è€…æ”¹å˜å€¼ï¼Œå¦ä¸€è€…ä¹Ÿæ”¹å˜)ã€‚ JSè¿™æ ·è®¾è®¡çš„åŸå› åœ¨äºï¼šæŒ‰å€¼ä¼ é€’çš„ç±»å‹ï¼Œå¤åˆ¶ä¸€ä»½å­˜å…¥æ ˆå†…å­˜ï¼Œè¿™ç±»ç±»å‹ä¸€èˆ¬ä¸ä¼šå ç”¨å¤ªå¤šå†…å­˜ï¼Œè€Œä¸”æŒ‰å€¼ä¼ é€’ä¿è¯äº†å…¶è®¿é—®é€Ÿåº¦ã€‚æŒ‰å…±äº«ä¼ é€’çš„ç±»å‹ï¼Œæ˜¯å¤åˆ¶å…¶å¼•ç”¨ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¤åˆ¶å…¶å€¼ï¼Œä¿è¯è¿‡å¤§çš„å¯¹è±¡ç­‰ä¸ä¼šå› ä¸ºä¸åœå¤åˆ¶å†…å®¹è€Œé€ æˆå†…å­˜çš„æµªè´¹ã€‚ æ·±æ‹·è´å’Œæµ…æ‹·è´æœ€æ ¹æœ¬çš„åŒºåˆ«åœ¨äºæ˜¯å¦çœŸæ­£è·å–äº†ä¸€ä¸ªå¯¹è±¡çš„æ‹·è´å®ä½“ï¼Œè€Œä¸åªæ˜¯å¼•ç”¨ã€‚ æµ…æ‹·è´çš„å®ç°æ–¹å¼ç›´æ¥èµ‹å€¼ğŸŒ°ï¼š let obj = {username: &#39;kobe&#39;, age: 39, sex: {option1: &#39;ç”·&#39;, option2: &#39;å¥³&#39;}} let obj1 = obj obj1.sex.option1 = &#39;ä¸ç”·ä¸å¥³&#39; // ä¿®æ”¹å¤åˆ¶çš„å¯¹è±¡ä¼šå½±å“åŸå¯¹è±¡ æ‰“å°obj1çš„å€¼ console.log(obj1) // {username: &#39;kobe&#39;, age: 39, sex: {option1: &#39;ä¸ç”·ä¸å¥³&#39;, option2: &#39;å¥³&#39;}} Object.assignğŸŒ°ï¼š let obj = { username: &#39;kobe&#39; }; let obj1 = Object.assign(obj) obj1.username = &#39;wang&#39; æ‰“å°objçš„å€¼ console.log(obj) // { username: &quot;wang&quot; } Array.prototype.concatğŸŒ°ï¼š let arr = [1, 3, { username: &#39;kobe&#39; }] let arr2=arr.concat() arr2[2].username = &#39;wang&#39; æ‰“å°arrçš„å€¼ console.log(arr) // [1, 3, { username: &quot;wade&quot; }] Array.prototype.sliceğŸŒ°ï¼š let arr = [1, 3, { username: &#39;kobe&#39; }] let arr2=arr.slice() arr2[2].username = &#39;wang&#39; æ‰“å°arrçš„å€¼ console.log(arr) // [1, 3, { username: &quot;wade&quot; }] Array.prototype.concat vs Array.prototype.sliceå…³äºArrayçš„concatå’Œsliceè¡¥å……è¯´æ˜ï¼šArrayçš„concatå’Œsliceæ–¹æ³•ä¸æ”¹å˜åŸå§‹æ•°ç»„ï¼Œåªæ˜¯è¿”å›äº†ä¸€ä¸ªæµ…å¤åˆ¶åŸæ•°ç»„ä¸­çš„å…ƒç´ çš„ä¸€ä¸ªæ–°æ•°ç»„ã€‚ åŸæ•°ç»„ä¸­çš„å…ƒç´ ä¼šæŒ‰ç…§ä¸‹è¿°è§„åˆ™æ‹·è´ï¼š å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå¼•ç”¨ç±»å‹ï¼Œsliceæˆ–è€…concatä¼šæ‹·è´è¿™ä¸ªå¼•ç”¨åˆ°æ–°çš„æ•°ç»„é‡Œï¼Œä¸¤ä¸ªå¯¹è±¡å¼•ç”¨éƒ½å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœè¢«å¼•ç”¨çš„å¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œåˆ™æ–°æ•°ç»„å’ŒåŸæ•°ç»„ä¸­çš„è¿™ä¸ªå…ƒç´ éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚ å¦‚æœè¯¥å…ƒç´ æ˜¯ä¸ªå€¼ç±»å‹ï¼Œsliceæˆ–è€…concatä¼šå¤åˆ¶ä¸€ä»½è¿™äº›å€¼åˆ°æ–°æ•°ç»„é‡Œã€‚åœ¨åˆ«çš„æ•°ç»„é‡Œä¿®æ”¹è¿™äº›å€¼ï¼Œå¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªæ•°ç»„ã€‚ ğŸŒ°ï¼š let arr = [1, 3, { username: &#39;kobe&#39; }]; let arr3 = arr.slice(); arr3[1] = 2 console.log(arr, arr3) æ‰“å°arrå’Œarr3çš„å€¼ console.log(arr, arr3) // ---result // [1, 3, { username: &quot;kobe&quot; }] // [1, 2, { username: &quot;kobe&quot; }] æ·±æ‹·è´çš„å®ç°æ–¹å¼Object.assignObject.assignå¯ä»¥è¿›è¡Œä¸€å±‚æ·±åº¦æ‹·è´ ğŸŒ°ï¼š var obj = { name: &#39;wang&#39;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: {} }; var obj1 = Object.assign({}, obj1) obj1.age = 24 console.log(obj, obj1) æ‰“å°objå’Œobj1çš„å€¼ console.log(obj, obj1) // ----result // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: { } } // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: { }, age: 24 } ç„¶è€Œã€‚ã€‚ã€‚ã€‚ã€‚ ğŸŒ°ï¼š var obj = { name: &#39;wang&#39;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: {} }; var obj1 = Object.assign({}, obj1) obj1.test4.age = 24 æ‰“å°objå’Œobj1çš„å€¼ console.log(obj, obj1) // ----result // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: { age: 24 } } // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: { age: 24 } } JSON.parse(JSON.stringfy(obj))è¯´åˆ°æ·±æ‹·è´ï¼Œä½ è‚¯å®šä¼šæƒ³åˆ°JSON.parse(JSON.stringfy(obj))ã€‚ ğŸŒ°ï¼š var obj = { name: &#39;wang&#39;, test: { name: &#39;test&#39; } }; var obj1 = JSON.parse(JSON.stringify(obj)) obj1.test.name = 24 æ‰“å°objå’Œobj1çš„å€¼ console.log(obj, obj1) // ----result // { name: &quot;wang&quot;, test: { name: &quot;test&quot; } } // { name: &quot;wang&quot;, test: { name: 24 } } ç„¶è€Œã€‚ã€‚ã€‚ã€‚ ğŸŒ°ï¼š var obj = { name: &#39;wang&#39;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: {} }; var obj1 = JSON.parse(JSON.stringify(obj)) æ‰“å°objå’Œobj1çš„å€¼ console.log(obj, obj1) // ---result // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: { } } // { name: &quot;wang&quot;, test1: null, test4: { } } ???test2å’Œtest3ä¸è§äº†ã€‚ã€‚ã€‚ã€‚ã€‚ JSON.stringify()æ–¹æ³•æ˜¯å°†ä¸€ä¸ªJavaScriptå€¼(å¯¹è±¡æˆ–è€…æ•°ç»„)è½¬æ¢ä¸ºä¸€ä¸ªJSONå­—ç¬¦ä¸²ï¼Œä¸èƒ½æ¥å—å‡½æ•°ã€‚ æ‰‹å†™é€’å½’æ–¹æ³•function deepClone(obj) { let result let toString = Object.prototype.toString if (toString.call(obj) === &#39;[Object Array]&#39;) { result = [] for (var i =0; i&lt;obj.length; i++) { result[i] = deepClone(obj[i]) } } else if (toString.call(obj) === &#39;[Object Object]&#39;) { result = {} for (var key in obj) { if (obj.hasOwnProperty(key)) { result[key] = deepClone(obj[key]) } } } else { return obj } return result } ğŸŒ°ï¼šè°ƒç”¨å‡½æ•°å¹¶æ‰“å°ç»“æœ var obj = { name: &#39;wang&#39;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: {} }; var obj1 = deepClone(obj) console.log(obj, obj21) // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: Object { } } // { name: &quot;wang&quot;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: Object { } } jQueryå®ç°ğŸŒ°ï¼š var obj1 = { name: &#39;wang&#39;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: {} }; var obj2 = $.extend(true, {}, obj1) lodashå®ç°ğŸŒ°ï¼š var obj1 = { name: &#39;wclimb&#39;, test1: null, test2: undefined, test3: function(){alert(1)}, test4: {} }; var obj2 = _.cloneDeep(obj1)","categories":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://qiandream.cn/categories/å‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://qiandream.cn/tags/JavaScript/"}]}]}